{"version":3,"sources":["webpack://danmu.js/webpack/universalModuleDefinition","webpack://danmu.js/webpack/bootstrap","webpack://danmu.js/./src/utils/util.js","webpack://danmu.js/./node_modules/es5-ext/object/is-value.js","webpack://danmu.js/./src/index.js","webpack://danmu.js/./src/danmu.js","webpack://danmu.js/./node_modules/event-emitter/index.js","webpack://danmu.js/./node_modules/d/index.js","webpack://danmu.js/./node_modules/es5-ext/object/assign/index.js","webpack://danmu.js/./node_modules/es5-ext/object/assign/is-implemented.js","webpack://danmu.js/./node_modules/es5-ext/object/assign/shim.js","webpack://danmu.js/./node_modules/es5-ext/object/keys/index.js","webpack://danmu.js/./node_modules/es5-ext/object/keys/is-implemented.js","webpack://danmu.js/./node_modules/es5-ext/object/keys/shim.js","webpack://danmu.js/./node_modules/es5-ext/function/noop.js","webpack://danmu.js/./node_modules/es5-ext/object/valid-value.js","webpack://danmu.js/./node_modules/es5-ext/object/normalize-options.js","webpack://danmu.js/./node_modules/es5-ext/object/is-callable.js","webpack://danmu.js/./node_modules/es5-ext/string/#/contains/index.js","webpack://danmu.js/./node_modules/es5-ext/string/#/contains/is-implemented.js","webpack://danmu.js/./node_modules/es5-ext/string/#/contains/shim.js","webpack://danmu.js/./node_modules/es5-ext/object/valid-callable.js","webpack://danmu.js/./src/control.js","webpack://danmu.js/./src/domrecycle.js","webpack://danmu.js/./src/main.js","webpack://danmu.js/./src/channel.js","webpack://danmu.js/./src/bullet.js","webpack://danmu.js/./src/style/index.scss?6a19","webpack://danmu.js/./src/style/index.scss","webpack://danmu.js/./node_modules/css-loader/lib/css-base.js","webpack://danmu.js/./node_modules/style-loader/lib/addStyles.js","webpack://danmu.js/./node_modules/style-loader/lib/urls.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_domrecycle","util","domObj","RecyclableDomList","createDom","el","arguments","length","undefined","tpl","attrs","cname","dom","document","createElement","className","innerHTML","keys","forEach","item","setAttribute","hasClass","classList","Array","some","match","RegExp","addClass","replace","split","add","removeClass","remove","reg","toggleClass","findDom","sel","querySelector","e","startsWith","getElementById","slice","deepCopy","dst","src","typeOf","Node","concat","obj","toString","copyDom","nodeType","back","tagName","attributes","node","formatTime","time","Math","floor","_undefined","val","_danmu","DanmuJs","options","_this","this","_classCallCheck","config","overlap","area","start","end","live","comments","direction","hideArr","_eventEmitter2","default","self","comment","duration","container","emit","containerStyle","style","player","bulletBtn","Control","addEventListener","preventDefault","stopPropagation","clk","createEvent","initEvent","Event","dispatchEvent","main","pause","play","stop","id","txt","data","push","oldID","newID","containerPos_","getBoundingClientRect","queue","pauseMove","startMove","indexOf","filter","color","index","splice","on","once","off","methods","descriptors","base","callable","apply","Function","defineProperties","descriptor","configurable","writable","type","listener","__eeOnceListener__","__ee__","listeners","candidate","args","assign","normalizeOpts","isCallable","contains","dscr","w","desc","gs","set","foo","bar","trzy","max","dest","error","isValue","TypeError","opts1","result","process","String","str","searchString","fn","danmu","Main","defaultOff","state","switchBtn","RecyclableDOMList","initDOM","initSize","init","idleList","usingList","_id","_expand","firseIdle","shift","idx","textcontent","size","channel","Channel","timer","retryTimer","interval","status","updateQueue","rdata","bullet","bol","sort","a","b","setInterval","readData","dataHandle","resetWithCb","clearInterval","reset","channels","containerPos","resized","currentTime","list","Bullet","attach","addBullet","topInit","detach","removeBullet","containerWidth","width","containerHeight","height","containerLeft","left","containerRight","right","bulletResizeTimer","abs","resize","isFullscreen","setTimeout","bookChannelId","fontSize","test","navigator","userAgent","channelSize","scroll","top","bottom","operating","bookId","_loop","channel_id","_loop2","channelWidth","channelHeight","_loop3","num","_loop4","_loop5","occupy","ceil","message","flag","pos","j","prior","curBullet","curBulletPos","newT","curV","curT","newS","newV","bOffset","unshift","nextAddTime","channelId","_loop6","_loop7","_loop8","_loop9","cb","_util","use","appendChild","textContent","elPos","unuse","removeChild","transformOrigin","transform","transition","clearTimeout","removeTimer","willChange","pastS","Date","getTime","moveTime","moveV","nowS","moveMoreS","moveContainerHeight","moveContainerWidth","pastDuration","startTime","leftDuration","func","margin","bulletPos","parentNode","content","hmr","insertInto","locals","useSourceMap","map","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","source","sourceRoot","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","memo","stylesInDom","isOldIE","all","atob","getElement","target","styleTarget","HTMLIFrameElement","contentDocument","head","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","domStyle","refs","parts","addStyle","listToStyles","newStyles","part","css","media","insertStyleElement","Error","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","firstChild","before","removeStyleElement","createStyleElement","addAttrs","update","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","href","styleSheet","cssText","createTextNode","newObj","DEBUG","newList","mayRemove","textStore","replaceText","replacement","Boolean","cssNode","childNodes","location","baseUrl","protocol","host","currentDir","pathname","fullMatch","origUrl","newUrl","unquotedOrigUrl","trim","$1"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"danmu.js\"] = factory();\n\telse\n\t\troot[\"danmu.js\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","import RecyclableDomList from '../domrecycle.js'\n// let domObj = new RecyclableDomList()\n\nlet util = {}\n\nutil.domObj = new RecyclableDomList()\n\nutil.createDom = function (el = 'div', tpl = '', attrs = {}, cname = '') {\n  let dom = document.createElement(el)\n  dom.className = cname\n  dom.innerHTML = tpl\n  Object.keys(attrs).forEach(item => {\n    let key = item\n    let value = attrs[item]\n    if (el === 'video' || el === 'audio') {\n      if (value) {\n        dom.setAttribute(key, value)\n      }\n    } else {\n      dom.setAttribute(key, value)\n    }\n  })\n  return dom\n}\n\nutil.hasClass = function (el, className) {\n  if (el.classList) {\n    return Array.prototype.some.call(el.classList, item => item === className)\n  } else {\n    return !!el.className.match(new RegExp('(\\\\s|^)' + className + '(\\\\s|$)'))\n  }\n}\n\nutil.addClass = function (el, className) {\n  if (el.classList) {\n    className.replace(/(^\\s+|\\s+$)/g, '').split(/\\s+/g).forEach(item => {\n      item && el.classList.add(item)\n    })\n  } else if (!util.hasClass(el, className)) {\n    el.className += ' ' + className\n  }\n}\n\nutil.removeClass = function (el, className) {\n  if (el.classList) {\n    className.split(/\\s+/g).forEach(item => {\n      el.classList.remove(item)\n    })\n  } else if (util.hasClass(el, className)) {\n    className.split(/\\s+/g).forEach(item => {\n      let reg = new RegExp('(\\\\s|^)' + item + '(\\\\s|$)')\n      el.className = el.className.replace(reg, ' ')\n    })\n  }\n}\n\nutil.toggleClass = function (el, className) {\n  className.split(/\\s+/g).forEach(item => {\n    if (util.hasClass(el, item)) {\n      util.removeClass(el, item)\n    } else {\n      util.addClass(el, item)\n    }\n  })\n}\n\nutil.findDom = function (el = document, sel) {\n  let dom\n  // fix querySelector IDs that start with a digit\n  // https://stackoverflow.com/questions/37270787/uncaught-syntaxerror-failed-to-execute-queryselector-on-document\n  try {\n    dom = el.querySelector(sel)\n  } catch (e) {\n    if (sel.startsWith('#')) {\n      dom = el.getElementById(sel.slice(1))\n    }\n  }\n  return dom\n}\n\nutil.deepCopy = function (dst, src) {\n  if (util.typeOf(src) === 'Object' && util.typeOf(dst) === 'Object') {\n    Object.keys(src).forEach(key => {\n      if (util.typeOf(src[key]) === 'Object' && !(src[key] instanceof Node)) {\n        if (!dst[key]) {\n          dst[key] = src[key]\n        } else {\n          util.deepCopy(dst[key], src[key])\n        }\n      } else if (util.typeOf(src[key]) === 'Array') {\n        dst[key] = util.typeOf(dst[key]) === 'Array' ? dst[key].concat(src[key]) : src[key]\n      } else {\n        dst[key] = src[key]\n      }\n    })\n    return dst\n  }\n}\n\nutil.typeOf = function (obj) {\n  return Object.prototype.toString.call(obj).match(/([^\\s.*]+)(?=]$)/g)[0]\n}\n\nutil.copyDom = function (dom) {\n  if (dom && dom.nodeType === 1) {\n    let back = document.createElement(dom.tagName)\n    Array.prototype.forEach.call(dom.attributes, (node) => {\n      back.setAttribute(node.name, node.value)\n    })\n    if (dom.innerHTML) {\n      back.innerHTML = dom.innerHTML\n    }\n    return back\n  } else {\n    return ''\n  }\n}\n\nutil.formatTime = function (time) {\n  let s = Math.floor(time)\n  let ms = time - s\n  return s * 1000 + ms\n}\n\nexport default util\n","\"use strict\";\n\nvar _undefined = require(\"../function/noop\")(); // Support ES3 engines\n\nmodule.exports = function (val) {\n return (val !== _undefined) && (val !== null);\n};\n","import DanmuJs from './danmu'\nimport './style/index.scss'\nexport default DanmuJs\n","import EventEmitter from 'event-emitter'\nimport Control from './control'\nimport util from './utils/util'\n\nclass DanmuJs {\n  constructor (options) {\n    this.config = util.deepCopy({\n      overlap: false,\n      area: {\n        start: 0,\n        end: 1\n      },\n      live: false,\n      comments: [],\n      direction: 'r2l'\n    }, options)\n    this.hideArr = []\n    EventEmitter(this)\n    let self = this\n    this.config.comments.forEach(comment => {\n      comment.duration = comment.duration < 5000 ? 5000 : comment.duration\n      if(!comment.mode) {\n        comment.mode = 'scroll'\n      }\n    })\n    if(this.config.container && this.config.container.nodeType === 1) {\n      this.container = this.config.container\n    } else {\n      this.emit('error', 'container id can\\'t be empty')\n      return false\n    }\n    if(this.config.containerStyle) {\n      let style = this.config.containerStyle\n      Object.keys(style).forEach(function (key) {\n        self.container.style[key] = style[key]\n      })\n    }\n    this.live = this.config.live\n    this.player = this.config.player\n    this.direction = this.config.direction\n    util.addClass(this.container, 'danmu')\n    this.bulletBtn = new Control(this);\n    ['touchend', 'click', 'dblclick'].forEach(item => {\n      this.container.addEventListener(item, function (e) {\n        e.preventDefault()\n        e.stopPropagation()\n        if(self.player) {\n          // self.player.focus()\n          // if (util.hasClass(root, 'xgplayer-inactive')) {\n          //   self.player.emit('focus')\n          // } else {\n          //   self.player.emit('blur')\n          // }\n          let clk\n          if (document.createEvent) {\n            clk = document.createEvent('Event')\n            clk.initEvent(item, true, true)\n          } else {\n            clk = new Event(item)\n          }\n          self.player.dispatchEvent(clk)\n        }\n      }, false)\n    })\n    this.emit('ready')\n  }\n\n  start () {\n    this.bulletBtn.main.start()\n  }\n\n  pause () {\n    this.bulletBtn.main.pause()\n  }\n\n  play () {\n    this.bulletBtn.main.play()\n  }\n\n  stop () {\n    this.bulletBtn.main.stop()\n  }\n\n  sendComment (comment) {\n    if (comment && comment.id && comment.duration && (comment.el || comment.txt)) {\n      comment.duration = comment.duration < 5000 ? 5000 : comment.duration\n      this.bulletBtn.main.data.push(comment)\n    }\n  }\n\n  setCommentID (oldID, newID) {\n    let containerPos_ = this.container.getBoundingClientRect()\n    if (oldID && newID) {\n      this.bulletBtn.main.data.some(data => {\n        if(data.id === oldID) {\n          data.id = newID\n          return true\n        } else {\n          return false\n        }\n      })\n      this.bulletBtn.main.queue.some(item => {\n        if(item.id === oldID) {\n          item.id = newID\n          item.pauseMove(containerPos_)\n          item.startMove(containerPos_)\n          return true\n        } else {\n          return false\n        }\n      })\n    }\n  }\n\n  setCommentDuration (id, duration) {\n    let containerPos_ = this.container.getBoundingClientRect()\n    if (id && duration) {\n      duration = duration < 5000 ? 5000 : duration\n      this.bulletBtn.main.data.some(data => {\n        if(data.id === id) {\n          data.duration = duration\n          return true\n        } else {\n          return false\n        }\n      })\n      this.bulletBtn.main.queue.some(item => {\n        if(item.id === id) {\n          item.duration = duration\n          item.pauseMove(containerPos_)\n          item.startMove(containerPos_)\n          return true\n        } else {\n          return false\n        }\n      })\n    }\n  }\n\n  setAllDuration (mode = 'scroll', duration) {\n    let containerPos_ = this.container.getBoundingClientRect()\n    if (duration) {\n      duration = duration < 5000 ? 5000 : duration\n      this.bulletBtn.main.data.forEach(data => {\n        if(mode === data.mode) {\n          data.duration = duration\n        }\n      })\n      this.bulletBtn.main.queue.forEach(item => {\n        if(mode === item.mode) {\n          item.duration = duration\n          item.pauseMove(containerPos_)\n          item.startMove(containerPos_)\n        }\n      })\n    }\n  }\n\n  hide (mode = 'scroll') {\n    if(this.hideArr.indexOf(mode) < 0) {\n      this.hideArr.push(mode)\n    }\n    let arr = this.bulletBtn.main.queue.filter(item => mode === item.mode || (mode === 'color' && item.color))\n    arr.forEach(item => item.remove())\n  }\n\n  show (mode = 'scroll') {\n    let index = this.hideArr.indexOf(mode)\n    if(index > -1) {\n      this.hideArr.splice(index, 1)\n    }\n  }\n\n  setDirection (direction = 'r2l') {\n    this.emit('changeDirection', direction)\n  }\n}\n\nexport default DanmuJs\n","'use strict';\n\nvar d        = require('d')\n  , callable = require('es5-ext/object/valid-callable')\n\n  , apply = Function.prototype.apply, call = Function.prototype.call\n  , create = Object.create, defineProperty = Object.defineProperty\n  , defineProperties = Object.defineProperties\n  , hasOwnProperty = Object.prototype.hasOwnProperty\n  , descriptor = { configurable: true, enumerable: false, writable: true }\n\n  , on, once, off, emit, methods, descriptors, base;\n\non = function (type, listener) {\n\tvar data;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) {\n\t\tdata = descriptor.value = create(null);\n\t\tdefineProperty(this, '__ee__', descriptor);\n\t\tdescriptor.value = null;\n\t} else {\n\t\tdata = this.__ee__;\n\t}\n\tif (!data[type]) data[type] = listener;\n\telse if (typeof data[type] === 'object') data[type].push(listener);\n\telse data[type] = [data[type], listener];\n\n\treturn this;\n};\n\nonce = function (type, listener) {\n\tvar once, self;\n\n\tcallable(listener);\n\tself = this;\n\ton.call(this, type, once = function () {\n\t\toff.call(self, type, once);\n\t\tapply.call(listener, this, arguments);\n\t});\n\n\tonce.__eeOnceListener__ = listener;\n\treturn this;\n};\n\noff = function (type, listener) {\n\tvar data, listeners, candidate, i;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return this;\n\tdata = this.__ee__;\n\tif (!data[type]) return this;\n\tlisteners = data[type];\n\n\tif (typeof listeners === 'object') {\n\t\tfor (i = 0; (candidate = listeners[i]); ++i) {\n\t\t\tif ((candidate === listener) ||\n\t\t\t\t\t(candidate.__eeOnceListener__ === listener)) {\n\t\t\t\tif (listeners.length === 2) data[type] = listeners[i ? 0 : 1];\n\t\t\t\telse listeners.splice(i, 1);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif ((listeners === listener) ||\n\t\t\t\t(listeners.__eeOnceListener__ === listener)) {\n\t\t\tdelete data[type];\n\t\t}\n\t}\n\n\treturn this;\n};\n\nemit = function (type) {\n\tvar i, l, listener, listeners, args;\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return;\n\tlisteners = this.__ee__[type];\n\tif (!listeners) return;\n\n\tif (typeof listeners === 'object') {\n\t\tl = arguments.length;\n\t\targs = new Array(l - 1);\n\t\tfor (i = 1; i < l; ++i) args[i - 1] = arguments[i];\n\n\t\tlisteners = listeners.slice();\n\t\tfor (i = 0; (listener = listeners[i]); ++i) {\n\t\t\tapply.call(listener, this, args);\n\t\t}\n\t} else {\n\t\tswitch (arguments.length) {\n\t\tcase 1:\n\t\t\tcall.call(listeners, this);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tcall.call(listeners, this, arguments[1]);\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tcall.call(listeners, this, arguments[1], arguments[2]);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tl = arguments.length;\n\t\t\targs = new Array(l - 1);\n\t\t\tfor (i = 1; i < l; ++i) {\n\t\t\t\targs[i - 1] = arguments[i];\n\t\t\t}\n\t\t\tapply.call(listeners, this, args);\n\t\t}\n\t}\n};\n\nmethods = {\n\ton: on,\n\tonce: once,\n\toff: off,\n\temit: emit\n};\n\ndescriptors = {\n\ton: d(on),\n\tonce: d(once),\n\toff: d(off),\n\temit: d(emit)\n};\n\nbase = defineProperties({}, descriptors);\n\nmodule.exports = exports = function (o) {\n\treturn (o == null) ? create(base) : defineProperties(Object(o), descriptors);\n};\nexports.methods = methods;\n","'use strict';\n\nvar assign        = require('es5-ext/object/assign')\n  , normalizeOpts = require('es5-ext/object/normalize-options')\n  , isCallable    = require('es5-ext/object/is-callable')\n  , contains      = require('es5-ext/string/#/contains')\n\n  , d;\n\nd = module.exports = function (dscr, value/*, options*/) {\n\tvar c, e, w, options, desc;\n\tif ((arguments.length < 2) || (typeof dscr !== 'string')) {\n\t\toptions = value;\n\t\tvalue = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[2];\n\t}\n\tif (dscr == null) {\n\t\tc = w = true;\n\t\te = false;\n\t} else {\n\t\tc = contains.call(dscr, 'c');\n\t\te = contains.call(dscr, 'e');\n\t\tw = contains.call(dscr, 'w');\n\t}\n\n\tdesc = { value: value, configurable: c, enumerable: e, writable: w };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n\nd.gs = function (dscr, get, set/*, options*/) {\n\tvar c, e, options, desc;\n\tif (typeof dscr !== 'string') {\n\t\toptions = set;\n\t\tset = get;\n\t\tget = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[3];\n\t}\n\tif (get == null) {\n\t\tget = undefined;\n\t} else if (!isCallable(get)) {\n\t\toptions = get;\n\t\tget = set = undefined;\n\t} else if (set == null) {\n\t\tset = undefined;\n\t} else if (!isCallable(set)) {\n\t\toptions = set;\n\t\tset = undefined;\n\t}\n\tif (dscr == null) {\n\t\tc = true;\n\t\te = false;\n\t} else {\n\t\tc = contains.call(dscr, 'c');\n\t\te = contains.call(dscr, 'e');\n\t}\n\n\tdesc = { get: get, set: set, configurable: c, enumerable: e };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")()\n\t? Object.assign\n\t: require(\"./shim\");\n","\"use strict\";\n\nmodule.exports = function () {\n\tvar assign = Object.assign, obj;\n\tif (typeof assign !== \"function\") return false;\n\tobj = { foo: \"raz\" };\n\tassign(obj, { bar: \"dwa\" }, { trzy: \"trzy\" });\n\treturn (obj.foo + obj.bar + obj.trzy) === \"razdwatrzy\";\n};\n","\"use strict\";\n\nvar keys  = require(\"../keys\")\n  , value = require(\"../valid-value\")\n  , max   = Math.max;\n\nmodule.exports = function (dest, src /*, srcn*/) {\n\tvar error, i, length = max(arguments.length, 2), assign;\n\tdest = Object(value(dest));\n\tassign = function (key) {\n\t\ttry {\n\t\t\tdest[key] = src[key];\n\t\t} catch (e) {\n\t\t\tif (!error) error = e;\n\t\t}\n\t};\n\tfor (i = 1; i < length; ++i) {\n\t\tsrc = arguments[i];\n\t\tkeys(src).forEach(assign);\n\t}\n\tif (error !== undefined) throw error;\n\treturn dest;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.keys : require(\"./shim\");\n","\"use strict\";\n\nmodule.exports = function () {\n\ttry {\n\t\tObject.keys(\"primitive\");\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\nvar isValue = require(\"../is-value\");\n\nvar keys = Object.keys;\n\nmodule.exports = function (object) { return keys(isValue(object) ? Object(object) : object); };\n","\"use strict\";\n\n// eslint-disable-next-line no-empty-function\nmodule.exports = function () {};\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) throw new TypeError(\"Cannot use null or undefined\");\n\treturn value;\n};\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nvar forEach = Array.prototype.forEach, create = Object.create;\n\nvar process = function (src, obj) {\n\tvar key;\n\tfor (key in src) obj[key] = src[key];\n};\n\n// eslint-disable-next-line no-unused-vars\nmodule.exports = function (opts1 /*, options*/) {\n\tvar result = create(null);\n\tforEach.call(arguments, function (options) {\n\t\tif (!isValue(options)) return;\n\t\tprocess(Object(options), result);\n\t});\n\treturn result;\n};\n","// Deprecated\n\n\"use strict\";\n\nmodule.exports = function (obj) {\n return typeof obj === \"function\";\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")()\n\t? String.prototype.contains\n\t: require(\"./shim\");\n","\"use strict\";\n\nvar str = \"razdwatrzy\";\n\nmodule.exports = function () {\n\tif (typeof str.contains !== \"function\") return false;\n\treturn (str.contains(\"dwa\") === true) && (str.contains(\"foo\") === false);\n};\n","\"use strict\";\n\nvar indexOf = String.prototype.indexOf;\n\nmodule.exports = function (searchString/*, position*/) {\n\treturn indexOf.call(this, searchString, arguments[1]) > -1;\n};\n","\"use strict\";\n\nmodule.exports = function (fn) {\n\tif (typeof fn !== \"function\") throw new TypeError(fn + \" is not a function\");\n\treturn fn;\n};\n","import util from './utils/util'\nimport Main from './main'\n\nclass Control {\n  constructor (danmu) {\n    this.danmu = danmu\n    this.main = new Main(danmu)\n    if(!danmu.config.defaultOff) {\n      this.main.start()\n    }\n  }\n\n  createSwitch (state = true) {\n    this.switchBtn = util.createDom('dk-switch', '<span class=\"txt\"></span>', {}, `danmu-switch ${state ? 'danmu-switch-active' : ''}`)\n    return this.switchBtn\n  }\n}\n\nexport default Control\n","\nexport default class RecyclableDOMList {\n  constructor(options) {\n    options = {\n      initDOM: () => document.createElement(\"div\"),\n      initSize: 10\n    }\n    this.init(options)\n  }\n\n  init(options) {\n    this.idleList = [];\n    this.usingList = [];\n    this._id = 0;\n    this.options = options;\n    this._expand(options.initSize);\n  }\n\n  use() {\n    if (!this.idleList.length) {\n      this._expand(1)\n    }\n    const firseIdle = this.idleList.shift();\n    this.usingList.push(firseIdle);\n    return firseIdle;\n  }\n\n  unuse(dom) {\n    const idx = this.usingList.indexOf(dom);\n\n    if (idx < 0) {\n      return;\n    }\n    this.usingList.splice(idx, 1);\n    dom.innerHTML = ''\n    dom.textcontent = ''\n    dom.style = ''\n    this.idleList.push(dom);\n  }\n\n  _expand(size) {\n    for (let i = 0; i < size; i++) {\n      this.idleList.push(this.options.initDOM(this._id++));\n    }\n  }\n}","import Channel from './channel'\nimport Bullet from './bullet'\nimport util from './utils/util'\n\n/**\n * [Main ]\n * @type {Class}\n */\nclass Main {\n  constructor (danmu) {\n    this.danmu = danmu\n    this.container = danmu.container\n    this.channel = new Channel(danmu)// \n    this.data = [].concat(danmu.config.comments)\n    this.queue = []// \n    this.timer = null// \n    this.retryTimer = null// \n    this.interval = 2000// \n    this.status = 'idle'// \n    danmu.on('bullet_remove', this.updateQueue.bind(this))\n    let self = this\n    this.danmu.on('changeDirection', direction => {\n      self.danmu.direction = direction\n    })\n  }\n  // \n  updateQueue (rdata) {\n    let self = this\n    self.queue.some((item, index) => {\n      if (item.id === rdata.bullet.id) {\n        self.queue.splice(index, 1)\n        return true\n      } else {\n        return false\n      }\n    })\n  }\n  init (bol, self) {\n    if (!self) {\n      self = this\n    }\n    self.data.sort((a, b) => a.start - b.start)\n    if (!self.retryTimer) {\n      self.retryTimer = setInterval(function () {\n        self.readData()\n        self.dataHandle()\n      }, self.interval - 1000)\n    }\n  }\n  // \n  start () {\n    let self = this\n    this.status = 'playing'\n    this.queue = []\n    this.container.innerHTML = ''\n    this.channel.resetWithCb(self.init, self)\n  }\n  stop () {\n    let self = this\n    this.status = 'closed'\n    clearInterval(self.retryTimer)\n    self.retryTimer = null\n    self.channel.reset()\n    this.queue = []\n    self.container.innerHTML = ''\n  }\n  play () {\n    this.status = 'playing'\n    let channels = this.channel.channels\n    let containerPos = this.danmu.container.getBoundingClientRect()\n    if (channels && channels.length > 0) {\n      ['scroll', 'top', 'bottom'].forEach( key => {\n        for (let i = 0; i < channels.length; i++) {\n          channels[i].queue[key].forEach(item => {\n            if(!item.resized) {\n              item.startMove(containerPos)\n              item.resized = true\n            }\n          })\n        }\n        for (let i = 0; i < channels.length; i++) {\n          channels[i].queue[key].forEach(item => {\n            item.resized = false\n          })\n        }\n      })\n    }\n  }\n  pause () {\n    this.status = 'paused'\n    let channels = this.channel.channels\n    let containerPos = this.danmu.container.getBoundingClientRect()\n    if (channels && channels.length > 0) {\n      ['scroll', 'top', 'bottom'].forEach( key => {\n        for (let i = 0; i < channels.length; i++) {\n          channels[i].queue[key].forEach(item => {\n            item.pauseMove(containerPos)\n          })\n        }\n      })\n    }\n  }\n  dataHandle () {\n    let self = this\n    if (this.status === 'paused' || this.status === 'closed') {\n      return\n    }\n    if (self.queue.length) {\n      self.queue.forEach(item => {\n        if (item.status === 'waiting' || item.status === 'paused') {\n          // item.status = 'start'\n          item.startMove(self.channel.containerPos)\n        }\n      })\n    }\n  }\n  readData () {\n    let self = this, danmu = this.danmu\n    let currentTime = 0\n    if(danmu.player && danmu.player.currentTime) {\n      currentTime = util.formatTime(danmu.player.currentTime)\n    }\n    let bullet, interval = self.interval, channel = self.channel, result\n    let list\n    if(danmu.player) {\n      list = self.data.filter(item => {\n        if (!item.start && self.danmu.hideArr.indexOf(item.mode) < 0) {\n          if (!item.color || self.danmu.hideArr.indexOf('color') < 0) {\n            item.start = currentTime\n          }\n        }\n        return self.danmu.hideArr.indexOf(item.mode) < 0 && (!item.color || self.danmu.hideArr.indexOf('color') < 0) && item.start - interval <= currentTime && currentTime <= item.start + interval\n      })\n      if(danmu.live) {\n        self.data = self.data.filter(item => {\n          if (!item.start) {\n            item.start = currentTime\n          }\n          return item.start > currentTime - 3 * interval\n        })\n      }\n    } else {\n      list = self.data.filter(item => {\n        return self.danmu.hideArr.indexOf(item.mode) < 0 && (!item.color || self.danmu.hideArr.indexOf('color') < 0)\n      })\n    }\n\n    if (list.length > 0) {\n      list.forEach(item => {\n        bullet = new Bullet(danmu, item)\n        bullet.attach()\n        // console.log(list.length)\n        result = channel.addBullet(bullet)\n        if (result.result) {\n          self.queue.push(bullet)\n          bullet.topInit()\n        } else {\n          bullet.detach()\n        }\n      })\n    }\n  }\n}\n\nexport default Main\n","/**\n * [Channel ]\n * @type {Class}\n */\nclass Channel {\n  constructor (danmu) {\n    this.danmu = danmu\n    this.reset()\n    let self = this\n    this.danmu.on('bullet_remove', function (r) {\n      self.removeBullet(r.bullet)\n    })\n    this.direction = danmu.direction\n    this.danmu.on('changeDirection', direction => {\n      self.direction = direction\n    })\n    this.containerPos = this.danmu.container.getBoundingClientRect()\n    this.containerWidth = this.containerPos.width\n    this.containerHeight = this.containerPos.height\n    this.containerLeft = this.containerPos.left\n    this.containerRight = this.containerPos.right\n    // this.player.on('timeupdate', function () {\n    this.danmu.bulletResizeTimer = setInterval(function () {\n      self.containerPos = self.danmu.container.getBoundingClientRect()\n      if (Math.abs(self.containerPos.width - self.containerWidth) >= 2 || Math.abs(self.containerPos.height - self.containerHeight) >= 2 || Math.abs(self.containerPos.left - self.containerLeft) >= 2 || Math.abs(self.containerPos.right - self.containerRight) >= 2) {\n        // console.log('' + self.containerPos.width)\n        // console.log('' + self.playerWidth)\n        // console.log('' + self.containerPos.height)\n        // console.log('' + self.playerHeight)\n        // console.log('' + self.containerPos.left)\n        // console.log('' + self.playerLeft)\n        // console.log('' + self.containerPos.right)\n        // console.log('' + self.playerRight)\n        self.containerWidth = self.containerPos.width\n        self.containerHeight = self.containerPos.height\n        self.containerLeft = self.containerPos.left\n        self.containerRight = self.containerPos.right\n        self.resize(true)\n      }\n    }, 50)\n    // ['fullscreenchange', 'webkitfullscreenchange', 'mozfullscreenchange', 'MSFullscreenChange'].forEach(item => {\n    //   document.addEventListener(item, function () {\n    //     console.log(item)\n    //     setTimeout(function () {\n    //       self.resize(true)\n    //     }, 20)\n    //   })\n    // })\n  }\n  resize (isFullscreen = false) {\n    let container = this.danmu.container\n    let self = this\n    setTimeout(function () {\n      if (self.danmu.bulletBtn.main.data) {\n        self.danmu.bulletBtn.main.data.forEach(item => {\n          if (item.bookChannelId) {\n            delete item['bookChannelId']\n            // console.log('resize' + item.id + '')\n          }\n        })\n      }\n      // console.log('resize')\n      let size = container.getBoundingClientRect()\n      self.width = size.width\n      self.height = size.height\n\n      if (self.danmu.config.area && self.danmu.config.area.start >= 0 && self.danmu.config.area.end >= self.danmu.config.area.start) {\n        if(self.direction === 'b2t') {\n          self.width = self.width * (self.danmu.config.area.end - self.danmu.config.area.start)\n        } else {\n          self.height = self.height * (self.danmu.config.area.end - self.danmu.config.area.start)\n        }\n      }\n      self.container = container\n      let fontSize = /mobile/ig.test(navigator.userAgent) ? 10 : 12\n      let channelSize\n      if(self.direction === 'b2t') {\n        channelSize = Math.floor(self.width / fontSize)\n      } else {\n        channelSize = Math.floor(self.height / fontSize)\n      }\n      let channels = []\n      for (let i = 0; i < channelSize; i++) {\n        channels[i] = {\n          id: i,\n          queue: {\n            scroll: [],\n            top: [],\n            bottom: []\n          },\n          operating: {\n            scroll: false,\n            top: false,\n            bottom: false\n          },\n          bookId: {}\n        }\n      }\n      if (self.channels && self.channels.length <= channels.length) {\n        for (let i = 0; i < self.channels.length; i++) {\n          channels[i] = {\n            id: i,\n            queue: {\n              scroll: [],\n              top: [],\n              bottom: []\n            },\n            operating: {\n              scroll: false,\n              top: false,\n              bottom: false\n            },\n            bookId: {}\n          };\n          ['scroll', 'top'].forEach(key => {\n            self.channels[i].queue[key].forEach(item => {\n              if (item.el) {\n                channels[i].queue[key].push(item)\n                if(!item.resized) {\n                  item.pauseMove(self.containerPos, isFullscreen)\n                  item.startMove(self.containerPos)\n                  item.resized = true\n                }\n              }\n            })\n          })\n          self.channels[i].queue['bottom'].forEach(item => {\n            if (item.el) {\n              channels[i + channels.length - self.channels.length].queue['bottom'].push(item)\n              if(item.channel_id[0] + item.channel_id[1] - 1 === i) {\n                let channel_id = [].concat(item.channel_id)\n                item.channel_id = [channel_id[0] - self.channels.length + channels.length, channel_id[1]]\n                item.top = item.channel_id[0] * fontSize\n                if (self.danmu.config.area && self.danmu.config.area.start) {\n                  item.top += self.containerHeight * self.danmu.config.area.start\n                }\n                item.topInit()\n              }\n              if(!item.resized) {\n                item.pauseMove(self.containerPos, isFullscreen)\n                item.startMove(self.containerPos)\n                item.resized = true\n              }\n            }\n          })\n        }\n        for (let i = 0; i < channels.length; i++) {\n          ['scroll', 'top', 'bottom'].forEach(key => {\n            channels[i].queue[key].forEach(item => {\n              // console.log('resized :' + item)\n              item.resized = false\n            })\n          })\n        }\n        self.channels = channels\n        if(self.direction === 'b2t') {\n          self.channelWidth = fontSize\n        } else {\n          self.channelHeight = fontSize\n        }\n      } else if (self.channels && self.channels.length > channels.length) {\n        for (let i = 0; i < channels.length; i++) {\n          channels[i] = {\n            id: i,\n            queue: {\n              scroll: [],\n              top: [],\n              bottom: []\n            },\n            operating: {\n              scroll: false,\n              top: false,\n              bottom: false\n            },\n            bookId: {}\n          };\n          ['scroll', 'top', 'bottom'].forEach(key => {\n            if (key === 'top' && i > Math.floor(channels.length / 2)) {\n\n            } else if (key === 'bottom' && i <= Math.floor(channels.length / 2)) {\n\n            } else {\n              let num = key === 'bottom' ? i - channels.length + self.channels.length : i\n              self.channels[num].queue[key].forEach((item, index) => {\n                if (item.el) {\n                  channels[i].queue[key].push(item)\n                  if(key === 'bottom') {\n                    if(item.channel_id[0] + item.channel_id[1] - 1 === num) {\n                      let channel_id = [].concat(item.channel_id)\n                      item.channel_id = [channel_id[0] - self.channels.length + channels.length, channel_id[1]]\n                      item.top = item.channel_id[0] * fontSize\n                      if (self.danmu.config.area && self.danmu.config.area.start) {\n                        item.top += self.containerHeight * self.danmu.config.area.start\n                      }\n                      item.topInit()\n                    }\n                  }\n                  if(!item.resized) {\n                    item.pauseMove(self.containerPos, isFullscreen)\n                    item.startMove(self.containerPos)\n                    item.resized = true\n                  }\n                }\n                self.channels[num].queue[key].splice(index, 1)\n              })\n            }\n          })\n        }\n        for (let i = channels.length; i < self.channels.length; i++) {\n          ['scroll', 'top', 'bottom'].forEach(key => {\n            self.channels[i].queue[key].forEach(item => {\n              item.pauseMove(self.containerPos)\n              item.remove()\n            })\n          })\n        }\n        for (let i = 0; i < channels.length; i++) {\n          ['scroll', 'top', 'bottom'].forEach(key => {\n            channels[i].queue[key].forEach(item => {\n              // console.log('resized :' + item)\n              item.resized = false\n            })\n          })\n        }\n        self.channels = channels\n        if(self.direction === 'b2t') {\n          self.channelWidth = fontSize\n        } else {\n          self.channelHeight = fontSize\n        }\n      }\n    }, 10)\n  }\n  addBullet (bullet) {\n    // if (bullet.prior) {\n      // console.log(bullet.id + '')\n    // }\n    let self = this\n    let danmu = this.danmu\n    let channels = this.channels\n    let channelHeight, channelWidth, occupy\n    if(self.direction === 'b2t') {\n      channelWidth = this.channelWidth\n      occupy = Math.ceil(bullet.width / channelWidth)\n    } else {\n      channelHeight = this.channelHeight\n      occupy = Math.ceil(bullet.height / channelHeight)\n    }\n    if (occupy > channels.length) {\n      return {\n        result: false,\n        message: `exceed channels.length, occupy=${occupy},channelsSize=${channels.length}`\n      }\n    } else {\n      let flag = true, channel, pos = -1\n      for (let i = 0, max = channels.length; i < max; i++) {\n        if (channels[i].queue[bullet.mode].some(item => item.id === bullet.id)) {\n          return {\n            result: false,\n            message: `exsited, channelOrder=${i},danmu_id=${bullet.id}`\n          }\n        }\n      }\n      if(bullet.mode === 'scroll') {\n        for (let i = 0, max = channels.length - occupy; i <= max; i++) {\n          flag = true\n          for (let j = i; j < i + occupy; j++) {\n            channel = channels[j]\n            if (channel.operating.scroll) {\n              flag = false\n              break\n            }\n            if ((channel.bookId.scroll || bullet.prior) && (channel.bookId.scroll !== bullet.id)) {\n              flag = false\n              break\n            }\n            channel.operating.scroll = true\n            let curBullet = channel.queue.scroll[0]\n            if (curBullet) {\n              let curBulletPos = curBullet.el.getBoundingClientRect()\n              if(self.direction === 'b2t') {\n                if (curBulletPos.bottom > self.containerPos.bottom) {\n                  flag = false\n                  channel.operating.scroll = false\n                  break\n                }\n              } else {\n                if (curBulletPos.right > self.containerPos.right) {\n                  flag = false\n                  channel.operating.scroll = false\n                  break\n                }\n              }\n\n              // Vcur * t + Scur - Widthcur = Vnew * t\n              // t = (Scur - Widthcur) / (Vnew - Vcur)\n              // Vnew * t < Widthplayer\n              let curS, curV, curT, newS, newV, newT\n              if(self.direction === 'b2t') {\n                curS = curBulletPos.top - self.containerPos.top + curBulletPos.height\n\n                curV = (self.containerPos.height + curBulletPos.height) / curBullet.duration\n                curT = curS / curV\n\n                newS = self.containerPos.height\n                newV = (self.containerPos.height + bullet.height) / bullet.duration\n              } else {\n                curS = curBulletPos.left - self.containerPos.left + curBulletPos.width\n\n                curV = (self.containerPos.width + curBulletPos.width) / curBullet.duration\n                curT = curS / curV\n\n                newS = self.containerPos.width\n                newV = (self.containerPos.width + bullet.width) / bullet.duration\n              }\n              newT = newS / newV\n              if (!danmu.config.bOffset) {\n                danmu.config.bOffset = 0\n              }\n              if (curV < newV && curT + danmu.config.bOffset > newT) {\n                flag = false\n                channel.operating.scroll = false\n                break\n              }\n            }\n            channel.operating.scroll = false\n          }\n          if (flag) {\n            pos = i\n            break\n          }\n        }\n      } else if (bullet.mode === 'top') {\n        for (let i = 0, max = channels.length - occupy; i <= max; i++) {\n          flag = true\n          for (let j = i; j < i + occupy; j++) {\n            if(j > Math.floor(channels.length / 2)) {\n              flag = false\n              break\n            }\n            channel = channels[j]\n            if (channel.operating[bullet.mode]) {\n              flag = false\n              break\n            }\n            if ((channel.bookId[bullet.mode] || bullet.prior) && (channel.bookId[bullet.mode] !== bullet.id)) {\n              flag = false\n              break\n            }\n            channel.operating[bullet.mode] = true\n            if (channel.queue[bullet.mode].length > 0) {\n              flag = false\n              channel.operating[bullet.mode] = false\n              break\n            }\n            channel.operating[bullet.mode] = false\n          }\n          if (flag) {\n            pos = i\n            break\n          }\n        }\n      } else if (bullet.mode === 'bottom') {\n        for (let i = channels.length - occupy; i >= 0; i--) {\n          flag = true\n          for (let j = i; j < i + occupy; j++) {\n            if(j <= Math.floor(channels.length / 2)) {\n              flag = false\n              break\n            }\n            channel = channels[j]\n            if (channel.operating[bullet.mode]) {\n              flag = false\n              break\n            }\n            if ((channel.bookId[bullet.mode] || bullet.prior) && (channel.bookId[bullet.mode] !== bullet.id)) {\n              flag = false\n              break\n            }\n            channel.operating[bullet.mode] = true\n            if (channel.queue[bullet.mode].length > 0) {\n              flag = false\n              channel.operating[bullet.mode] = false\n              break\n            }\n            channel.operating[bullet.mode] = false\n          }\n          if (flag) {\n            pos = i\n            break\n          }\n        }\n      }\n\n      if (pos !== -1) {\n        for (let i = pos, max = pos + occupy; i < max; i++) {\n          channel = channels[i]\n          channel.operating[bullet.mode] = true\n          channel.queue[bullet.mode].unshift(bullet)\n          if (bullet.prior) {\n            delete channel.bookId[bullet.mode]\n            // console.log(i + '')\n          }\n          channel.operating[bullet.mode] = false\n        }\n        if (bullet.prior) {\n          // console.log(bullet.id + '')\n          delete bullet['bookChannelId']\n          let dataList = danmu.bulletBtn.main.data\n          dataList.some(function (item) {\n            if (item.id === bullet.id) {\n              delete item['bookChannelId']\n              return true\n            } else {\n              return false\n            }\n          })\n        }\n        bullet.channel_id = [pos, occupy]\n\n        if(self.direction === 'b2t') {\n          bullet.top = pos * channelWidth\n          if (self.danmu.config.area && self.danmu.config.area.start) {\n            bullet.top += self.containerWidth * self.danmu.config.area.start\n          }\n        } else {\n          bullet.top = pos * channelHeight\n          if (self.danmu.config.area && self.danmu.config.area.start) {\n            bullet.top += self.containerHeight * self.danmu.config.area.start\n          }\n        }\n        return {\n          result: bullet,\n          message: 'success'\n        }\n      } else {\n        if (bullet.prior) {\n          if (!bullet.bookChannelId) {\n            pos = -1\n            for (let i = 0, max = channels.length - occupy; i <= max; i++) {\n              flag = true\n              for (let j = i; j < i + occupy; j++) {\n                if (channels[j].bookId[bullet.mode]) {\n                  flag = false\n                  break\n                }\n              }\n              if (flag) {\n                pos = i\n                break\n              }\n            }\n            if (pos !== -1) {\n              for (let j = pos; j < pos + occupy; j++) {\n                channels[j].bookId[bullet.mode] = bullet.id\n                // console.log(j + '' + bullet.id + '')\n              }\n              let nextAddTime = 2\n              let dataList = danmu.bulletBtn.main.data\n              dataList.some(function (item) {\n                if (item.id === bullet.id) {\n                  // console.log(bullet.id + '' + nextAddTime + '')\n                  item.start += nextAddTime * 1000\n                  item.bookChannelId = [pos, occupy]\n                  // console.log(bullet.id + '' + pos + '~' + pos + occupy - 1 + '')\n                  // console.log(`${bullet.id}${pos}~${pos + occupy - 1}`)\n                  return true\n                } else {\n                  return false\n                }\n              })\n            }\n          } else {\n            let nextAddTime = 2\n            let dataList = danmu.bulletBtn.main.data\n            dataList.some(function (item) {\n              if (item.id === bullet.id) {\n                // console.log(bullet.id + '' + nextAddTime + '')\n                item.start += nextAddTime * 1000\n                return true\n              } else {\n                return false\n              }\n            })\n          }\n        }\n        return {\n          result: false,\n          message: 'no surplus will right'\n        }\n      }\n    }\n  }\n  removeBullet (bullet) {\n    // console.log('removeBullet')\n    let channels = this.channels\n    let channelId = bullet.channel_id\n    let channel\n    for (let i = channelId[0], max = channelId[0] + channelId[1]; i < max; i++) {\n      channel = channels[i]\n      if (channel) {\n        channel.operating[bullet.mode] = true\n        let i = -1\n        channel.queue[bullet.mode].some((item, index) => {\n          if (item.id === bullet.id) {\n            i = index\n            return true\n          } else {\n            return false\n          }\n        })\n        if (i > -1) {\n          channel.queue[bullet.mode].splice(i, 1)\n        }\n        channel.operating[bullet.mode] = false\n      }\n    }\n  }\n  resetArea () {\n    let container = this.danmu.container\n    let self = this\n    let size = container.getBoundingClientRect()\n    self.width = size.width\n    self.height = size.height\n    if (self.danmu.config.area && self.danmu.config.area.start >= 0 && self.danmu.config.area.end >= self.danmu.config.area.start) {\n      if(self.direction === 'b2t') {\n        self.width = self.width * (self.danmu.config.area.end - self.danmu.config.area.start)\n      } else {\n        self.height = self.height * (self.danmu.config.area.end - self.danmu.config.area.start)\n      }\n    }\n    self.container = container\n    let fontSize = /mobile/ig.test(navigator.userAgent) ? 10 : 12\n    let channelSize\n    if(self.direction === 'b2t') {\n      channelSize = Math.floor(self.width / fontSize)\n    } else {\n      channelSize = Math.floor(self.height / fontSize)\n    }\n\n    let channels = []\n    for (let i = 0; i < channelSize; i++) {\n      channels[i] = {\n        id: i,\n        queue: {\n          scroll: [],\n          top: [],\n          bottom: []\n        },\n        operating: {\n          scroll: false,\n          top: false,\n          bottom: false\n        },\n        bookId: {}\n      }\n    }\n\n    if (self.channels && self.channels.length <= channels.length) {\n      for (let i = 0; i < self.channels.length; i++) {\n        channels[i] = {\n          id: i,\n          queue: {\n            scroll: [],\n            top: [],\n            bottom: []\n          },\n          operating: {\n            scroll: false,\n            top: false,\n            bottom: false\n          },\n          bookId: {}\n        };\n        ['scroll', 'top'].forEach(key => {\n          self.channels[i].queue[key].forEach(item => {\n            if (item.el) {\n              channels[i].queue[key].push(item)\n              if(!item.resized) {\n                item.pauseMove(self.containerPos, false)\n                item.startMove(self.containerPos)\n                item.resized = true\n              }\n            }\n          })\n        })\n        self.channels[i].queue['bottom'].forEach(item => {\n          if (item.el) {\n            channels[i + channels.length - self.channels.length].queue['bottom'].push(item)\n            if(item.channel_id[0] + item.channel_id[1] - 1 === i) {\n              let channel_id = [].concat(item.channel_id)\n              item.channel_id = [channel_id[0] - self.channels.length + channels.length, channel_id[1]]\n              item.top = item.channel_id[0] * fontSize\n              if (self.danmu.config.area && self.danmu.config.area.start) {\n                item.top += self.containerHeight * self.danmu.config.area.start\n              }\n              item.topInit()\n            }\n            if(!item.resized) {\n              item.pauseMove(self.containerPos, false)\n              item.startMove(self.containerPos)\n              item.resized = true\n            }\n          }\n        })\n      }\n      for (let i = 0; i < channels.length; i++) {\n        ['scroll', 'top', 'bottom'].forEach(key => {\n          channels[i].queue[key].forEach(item => {\n            // console.log('resized :' + item)\n            item.resized = false\n          })\n        })\n      }\n      self.channels = channels\n      if(self.direction === 'b2t') {\n        self.channelWidth = fontSize\n      } else {\n        self.channelHeight = fontSize\n      }\n    } else if (self.channels && self.channels.length > channels.length) {\n      for (let i = 0; i < channels.length; i++) {\n        channels[i] = {\n          id: i,\n          queue: {\n            scroll: [],\n            top: [],\n            bottom: []\n          },\n          operating: {\n            scroll: false,\n            top: false,\n            bottom: false\n          },\n          bookId: {}\n        };\n        ['scroll', 'top', 'bottom'].forEach(key => {\n          if (key === 'top' && i > Math.floor(channels.length / 2)) {\n\n          } else if (key === 'bottom' && i <= Math.floor(channels.length / 2)) {\n\n          } else {\n            let num = key === 'bottom' ? i - channels.length + self.channels.length : i\n            self.channels[num].queue[key].forEach((item, index) => {\n              if (item.el) {\n                channels[i].queue[key].push(item)\n                if(key === 'bottom') {\n                  if(item.channel_id[0] + item.channel_id[1] - 1 === num) {\n                    let channel_id = [].concat(item.channel_id)\n                    item.channel_id = [channel_id[0] - self.channels.length + channels.length, channel_id[1]]\n                    item.top = item.channel_id[0] * fontSize\n                    if (self.danmu.config.area && self.danmu.config.area.start) {\n                      item.top += self.containerHeight * self.danmu.config.area.start\n                    }\n                    item.topInit()\n                  }\n                }\n                if(!item.resized) {\n                  item.pauseMove(self.containerPos, false)\n                  item.startMove(self.containerPos)\n                  item.resized = true\n                }\n              }\n              self.channels[num].queue[key].splice(index, 1)\n            })\n          }\n        })\n      }\n      // for (let i = channels.length; i < self.channels.length; i++) {\n      //   ['scroll', 'top', 'bottom'].forEach(key => {\n      //     self.channels[i].queue[key].forEach(item => {\n      //       item.pauseMove(self.containerPos)\n      //       item.remove()\n      //     })\n      //   })\n      // }\n      for (let i = 0; i < channels.length; i++) {\n        ['scroll', 'top', 'bottom'].forEach(key => {\n          channels[i].queue[key].forEach(item => {\n            // console.log('resized :' + item)\n            item.resized = false\n          })\n        })\n      }\n      self.channels = channels\n      if(self.direction === 'b2t') {\n        self.channelWidth = fontSize\n      } else {\n        self.channelHeight = fontSize\n      }\n    }\n  }\n  reset () {\n    let container = this.danmu.container\n    let self = this\n    if (self.channels && self.channels.length > 0) {\n      ['scroll', 'top', 'bottom'].forEach(key => {\n        for (let i = 0; i < self.channels.length; i++) {\n          self.channels[i].queue[key].forEach(item => {\n            item.pauseMove(self.containerPos)\n            item.remove()\n          })\n        }\n      })\n    }\n    setTimeout(function () {\n      let size = container.getBoundingClientRect()\n      self.width = size.width\n      self.height = size.height\n      if (self.danmu.config.area && self.danmu.config.area.start >= 0 && self.danmu.config.area.end >= self.danmu.config.area.start) {\n        if(self.direction === 'b2t') {\n          self.width = self.width * (self.danmu.config.area.end - self.danmu.config.area.start)\n        } else {\n          self.height = self.height * (self.danmu.config.area.end - self.danmu.config.area.start)\n        }\n      }\n      self.container = container\n      let fontSize = /mobile/ig.test(navigator.userAgent) ? 10 : 12\n      let channelSize\n      if(self.direction === 'b2t') {\n        channelSize = Math.floor(self.width / fontSize)\n      } else {\n        channelSize = Math.floor(self.height / fontSize)\n      }\n\n      let channels = []\n      for (let i = 0; i < channelSize; i++) {\n        channels[i] = {\n          id: i,\n          queue: {\n            scroll: [],\n            top: [],\n            bottom: []\n          },\n          operating: {\n            scroll: false,\n            top: false,\n            bottom: false\n          },\n          bookId: {}\n        }\n      }\n      self.channels = channels\n      if(self.direction === 'b2t') {\n        self.channelWidth = fontSize\n      } else {\n        self.channelHeight = fontSize\n      }\n    }, 200)\n  }\n  resetWithCb (cb, main) {\n    let container = this.danmu.container\n    let self = this\n    if (self.channels && self.channels.length > 0) {\n      ['scroll', 'top', 'bottom'].forEach(key => {\n        for (let i = 0; i < self.channels.length; i++) {\n          self.channels[i].queue[key].forEach(item => {\n            item.pauseMove(self.containerPos)\n            item.remove()\n          })\n        }\n      })\n    }\n    let size = container.getBoundingClientRect()\n    self.width = size.width\n    self.height = size.height\n    if (self.danmu.config.area && self.danmu.config.area.start >= 0 && self.danmu.config.area.end >= self.danmu.config.area.start) {\n      if(self.direction === 'b2t') {\n        self.width = self.width * (self.danmu.config.area.end - self.danmu.config.area.start)\n      } else {\n        self.height = self.height * (self.danmu.config.area.end - self.danmu.config.area.start)\n      }\n    }\n    self.container = container\n    let fontSize = /mobile/ig.test(navigator.userAgent) ? 10 : 12\n    let channelSize\n    if(self.direction === 'b2t') {\n      channelSize = Math.floor(self.width / fontSize)\n    } else {\n      channelSize = Math.floor(self.height / fontSize)\n    }\n    let channels = []\n    for (let i = 0; i < channelSize; i++) {\n      channels[i] = {\n        id: i,\n        queue: {\n          scroll: [],\n          top: [],\n          bottom: []\n        },\n        operating: {\n          scroll: false,\n          top: false,\n          bottom: false\n        },\n        bookId: {}\n      }\n    }\n    self.channels = channels\n    self.channelHeight = fontSize\n    if (cb) {\n      cb(true, main)\n    }\n  }\n}\n\nexport default Channel\n","import util from './utils/util'\n// import RecyclableDomList from './domrecycle.js'\n// let domObj = new RecyclableDomList()\n\n/**\n * [Bullet ]\n * @type {Class}\n */\nclass Bullet {\n  constructor (danmu, options) {\n    this.danmu = danmu\n    this.duration = options.duration\n    this.id = options.id\n    this.container = danmu.container\n    this.start = options.start\n    this.prior = options.prior\n    this.color = options.color\n    this.bookChannelId = options.bookChannelId\n    this.direction = danmu.direction\n    let self = this\n    this.danmu.on('changeDirection', direction => {\n      self.direction = direction\n    })\n    let el\n    this.domObj = util.domObj\n    if(options.el && options.el.nodeType === 1) {\n      el = this.domObj.use()\n      el.appendChild(util.copyDom(options.el))\n      // el = util.copyDom(options.el)\n    } else {\n      el = this.domObj.use()\n      // el = document.createElement('div')\n      el.textContent = options.txt\n      if(options.style) {\n        let style = options.style\n        Object.keys(style).forEach(function (key) {\n          el.style[key] = style[key]\n        })\n      }\n    }\n\n    if(options.mode === 'top' || options.mode === 'bottom') {\n      this.mode = options.mode\n    } else {\n      this.mode = 'scroll'\n    }\n    this.el = el\n    this.status = 'waiting'// waiting,start,end\n    let containerPos = this.container.getBoundingClientRect()\n    this.el.style.left = `${containerPos.width}px`\n  }\n  attach () {\n    this.container.appendChild(this.el)\n    this.elPos = this.el.getBoundingClientRect()\n    if(this.direction === 'b2t') {\n      this.width = this.elPos.height\n      this.height = this.elPos.width\n    } else {\n      this.width = this.elPos.width\n      this.height = this.elPos.height\n    }\n  }\n  detach () {\n    if(this.container && this.el) {\n      this.domObj.unuse(this.el)\n      this.container.removeChild(this.el)\n    }\n    let self = this\n    this.danmu.off('changeDirection', direction => {\n      self.direction = direction\n    })\n    this.el = null\n  }\n  topInit () {\n    if(this.direction === 'b2t') {\n      let containerPos = this.container.getBoundingClientRect()\n      this.el.style.transformOrigin = 'left top'\n      this.el.style.transform = `translateX(-${this.top}px) translateY(${containerPos.height}px) translateZ(0px) rotate(90deg)`;\n      this.el.style.transition = `transform 0s linear 0s`\n    } else {\n      this.el.style.top = `${this.top}px`\n    }\n  }\n  pauseMove (containerPos, isFullscreen = false) {\n    // console.log('pauseMove')\n    let self = this\n    if(this.status === 'paused') {\n      return\n    }\n    this.status = 'paused'\n    clearTimeout(self.removeTimer)\n    if (!this.el) {\n      return\n    }\n    this.el.style.willChange = 'auto'\n    if(this.mode === 'scroll') {\n      if(isFullscreen) {\n        let pastDuration = (new Date().getTime() - self.moveTime) / 1000\n        let pastS = pastDuration * this.moveV\n        let ratio = 0\n        let nowS = 0\n        // console.log('self.moveMoreS: ' + self.moveMoreS)\n        // console.log('pastS: ' + pastS)\n        if(self.moveMoreS - pastS >= 0) {\n          if(this.direction === 'b2t') {\n            ratio = (self.moveMoreS - pastS) / self.moveContainerHeight\n            nowS = ratio * containerPos.height\n          } else {\n            ratio = (self.moveMoreS - pastS) / self.moveContainerWidth\n            nowS = ratio * containerPos.width\n          }\n        } else {\n          nowS = self.moveMoreS - pastS\n        }\n        // console.log('nowS: ' + nowS)\n        if(this.direction === 'b2t') {\n          this.el.style.transform = `translateX(-${this.top}px) translateY(${nowS}px) translateZ(0px) rotate(90deg)`\n        } else {\n          this.el.style.left = `${nowS}px`\n        }\n      } else {\n        if(this.direction === 'b2t') {\n          this.el.style.transform = `translateX(-${this.top}px) translateY(${this.el.getBoundingClientRect().top - containerPos.top}px) translateZ(0px) rotate(90deg)`\n        } else {\n          this.el.style.left = `${this.el.getBoundingClientRect().left - containerPos.left}px`\n        }\n      }\n      if(this.direction === 'b2t') {\n        // this.el.style.transform = `translateX(-${this.top}px) translateY(${nowS}px) translateZ(0px) rotate(90deg)`\n        this.el.style.transition = 'transform 0s linear 0s'\n      } else {\n        this.el.style.transform = 'translateX(0px) translateY(0px) translateZ(0px)'\n        this.el.style.transition = 'transform 0s linear 0s'\n      }\n    } else {\n      if(!this.pastDuration || !this.startTime) {\n        this.pastDuration = 1\n      } else {\n        this.pastDuration = this.pastDuration + new Date().getTime() - this.startTime\n      }\n    }\n  }\n  startMove (containerPos) {\n    // console.log('startMove')\n    let self = this\n    if (!this.el) {\n      return\n    }\n    if(this.status === 'start') {\n      return\n    }\n    this.status = 'start'\n    this.el.style.willChange = 'transform'\n    function func () {\n      if (self.el) {\n        if(self.mode === 'scroll') {\n          let containerPos_ = self.danmu.container.getBoundingClientRect()\n          let bulletPos = self.el.getBoundingClientRect()\n          if(self.direction === 'b2t') {\n            if (bulletPos && bulletPos.bottom <= containerPos_.top + 100) {\n              self.status = 'end'\n              self.remove()\n            } else {\n              self.pauseMove(containerPos_)\n              self.startMove(containerPos_)\n            }\n          } else {\n            if (bulletPos && bulletPos.right <= containerPos_.left + 100) {\n              self.status = 'end'\n              self.remove()\n            } else {\n              self.pauseMove(containerPos_)\n              self.startMove(containerPos_)\n            }\n          }\n        } else {\n          self.status = 'end'\n          self.remove()\n        }\n      }\n    }\n    if(this.mode === 'scroll') {\n      if(this.direction === 'b2t') {\n        this.moveV = (containerPos.height + this.height) / this.duration * 1000\n        let leftDuration = (self.el.getBoundingClientRect().bottom - containerPos.top) / this.moveV\n        this.el.style.transition = `transform ${leftDuration}s linear 0s`\n        setTimeout(function () {\n          if (self.el) {\n            self.el.style.transform = `translateX(-${self.top}px) translateY(-${self.height}px) translateZ(0px) rotate(90deg)`\n            self.moveTime = new Date().getTime()\n            self.moveMoreS = self.el.getBoundingClientRect().top - containerPos.top\n            self.moveContainerHeight = containerPos.height\n            self.removeTimer = setTimeout(func, leftDuration * 1000)\n          }\n        }, 20)\n      } else {\n        this.moveV = (containerPos.width + this.width) / this.duration * 1000\n        let leftDuration = (self.el.getBoundingClientRect().right - containerPos.left) / this.moveV\n        this.el.style.transition = `transform ${leftDuration}s linear 0s`\n        setTimeout(function () {\n          if (self.el) {\n            self.el.style.transform = `translateX(-${self.el.getBoundingClientRect().right - containerPos.left}px) translateY(0px) translateZ(0px)`\n            self.moveTime = new Date().getTime()\n            self.moveMoreS = self.el.getBoundingClientRect().left - containerPos.left\n            self.moveContainerWidth = containerPos.width\n            self.removeTimer = setTimeout(func, leftDuration * 1000)\n          }\n        }, 20)\n      }\n    } else {\n      // this.el.style.width = `${this.width}px`\n      // this.el.style.height = `${this.height}px`\n      this.el.style.left = '50%'\n      this.el.style.margin = `0 0 0 -${this.width/2}px`\n      if(!this.pastDuration) {\n        this.pastDuration = 1\n      }\n      let leftDuration = this.duration >= this.pastDuration ? this.duration - this.pastDuration : 0\n      this.removeTimer = setTimeout(func, leftDuration)\n      this.startTime = new Date().getTime()\n    }\n  }\n  remove () {\n    // console.log('remove')\n    let self = this\n    if (this.removeTimer) {\n      clearTimeout(this.removeTimer)\n    }\n    if (self.el && self.el.parentNode) {\n      self.el.style.willChange = 'auto'\n      this.danmu.off('changeDirection', direction => {\n        self.direction = direction\n      })\n      this.domObj.unuse(self.el)\n      let parent = self.el.parentNode\n      parent.removeChild(self.el)\n      self.el = null\n      self.danmu.emit('bullet_remove', {\n        bullet: self\n      })\n    }\n  }\n}\n\nexport default Bullet\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js??ref--5-1!../../node_modules/postcss-loader/lib/index.js!../../node_modules/sass-loader/lib/loader.js!./index.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js??ref--5-1!../../node_modules/postcss-loader/lib/index.js!../../node_modules/sass-loader/lib/loader.js!./index.scss\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js??ref--5-1!../../node_modules/postcss-loader/lib/index.js!../../node_modules/sass-loader/lib/loader.js!./index.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".danmu{overflow:hidden;-webkit-user-select:none;-moz-user-select:none;user-select:none;-ms-user-select:none}.danmu>*{position:absolute;white-space:nowrap}.danmu-switch{width:32px;height:20px;border-radius:100px;background-color:#ccc;-webkit-box-sizing:border-box;box-sizing:border-box;outline:none;cursor:pointer;position:relative;text-align:center;margin:10px auto}.danmu-switch.danmu-switch-active{padding-left:12px;background-color:#f85959}.danmu-switch span.txt{width:20px;height:20px;line-height:20px;text-align:center;display:block;border-radius:100px;background-color:#ffffff;-webkit-box-shadow:-2px 0 0 0 rgba(0, 0, 0, .04);box-shadow:-2px 0 0 0 rgba(0, 0, 0, .04);font-family:PingFangSC;font-size:10px;font-weight:500;color:#f44336}\\n\", \"\"]);\n\n// exports\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target) {\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n"],"sourceRoot":""}