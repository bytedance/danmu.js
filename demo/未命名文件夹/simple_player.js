window.Player=function(n){var i={};function __webpack_require__(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,__webpack_require__),t.l=!0,t.exports}return __webpack_require__.m=n,__webpack_require__.c=i,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(t,e){if(1&e&&(t=__webpack_require__(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)__webpack_require__.d(n,i,function(e){return t[e]}.bind(null,i));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=74)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),r=_interopRequireDefault(n(8)),c=_interopRequireDefault(n(3)),o=_interopRequireDefault(n(28)),a=_interopRequireDefault(n(6)),s=_interopRequireDefault(n(4)),d=_interopRequireDefault(n(29)),l=n(5);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(){function Player(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Player);var i=_possibleConstructorReturn(this,(Player.__proto__||Object.getPrototypeOf(Player)).call(this,e));if(i.config=c.default.deepCopy({width:600,height:337.5,ignores:[],whitelist:[],lang:(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase(),inactive:3e3,volume:.6,controls:!0,controlsList:["nodownload"]},e),i.version=l.version,i.userTimer=null,i.waitTimer=null,i.database=new o.default,i.history=[],i.isProgressMoving=!1,i.root=c.default.findDom(document,"#"+i.config.id),i.controls=c.default.createDom("xg-controls","",{unselectable:"on",onselectstart:"return false"},"xgplayer-controls"),!i.root){var t=i.config.el;if(!t||1!==t.nodeType)return i.emit("error",new s.default("use",i.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),_possibleConstructorReturn(i,!1);i.root=t}if(c.default.addClass(i.root,"xgplayer xgplayer-"+a.default.device+" xgplayer-nostart "+(i.config.controls?"":"no-controls")),i.root.appendChild(i.controls),i.config.fluid?(i.root.style["max-width"]="100%",i.root.style.width="100%",i.root.style.height="0",i.root.style["padding-top"]=100*i.config.height/i.config.width+"%",i.video.style.position="absolute",i.video.style.top="0",i.video.style.left="0"):(i.root.style.width=i.config.width+"px",i.root.style.height=i.config.height+"px"),i.config.execBeforePluginsCall&&i.config.execBeforePluginsCall.forEach(function(e){e.call(i,i)}),i.config.controlStyle&&"String"===c.default.typeOf(i.config.controlStyle)){var n=i;window.fetch&&window.fetch(n.config.controlStyle,{method:"GET",headers:{Accept:"application/json"}}).then(function(e){e.ok&&e.json().then(function(e){for(var t in e)e.hasOwnProperty(t)&&(n.config[t]=e[t]);n.pluginsCall()})}).catch(function(e){console.log("Fetch错误:"+e)})}else i.pluginsCall();i.ev.forEach(function(e){var t=Object.keys(e)[0],n=i[e[t]];n&&i.on(t,n)}),["focus","blur"].forEach(function(e){i.on(e,i["on"+e.charAt(0).toUpperCase()+e.slice(1)])});var r=i;return i.mousemoveFunc=function(){r.emit("focus"),r.config.closeFocusVideoFocus||r.video.focus()},i.root.addEventListener("mousemove",i.mousemoveFunc),i.playFunc=function(){r.emit("focus"),r.config.closePlayVideoFocus||r.video.focus()},r.once("play",i.playFunc),setTimeout(function(){i.emit("ready")},0),i.config.keyShortcut&&"on"!==i.config.keyShortcut||(r.onBodyKeydown=r.onBodyKeydown.bind(i),r.onKeydown=r.onKeydown.bind(i),document.addEventListener("keydown",r.onBodyKeydown),r.root.addEventListener("keydown",r.onKeydown)),i.config.videoInit&&c.default.hasClass(i.root,"xgplayer-nostart")&&i.start(),r.once("destroy",function onDestroy(){r.root.removeEventListener("mousemove",r.mousemoveFunc),r.off("destroy",onDestroy)}),i}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Player,r.default),i(Player,[{key:"start",value:function start(e){var t=this,n=0<arguments.length&&void 0!==e?e:this.config.url,i=this.root,r=this;n&&""!==n||this.emit("urlNull"),this.logParams.playSrc=n,this.canPlayFunc=function(){var e=r.video.play();void 0!==e&&e&&e.then(function(){c.default.removeClass(r.root,"xgplayer-nostart"),r.emit("autoplay started")}).catch(function(){r.emit("autoplay was prevented"),Player.util.addClass(r.root,"xgplayer-is-autoplay")}),r.off("canplay",r.canPlayFunc)},"String"===c.default.typeOf(n)?this.video.src=n:n.forEach(function(e){t.video.appendChild(c.default.createDom("source","",{src:""+e.src,type:""+(e.type||"")}))}),this.logParams.pt=(new Date).getTime(),this.logParams.vt=this.logParams.pt,this.loadeddataFunc=function(){r.logParams.vt=(new Date).getTime(),r.logParams.pt>r.logParams.vt&&(r.logParams.pt=r.logParams.vt),r.logParams.vd=r.video.duration},this.once("loadeddata",this.loadeddataFunc),this.config.autoplay&&this.on("canplay",this.canPlayFunc),i.insertBefore(this.video,i.firstChild),setTimeout(function(){t.emit("complete")},1)}},{key:"reload",value:function reload(){this.video.load(),this.reloadFunc=function(){this.play().catch(function(e){})},this.once("loadeddata",this.reloadFunc)}},{key:"destroy",value:function destroy(e){var i=this,t=!(0<arguments.length&&void 0!==e)||e;for(var n in clearInterval(this.bulletResizeTimer),this._interval)clearInterval(this._interval[n]),this._interval[n]=null;function destroyFunc(){for(var e in this.emit("destroy"),this.video.removeAttribute("src"),this.video.load(),t&&(this.root.innerHTML="",this.root.className=""),this)delete this[e];this.off("pause",destroyFunc)}this.ev.forEach(function(e){var t=Object.keys(e)[0],n=i[e[t]];n&&i.off(t,n)}),this.loadeddataFunc&&this.off("loadeddata",this.loadeddataFunc),this.reloadFunc&&this.off("loadeddata",this.reloadFunc),this.replayFunc&&this.off("play",this.replayFunc),this.playFunc&&this.off("play",this.playFunc),["focus","blur"].forEach(function(e){i.off(e,i["on"+e.charAt(0).toUpperCase()+e.slice(1)])}),this.config.keyShortcut&&"on"!==this.config.keyShortcut||(document.removeEventListener("keydown",this.onBodyKeydown),this.root.removeEventListener("keydown",this.onKeydown)),clearTimeout(this.userTimer),clearTimeout(this.waitTimer),clearTimeout(this.sliderTimer),this.paused?destroyFunc.call(this):(this.pause(),this.once("pause",destroyFunc)),function get(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,n)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(n):void 0}(Player.prototype.__proto__||Object.getPrototypeOf(Player.prototype),"destroy",this).call(this)}},{key:"replay",value:function replay(){var e=this,t=this._replay;c.default.removeClass(this.root,"xgplayer-ended"),this.logParams={bc:0,bu_acu_t:0,played:[],pt:(new Date).getTime(),vt:(new Date).getTime(),vd:0},this.logParams.pt=(new Date).getTime(),this.logParams.vt=this.logParams.pt,this.replayFunc=function(){e.logParams.vt=(new Date).getTime(),e.logParams.pt>e.logParams.vt&&(e.logParams.pt=e.logParams.vt),e.logParams.vd=e.video.duration},this.once("play",this.replayFunc),this.logParams.playSrc=this.video.currentSrc,t&&t instanceof Function?t():(this.currentTime=0,this.play().catch(function(e){}))}},{key:"pluginsCall",value:function pluginsCall(){var n=this,i=this;if(Player.plugins){var r=this.config.ignores;Object.keys(Player.plugins).forEach(function(t){var e=Player.plugins[t];r.some(function(e){return t===e})||(["pc","tablet","mobile"].some(function(e){return e===t})?t===a.default.device&&setTimeout(function(){e.call(i,i)},0):e.call(n,n))})}}},{key:"getPIP",value:function getPIP(e,t){var n=0<arguments.length&&void 0!==e?e:320,i=1<arguments.length&&void 0!==t?t:180,r=this.root.getBoundingClientRect(),o=r.top,a=r.left,s=c.default.createDom("xg-pip-lay","<div></div>",{},"xgplayer-pip-lay");this.root.appendChild(s);var l=c.default.createDom("xg-pip-drag",'<div class="drag-handle"><span>点击按住可拖动视频</span></div>',{tabindex:9},"xgplayer-pip-drag");this.root.appendChild(l);new d.default(".xgplayer",{handle:".drag-handle"});c.default.addClass(this.root,"xgplayer-pip-active"),this.root.style.width=n+"px",this.root.style.height=i+"px",this.root.style.right=0,this.root.style.bottom="200px",this.root.style.top="",this.root.style.left="",this.config.fluid&&(this.root.style["padding-top"]="");var u=this;["click","touchstart"].forEach(function(e){s.addEventListener(e,function(e){e.preventDefault(),e.stopPropagation(),u.exitPIP(),u.root.style.top=o+"px",u.root.style.left=a+"px"})})}},{key:"exitPIP",value:function exitPIP(){c.default.removeClass(this.root,"xgplayer-pip-active"),this.root.style.right="",this.root.style.bottom="",this.root.style.top="",this.root.style.left="",this.config.fluid?(this.root.style.width="100%",this.root.style.height="0",this.root.style["padding-top"]=100*this.config.height/this.config.width+"%"):(this.config.width&&("number"!=typeof this.config.width?this.root.style.width=this.config.width:this.root.style.width=this.config.width+"px"),this.config.height&&("number"!=typeof this.config.height?this.root.style.height=this.config.height:this.root.style.height=this.config.height+"px"))}},{key:"clearWaitTimer",value:function clearWaitTimer(){this.waitTimer&&(window.clearTimeout(this.waitTimer),this.waitTimer=null)}},{key:"onFocus",value:function onFocus(){var e=this;c.default.removeClass(this.root,"xgplayer-inactive"),e.userTimer&&clearTimeout(e.userTimer),e.userTimer=setTimeout(function(){e.emit("blur")},e.config.inactive)}},{key:"onBlur",value:function onBlur(){this.paused||this.ended||c.default.addClass(this.root,"xgplayer-inactive")}},{key:"onPlay",value:function onPlay(){c.default.addClass(this.root,"xgplayer-playing"),c.default.removeClass(this.root,"xgplayer-pause")}},{key:"onPause",value:function onPause(){c.default.addClass(this.root,"xgplayer-pause"),this.userTimer&&clearTimeout(this.userTimer),this.emit("focus")}},{key:"onEnded",value:function onEnded(){c.default.addClass(this.root,"xgplayer-ended"),c.default.removeClass(this.root,"xgplayer-playing")}},{key:"onTimeupdate",value:function onTimeupdate(){(this.isLoading||this.waitTimer&&!this.isSeeking)&&this.checkBuffer()&&(this.clearWaitTimer(),c.default.removeClass(this.root,"xgplayer-isloading"),this.isLoading=!1),!this._hasStart&&this.paused?c.default.removeClass(this.root,"xgplayer-is-enter xgplayer-start-appear"):c.default.removeClass(this.root,"xgplayer-is-enter xgplayer-nostart xgplayer-start-appear")}},{key:"onSeeking",value:function onSeeking(){this.isSeeking=!0,this.onWaiting()}},{key:"onSeeked",value:function onSeeked(){this.isSeeking=!1,this.isLoading=!1,this.waitTimer&&this.clearWaitTimer(),c.default.removeClass(this.root,"xgplayer-isloading")}},{key:"onWaiting",value:function onWaiting(){if(this._hasStart||!this.paused){var e=this;e.waitTimer&&(this.clearWaitTimer(),this.isLoading=!1),e.waitTimer=setTimeout(function(){c.default.addClass(e.root,"xgplayer-isloading"),e.isLoading=!0,e.clearWaitTimer()},800)}}},{key:"onPlaying",value:function onPlaying(){this.isSeeking=!1,this.isLoading=!1,this.waitTimer&&this.clearWaitTimer(),c.default.removeClass(this.root,"xgplayer-isloading xgplayer-pause xgplayer-ended xgplayer-is-error xgplayer-replay"),c.default.addClass(this.root,"xgplayer-playing")}},{key:"checkBuffer",value:function checkBuffer(){var e=this.video.buffered,t=this.currentTime,n=e.length;return 0<n&&e.start([n-1])<=t&&e.end([n-1])>t?(console.log("checkBuffer true"),!0):(console.log("checkBuffer false"),!1)}},{key:"onBodyKeydown",value:function onBodyKeydown(e){var t=e||window.event,n=t.keyCode;return t.target!==document.body||38!==n&&40!==n&&32!==n&&39!==n||(t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1,this.onKeydown(t,this)),!1}},{key:"onKeydown",value:function onKeydown(e){var t=this,n=e||window.event;if(!n||37!==n.keyCode&&38!==n.keyCode&&39!==n.keyCode&&40!==n.keyCode&&32!==n.keyCode||t.emit("focus"),!n||40!==n.keyCode&&38!==n.keyCode)n&&39===n.keyCode?t.currentTime+10<=t.duration?t.currentTime+=10:t.currentTime=t.duration-1:n&&37===n.keyCode?0<=t.currentTime-10?t.currentTime-=10:t.currentTime=0:n&&32===n.keyCode&&(t.paused?t.play().catch(function(e){}):t.pause());else{if(t.controls){var i=t.controls.querySelector(".xgplayer-slider");i&&(c.default.hasClass(i,"xgplayer-none")&&c.default.removeClass(i,"xgplayer-none"),t.sliderTimer&&clearTimeout(t.sliderTimer),t.sliderTimer=setTimeout(function(){c.default.addClass(i,"xgplayer-none")},t.config.inactive))}n&&40===n.keyCode?0<=t.volume-.1?t.volume=parseFloat((t.volume-.1).toFixed(1)):t.volume=0:n&&38===n.keyCode&&(t.volume+.1<=1?t.volume=parseFloat((t.volume+.1).toFixed(1)):t.volume=1)}}}],[{key:"install",value:function install(e,t){Player.plugins||(Player.plugins={}),Player.plugins[e]=t}}]),Player}();u.util=c.default,u.sniffer=a.default,u.Errors=s.default,t.default=u,e.exports=t.default},function(e,t,n){"use strict";var i=n(21)();e.exports=function(e){return e!==i&&null!==e}},function(e,t,n){"use strict";e.exports=function(e){return null!=e}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var util={createDom:function(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",o=document.createElement(i);return o.className=t,o.innerHTML=e,Object.keys(r).forEach(function(e){var t=e,n=r[e];("video"!==i&&"audio"!==i||n)&&o.setAttribute(t,n)}),o},hasClass:function(e,t){return e.classList?Array.prototype.some.call(e.classList,function(e){return e===t}):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass:function(t,e){t.classList?e.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(e){e&&t.classList.add(e)}):util.hasClass(t,e)||(t.className+=" "+e)},removeClass:function(n,e){n.classList?e.split(/\s+/g).forEach(function(e){n.classList.remove(e)}):util.hasClass(n,e)&&e.split(/\s+/g).forEach(function(e){var t=new RegExp("(\\s|^)"+e+"(\\s|$)");n.className=n.className.replace(t," ")})},toggleClass:function(t,e){e.split(/\s+/g).forEach(function(e){util.hasClass(t,e)?util.removeClass(t,e):util.addClass(t,e)})},findDom:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document,n=arguments[1],i=void 0;try{i=t.querySelector(n)}catch(e){n.startsWith("#")&&(i=t.getElementById(n.slice(1)))}return i},padStart:function(e,t,n){for(var i=String(n),r=t>>0,o=Math.ceil(r/i.length),a=[],s=String(e);o--;)a.push(i);return a.join("").substring(0,r-s.length)+s},format:function(e){if(window.isNaN(e))return"";var t=util.padStart(Math.floor(e/3600),2,0),n=util.padStart(Math.floor((e-3600*t)/60),2,0),i=util.padStart(Math.floor(e-3600*t-60*n),2,0);return("00"===t?[n,i]:[t,n,i]).join(":")},event:function(e){if(e.touches){var t=e.touches[0]||e.changedTouches[0];e.clientX=t.clientX||0,e.clientY=t.clientY||0,e.offsetX=t.pageX-t.target.offsetLeft,e.offsetY=t.pageY-t.target.offsetTop}e._target=e.target||e.srcElement},typeOf:function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]},deepCopy:function(t,n){if("Object"===util.typeOf(n)&&"Object"===util.typeOf(t))return Object.keys(n).forEach(function(e){"Object"!==util.typeOf(n[e])||n[e]instanceof Node?"Array"===util.typeOf(n[e])?t[e]="Array"===util.typeOf(t[e])?t[e].concat(n[e]):n[e]:t[e]=n[e]:t[e]?util.deepCopy(t[e],n[e]):t[e]=n[e]}),t},getBgImage:function(e){var t=(e.currentStyle||window.getComputedStyle(e,null)).backgroundImage;if(!t||"none"===t)return"";var n=document.createElement("a");return n.href=t.replace(/url\("|"\)/g,""),n.href},copyDom:function(e){if(e&&1===e.nodeType){var t=document.createElement(e.tagName);return Array.prototype.forEach.call(e.attributes,function(e){t.setAttribute(e.name,e.value)}),e.innerHTML&&(t.innerHTML=e.innerHTML),t}return""},setInterval:function(e,t,n,i){e._interval[t]||(e._interval[t]=setInterval(n.bind(e),i))},clearInterval:function(e,t){clearInterval(e._interval[t]),e._interval[t]=null},createImgBtn:function(e,t,n,i){var r=util.createDom("xg-"+e,"",{},"xgplayer-"+e+"-img");if(r.style.backgroundImage='url("'+t+'")',n&&i){var o=void 0,a=void 0,s=void 0;["px","rem","em","pt","dp","vw","vh","vm","%"].every(function(e){return!(-1<n.indexOf(e)&&-1<i.indexOf(e))||(o=parseFloat(n.slice(0,n.indexOf(e)).trim()),a=parseFloat(i.slice(0,i.indexOf(e)).trim()),s=e,!1)}),r.style.width=""+o+s,r.style.height=""+a+s,r.style.backgroundSize=""+o+s+" "+a+s,r.style.margin="start"===e?"-"+a/2+s+" auto auto -"+o/2+s:"auto 5px auto 5px"}return r},Hex2RGBA:function(hex,alpha){var rgb=[];if(/^\#[0-9A-F]{3}$/i.test(hex)){var sixHex="#";hex.replace(/[0-9A-F]/gi,function(e){sixHex+=e+e}),hex=sixHex}return/^#[0-9A-F]{6}$/i.test(hex)?(hex.replace(/[0-9A-F]{2}/gi,function(kw){rgb.push(eval("0x"+kw))}),"rgba("+rgb.join(",")+", "+alpha+")"):"rgba(255, 255, 255, 0.1)"}};exports.default=util,module.exports=exports.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),c=n(5);var d={network:{code:1,msg:"视频下载错误",remark:"只要视频下载错误就使用此类型，无论是video本身的超时还是xhr的分段请求超时或者资源不存在"},mse:{code:2,msg:"流追加错误",remark:"追加流的时候如果类型不对、无法被正确解码则会触发此类错误"},parse:{code:3,msg:"解析错误",remark:"mp4、hls、flv我们都是使用js进行格式解析，如果解析失败则会触发此类错误"},format:{code:4,msg:"格式错误",remark:"如果浏览器不支持的格式导致播放错误"},decoder:{code:5,msg:"解码错误",remark:"浏览器解码异常会抛出此类型错误"},runtime:{code:6,msg:"语法错误",remark:"播放器语法错误"},timeout:{code:7,msg:"播放超时",remark:"播放过程中无法正常请求下一个分段导致播放中断"},other:{code:8,msg:"其他错误",remark:"不可知的错误或被忽略的错误类型"}},r=function(){function Errors(e,t,n,i,r,o,a,s){var l=8<arguments.length&&void 0!==arguments[8]?arguments[8]:{line:"",handle:"",msg:"",version:""};!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Errors);var u={};return 3<=arguments.length&&arguments.length<5?(u.playerVersion=c.version,u.errorType=e,u.code=t,u.errd=n||{},u.ex=(u.errd||{}).msg,u.domain=document.domain):(u.playerVersion=c.version,u.errorType=e,u.domain=document.domain,u.duration=n,u.currentTime=t,u.networkState=i,u.readyState=r,u.currentSrc=a,u.src=o,u.ended=s,u.errd=l||{},u.ex=(d[e]||{}).msg,u.code=u.errd.code),u}return i(Errors,null,[{key:"ErrorTypes",get:function get(){return d}}]),Errors}();t.default=r,e.exports=t.default},function(e){e.exports=JSON.parse('{"name":"xgplayer","version":"1.2.21-beta","description":"video player","main":"./dist/index.js","scripts":{"build":"webpack --progress --display-chunks -p","prepare":"npm run build","test":"karma start --single-run","test:watch":"karma start","analyze":"webpack --analyze --progress --display-chunks -p","watch":"webpack --progress --display-chunks -p --watch --mode development"},"keywords":["video","player"],"babel":{"presets":["es2015"],"plugins":["add-module-exports","babel-plugin-bulk-import"]},"browserslist":["> 5%","IE 9","iOS 7","Firefox > 20"],"repository":{"type":"git","url":"git+https://github.com/bytedance/xgplayer.git"},"author":"yinguohui@bytedance.com","license":"MIT","dependencies":{"danmu.js":"^0.2.7-beta.6","deepmerge":"^1.5.0","downloadjs":"1.4.7","draggabilly":"^2.2.0","event-emitter":"^0.3.5","pasition":"^1.0.1","request-frame":"^1.5.3","standard":"^14.3.1"},"devDependencies":{"autoprefixer":"^9.1.5","babel-core":"^6.26.3","babel-loader":"^7.1.4","babel-plugin-add-module-exports":"^0.2.1","babel-plugin-bulk-import":"^1.0.2","babel-plugin-transform-object-rest-spread":"^6.26.0","babel-plugin-transform-runtime":"^6.23.0","babel-preset-es2015":"^6.24.1","chai":"^4.1.2","core-js":"^2.5.4","css-loader":"^0.28.11","json-loader":"^0.5.7","karma":"^3.0.0","karma-chrome-launcher":"^2.2.0","karma-mocha":"^1.3.0","karma-sourcemap-loader":"^0.3.7","karma-spec-reporter":"0.0.32","karma-webpack":"^4.0.0-rc.1","mocha":"^5.2.0","node-sass":"^4.8.3","postcss-cssnext":"^3.1.0","postcss-loader":"^2.1.5","sass-loader":"^6.0.7","style-loader":"^0.20.3","sugarss":"^1.0.1","uglifyjs-webpack-plugin":"^2.2.0","webpack":"^4.11.0","webpack-bundle-analyzer":"^3.6.0","webpack-cli":"^3.0.2","zlib":"^1.0.5"}}')},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={get device(){return i.os.isPc?"pc":"mobile"},get browser(){var t=navigator.userAgent.toLowerCase(),n={ie:/rv:([\d.]+)\) like gecko/,firfox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(n).filter(function(e){return n[e].test(t)}))[0]},get os(){var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,i=/(?:Android)/.test(e),r=/(?:Firefox)/.test(e),o=/(?:iPad|PlayBook)/.test(e)||i&&!/(?:Mobile)/.test(e)||r&&/(?:Tablet)/.test(e),a=/(?:iPhone)/.test(e)&&!o;return{isTablet:o,isPhone:a,isAndroid:i,isPc:!(a||i||n||o),isSymbian:n,isWindowsPhone:t,isFireFox:r}}};t.default=i,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(34));n(35);var o=function(){function SVG(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SVG),this.from=e.from,this.to=e.to,this.easing=e.easing||function(e){return e*e},this.duration=e.duration||150,this.curPath="",this.progress=e.progress,this.state=0}return i(SVG,[{key:"animate",value:function animate(){var n=this,i=new Date,r=n.duration,o=null,e=n.path2shapes(n.from),a=n.path2shapes(n.to),s=n._preprocessing(e,a);n.state=1;!function tick(){var e=new Date-i;if(r<=e||2===n.state)return o=a,n.progress(o,1),window.cancelAnimationFrame(n.tickId),void(n.state=0);var t=n.easing(e/r);o=n._lerp(s[0],s[1],t),n.progress(o,t),n.tickId=window.requestAnimationFrame(tick)}()}},{key:"toSVGString",value:function toSVGString(e){return e.map(function(e){return e.forEach(function(e,t){t?e.splice(0,2,"C"):(e.splice(2,0,"C"),e.unshift("M"))}),e.map(function(e){return e.join(" ")}).join("")}).join("")}},{key:"start",value:function start(){this.animate()}},{key:"stop",value:function stop(){0!==this.state&&(this.state=2),window.cancelAnimationFrame(self.tickId),this.state=0}},{key:"reverse",value:function reverse(){0!==this.state&&this.stop();var e=this.from;this.from=this.to,this.to=e,this.animate()}},{key:"reset",value:function reset(e,t){var n=1<arguments.length&&void 0!==t?t:this.from;0!==this.state&&this.stop(),this.from=n,this.to=e,this.animate()}}]),SVG}();for(var a in r.default)r.default[a]instanceof Function&&!o.prototype[a]&&(o.prototype[a]=r.default[a]);t.default=o,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),l=_interopRequireDefault(n(9)),u=_interopRequireDefault(n(3)),r=_interopRequireDefault(n(4));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var o=navigator.userAgent,a=(-1<o.indexOf("Safari")&&o.indexOf("mac"),function(){function Proxy(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Proxy),this.logParams={bc:0,bu_acu_t:0,played:[]},this._hasStart=!1,this._seekingTimer=null,this.videoConfig={controls:!1,autoplay:e.autoplay,playsinline:e.playsinline,"webkit-playsinline":e.playsinline,"x5-playsinline":e.playsinline,"x5-video-player-type":e["x5-video-player-type"],"x5-video-player-fullscreen":e["x5-video-player-fullscreen"],"x5-video-orientation":e["x5-video-orientation"],airplay:e.airplay,"webkit-airplay":e.airplay,tabindex:2,mediaType:e.mediaType||"video"},e.loop&&(this.videoConfig.loop="loop");var t="";if(e.textTrack&&Array.isArray(e.textTrack)&&(-1<navigator.userAgent.indexOf("Chrome")||-1<navigator.userAgent.indexOf("Firefox"))&&(e.textTrack.some(function(e){if(e.src&&e.label&&e.default)return t+='<track src="'+e.src+'" ',e.kind&&(t+='kind="'+e.kind+'" '),t+='label="'+e.label+'" ',e.srclang&&(t+='srclang="'+e.srclang+'" '),t+=(e.default?"default":"")+">",!0}),this.videoConfig.crossorigin="anonymous"),e.textTrackStyle){var n=document.createElement("style");this.textTrackStyle=n,document.head.appendChild(n);var i="";for(var r in e.textTrackStyle)i+=r+": "+e.textTrackStyle[r]+";";var o=e.id?"#"+e.id:e.el.id?"#"+e.el.id:"."+e.el.className;n.sheet.insertRule?n.sheet.insertRule(o+" video::cue { "+i+" }",0):n.sheet.addRule&&n.sheet.addRule(o+" video::cue",i)}this.video=u.default.createDom(this.videoConfig.mediaType,t,this.videoConfig,""),e.autoplay&&(this.video.autoplay=!0,e.autoplayMuted&&(this.video.muted=!0)),this.ev=["play","playing","pause","ended","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","canplaythrough"].map(function(e){return function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,"on"+e.charAt(0).toUpperCase()+e.slice(1))}),(0,l.default)(this),this._interval={};var a="0,0",s=this;this.ev.forEach(function(e){s.evItem=Object.keys(e)[0];var t=Object.keys(e)[0];s.video.addEventListener(Object.keys(e)[0],function(){s.logParams&&("play"===t?s.hasStart=!0:"waiting"===t?(s.logParams.bc++,s.inWaitingStart=(new Date).getTime()):"playing"===t?s.inWaitingStart&&(s.logParams.bu_acu_t+=(new Date).getTime()-s.inWaitingStart,s.inWaitingStart=void 0):"loadeddata"===t?s.logParams.played.push({begin:0,end:-1}):"seeking"===t?s.logParams.played.push({begin:s.video.currentTime,end:-1}):s&&s.logParams&&s.logParams.played&&"timeupdate"===t&&(s.logParams.played.length<1&&s.logParams.played.push({begin:s.video.currentTime,end:-1}),s.logParams.played[s.logParams.played.length-1].end=s.video.currentTime),"error"===t?s._onError():s.emit(t,s),s.hasOwnProperty("_interval")&&(["ended","error","timeupdate"].indexOf(t)<0?(clearInterval(s._interval.bufferedChange),u.default.setInterval(s,"bufferedChange",function(){for(var e=[],t=0,n=s.video.buffered.length;t<n;t++)e.push([s.video.buffered.start(t),s.video.buffered.end(t)]);e.toString()!==a&&(a=e.toString(),s.emit("bufferedChange",e))},200)):"timeupdate"!==t&&u.default.clearInterval(s,"bufferedChange")))},!1)})}return i(Proxy,[{key:"_onError",value:function _onError(){var e=this;e.video.error&&e.emit("error",new r.default("other",e.currentTime,e.duration,e.networkState,e.readyState,e.currentSrc,e.src,e.ended,{line:41,msg:e.error,handle:"Constructor",code:e.errorCode}))}},{key:"destroy",value:function destroy(){this.textTrackStyle&&this.textTrackStyle.parentNode.removeChild(this.textTrackStyle)}},{key:"play",value:function play(){return this.video.play()}},{key:"pause",value:function pause(){this.video.pause()}},{key:"canPlayType",value:function canPlayType(){this.video.canPlayType()}},{key:"getBufferedRange",value:function getBufferedRange(){var e=[0,0],t=this.video,n=t.buffered,i=t.currentTime;if(n)for(var r=0,o=n.length;r<o&&(e[0]=n.start(r),e[1]=n.end(r),!(e[0]<=i&&i<=e[1]));r++);return e[0]-i<=0&&i-e[1]<=0?e:[0,0]}},{key:"hasStart",get:function get(){return this._hasStart},set:function set(e){"boolean"!=typeof e||!0!==e||this._hasStart||(this._hasStart=!0,this.emit("hasstart"))}},{key:"autoplay",set:function set(e){this.video.autoplay=e},get:function get(){return this.video.autoplay}},{key:"buffered",get:function get(){return this.video.buffered}},{key:"crossOrigin",get:function get(){return this.video.crossOrigin},set:function set(e){this.video.crossOrigin=e}},{key:"currentSrc",get:function get(){return this.video.currentSrc},set:function set(e){this.video.currentSrc=e}},{key:"currentTime",get:function get(){return this.video.currentTime},set:function set(e){this.video.currentTime=e}},{key:"defaultMuted",get:function get(){return this.video.defaultMuted},set:function set(e){this.video.defaultMuted=e}},{key:"duration",get:function get(){return this.video.duration}},{key:"ended",get:function get(){return this.video.ended}},{key:"error",get:function get(){var e=this.video.error;if(!e)return null;var t=[{en:"MEDIA_ERR_ABORTED",cn:"取回过程被用户中止"},{en:"MEDIA_ERR_NETWORK",cn:"当下载时发生错误"},{en:"MEDIA_ERR_DECODE",cn:"当解码时发生错误"},{en:"MEDIA_ERR_SRC_NOT_SUPPORTED",cn:"不支持音频/视频"}];return this.lang?this.lang[t[e.code-1].en]:t[e.code-1].en}},{key:"errorCode",get:function get(){return this.video.error.code}},{key:"loop",get:function get(){return this.video.loop},set:function set(e){this.video.loop=e}},{key:"muted",get:function get(){return this.video.muted},set:function set(e){this.video.muted=e}},{key:"networkState",get:function get(){var e=[{en:"NETWORK_EMPTY",cn:"音频/视频尚未初始化"},{en:"NETWORK_IDLE",cn:"音频/视频是活动的且已选取资源，但并未使用网络"},{en:"NETWORK_LOADING",cn:"浏览器正在下载数据"},{en:"NETWORK_NO_SOURCE",cn:"未找到音频/视频来源"}];return this.lang?this.lang[e[this.video.networkState].en]:e[this.video.networkState].en}},{key:"paused",get:function get(){return this.video.paused}},{key:"playbackRate",get:function get(){return this.video.playbackRate},set:function set(e){this.video.playbackRate=e}},{key:"played",get:function get(){return this.video.played}},{key:"preload",get:function get(){return this.video.preload},set:function set(e){this.video.preload=e}},{key:"readyState",get:function get(){var e=[{en:"HAVE_NOTHING",cn:"没有关于音频/视频是否就绪的信息"},{en:"HAVE_METADATA",cn:"关于音频/视频就绪的元数据"},{en:"HAVE_CURRENT_DATA",cn:"关于当前播放位置的数据是可用的，但没有足够的数据来播放下一帧/毫秒"},{en:"HAVE_FUTURE_DATA",cn:"当前及至少下一帧的数据是可用的"},{en:"HAVE_ENOUGH_DATA",cn:"可用数据足以开始播放"}];return this.lang?this.lang[e[this.video.readyState].en]:e[this.video.readyState]}},{key:"seekable",get:function get(){return this.video.seekable}},{key:"seeking",get:function get(){return this.video.seeking}},{key:"src",get:function get(){return this.video.src},set:function set(e){var t=this;u.default.hasClass(this.root,"xgplayer-ended")||this.emit("urlchange",JSON.parse(JSON.stringify(t.logParams))),this.logParams={bc:0,bu_acu_t:0,played:[],pt:(new Date).getTime(),vt:(new Date).getTime(),vd:0},this.video.pause(),this.video.src=e,this.logParams.playSrc=e,this.logParams.pt=(new Date).getTime(),this.logParams.vt=this.logParams.pt,this.once("loadeddata",function ldFunc(){t.logParams.vt=(new Date).getTime(),t.logParams.pt>t.logParams.vt&&(t.logParams.pt=t.logParams.vt),t.logParams.vd=t.video.duration,t.off("loadeddata",ldFunc)})}},{key:"volume",get:function get(){return this.video.volume},set:function set(e){this.video.volume=e}},{key:"fullscreen",get:function get(){return u.default.hasClass(this.root,"xgplayer-is-fullscreen")||u.default.hasClass(this.root,"xgplayer-fullscreen-active")}},{key:"bullet",get:function get(){return!!u.default.findDom(this.root,"xg-bullet")&&u.default.hasClass(u.default.findDom(this.root,"xg-bullet"),"xgplayer-has-bullet")}},{key:"textTrack",get:function get(){return u.default.hasClass(this.root,"xgplayer-is-textTrack")}},{key:"pip",get:function get(){return u.default.hasClass(this.root,"xgplayer-pip-active")}}]),Proxy}());t.default=a,e.exports=t.default},function(e,t,n){"use strict";var r,i,o,a,s,l,u,c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=n(10),f=n(27),p=Function.prototype.apply,h=Function.prototype.call,g=Object.create,y=Object.defineProperty,v=Object.defineProperties,m=Object.prototype.hasOwnProperty,b={configurable:!0,enumerable:!1,writable:!0};i=function once(e,t){var n,i;return f(t),r.call(i=this,e,n=function once(){o.call(i,e,n),p.call(t,this,arguments)}),n.__eeOnceListener__=t,this},s={on:r=function on(e,t){var n;return f(t),m.call(this,"__ee__")?n=this.__ee__:(n=b.value=g(null),y(this,"__ee__",b),b.value=null),n[e]?"object"===c(n[e])?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},once:i,off:o=function off(e,t){var n,i,r,o;if(f(t),!m.call(this,"__ee__"))return this;if(!(n=this.__ee__)[e])return this;if("object"===(void 0===(i=n[e])?"undefined":c(i)))for(o=0;r=i[o];++o)r!==t&&r.__eeOnceListener__!==t||(2===i.length?n[e]=i[o?0:1]:i.splice(o,1));else i!==t&&i.__eeOnceListener__!==t||delete n[e];return this},emit:a=function emit(e,t,n){var i,r,o,a,s;if(m.call(this,"__ee__")&&(a=this.__ee__[e]))if("object"===(void 0===a?"undefined":c(a))){for(r=arguments.length,s=new Array(r-1),i=1;i<r;++i)s[i-1]=arguments[i];for(a=a.slice(),i=0;o=a[i];++i)p.call(o,this,s)}else switch(arguments.length){case 1:h.call(a,this);break;case 2:h.call(a,this,t);break;case 3:h.call(a,this,t,n);break;default:for(r=arguments.length,s=new Array(r-1),i=1;i<r;++i)s[i-1]=arguments[i];p.call(a,this,s)}}},l={on:d(r),once:d(i),off:d(o),emit:d(a)},u=v({},l),e.exports=t=function exports(e){return null==e?g(u):v(Object(e),l)},t.methods=s},function(e,t,n){"use strict";var s=n(2),l=n(11),u=n(15),c=n(23),d=n(24);(e.exports=function(e,t){var n,i,r,o,a;return arguments.length<2||"string"!=typeof e?(o=t,t=e,e=null):o=arguments[2],s(e)?(n=d.call(e,"c"),i=d.call(e,"e"),r=d.call(e,"w")):(n=r=!0,i=!1),a={value:t,configurable:n,enumerable:i,writable:r},o?u(c(o),a):a}).gs=function(e,t,n){var i,r,o,a;return"string"!=typeof e?(o=n,n=t,t=e,e=null):o=arguments[3],s(t)?l(t)?s(n)?l(n)||(o=n,n=void 0):n=void 0:(o=t,t=n=void 0):t=void 0,r=s(e)?(i=d.call(e,"c"),d.call(e,"e")):!(i=!0),a={get:t,set:n,configurable:i,enumerable:r},o?u(c(o),a):a}},function(e,t,n){"use strict";var i=n(12),r=/^\s*class[\s{/}]/,o=Function.prototype.toString;e.exports=function(e){return!!i(e)&&!r.test(o.call(e))}},function(e,t,n){"use strict";var i=n(13);e.exports=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!i(e)}},function(e,t,n){"use strict";var i=n(14);e.exports=function(e){if(!i(e))return!1;try{return e.constructor?e.constructor.prototype===e:!1}catch(e){return!1}}},function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(2),o={object:!0,function:!0,undefined:!0};e.exports=function(e){return!!r(e)&&hasOwnProperty.call(o,void 0===e?"undefined":i(e))}},function(e,t,n){"use strict";e.exports=n(16)()?Object.assign:n(17)},function(e,t,n){"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,n){"use strict";var a=n(18),s=n(22),l=Math.max;e.exports=function(t,n){var i,e,r,o=l(arguments.length,2);for(t=Object(s(t)),r=function assign(e){try{t[e]=n[e]}catch(e){i=i||e}},e=1;e<o;++e)a(n=arguments[e]).forEach(r);if(void 0!==i)throw i;return t}},function(e,t,n){"use strict";e.exports=n(19)()?Object.keys:n(20)},function(e,t,n){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,n){"use strict";var i=n(1),r=Object.keys;e.exports=function(e){return r(i(e)?Object(e):e)}},function(e,t,n){"use strict";e.exports=function(){}},function(e,t,n){"use strict";var i=n(1);e.exports=function(e){if(!i(e))throw new TypeError("Cannot use null or undefined");return e}},function(e,t,n){"use strict";var i=n(1),r=Array.prototype.forEach,o=Object.create;e.exports=function(e){var t=o(null);return r.call(arguments,function(e){i(e)&&function process(e,t){var n;for(n in e)t[n]=e[n]}(Object(e),t)}),t}},function(e,t,n){"use strict";e.exports=n(25)()?String.prototype.contains:n(26)},function(e,t,n){"use strict";var i="razdwatrzy";e.exports=function(){return"function"==typeof i.contains&&(!0===i.contains("dwa")&&!1===i.contains("foo"))}},function(e,t,n){"use strict";var i=String.prototype.indexOf;e.exports=function(e){return-1<i.call(this,e,arguments[1])}},function(e,t,n){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var r=function(){function INDEXDB(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,INDEXDB),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=e}return i(INDEXDB,[{key:"openDB",value:function openDB(t){var n=this,i=this,e=this.myDB.version||1,r=i.indexedDB.open(i.myDB.name,e);r.onerror=function(e){},r.onsuccess=function(e){n.myDB.db=e.target.result,t.call(i)},r.onupgradeneeded=function(e){var t=e.target.result;e.target.transaction;t.objectStoreNames.contains(i.myDB.ojstore.name)||t.createObjectStore(i.myDB.ojstore.name,{keyPath:i.myDB.ojstore.keypath})}}},{key:"deletedb",value:function deletedb(){this.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function closeDB(){this.myDB.db.close()}},{key:"addData",value:function addData(e,t){for(var n=this.myDB.db.transaction(e,"readwrite").objectStore(e),i=void 0,r=0;r<t.length;r++)(i=n.add(t[r])).onerror=function(){},i.onsuccess=function(){}}},{key:"putData",value:function putData(e,t){for(var n=this.myDB.db.transaction(e,"readwrite").objectStore(e),i=void 0,r=0;r<t.length;r++)(i=n.put(t[r])).onerror=function(){},i.onsuccess=function(){}}},{key:"getDataByKey",value:function getDataByKey(e,t,n){var i=this,r=this.myDB.db.transaction(e,"readwrite").objectStore(e).get(t);r.onerror=function(){n.call(i,null)},r.onsuccess=function(e){var t=e.target.result;n.call(i,t)}}},{key:"deleteData",value:function deleteData(e,t){this.myDB.db.transaction(e,"readwrite").objectStore(e).delete(t)}},{key:"clearData",value:function clearData(e){this.myDB.db.transaction(e,"readwrite").objectStore(e).clear()}}]),INDEXDB}();t.default=r,e.exports=t.default},function(e,t,i){"use strict";var r,o;
/*!
 * Draggabilly v2.2.0
 * Make that shiz draggable
 * https://draggabilly.desandro.com
 * MIT license
 */
!function(n){r=[i(30),i(31)],void 0===(o=function(e,t){return function factory(o,l,e){"use strict";function extend(e,t){for(var n in t){e[n]=t[n]}return e}function noop(){}var n=o.jQuery;function Draggabilly(e,t){this.element=typeof e=="string"?document.querySelector(e):e;if(n){this.$element=n(this.element)}this.options=extend({},this.constructor.defaults);this.option(t);this._create()}var t=Draggabilly.prototype=Object.create(e.prototype);Draggabilly.defaults={},t.option=function(e){extend(this.options,e)};var i={relative:true,absolute:true,fixed:true};function applyGrid(e,t,n){n=n||"round";return t?Math[n](e/t)*t:e}if(t._create=function(){this.position={};this._getPosition();this.startPoint={x:0,y:0};this.dragPoint={x:0,y:0};this.startPosition=extend({},this.position);var e=getComputedStyle(this.element);if(!i[e.position]){this.element.style.position="relative"}this.on("pointerDown",this.onPointerDown);this.on("pointerMove",this.onPointerMove);this.on("pointerUp",this.onPointerUp);this.enable();this.setHandles()},t.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element];this.bindHandles()},t.dispatchEvent=function(e,t,n){var i=[t].concat(n);this.emitEvent(e,i);this.dispatchJQueryEvent(e,t,n)},t.dispatchJQueryEvent=function(e,t,n){var i=o.jQuery;if(!i||!this.$element){return}var r=i.Event(t);r.type=e;this.$element.trigger(r,n)},t._getPosition=function(){var e=getComputedStyle(this.element);var t=this._getPositionCoord(e.left,"width");var n=this._getPositionCoord(e.top,"height");this.position.x=isNaN(t)?0:t;this.position.y=isNaN(n)?0:n;this._addTransformPosition(e)},t._getPositionCoord=function(e,t){if(e.indexOf("%")!=-1){var n=l(this.element.parentNode);return!n?0:parseFloat(e)/100*n[t]}return parseInt(e,10)},t._addTransformPosition=function(e){var t=e.transform;if(t.indexOf("matrix")!==0){return}var n=t.split(",");var i=t.indexOf("matrix3d")===0?12:4;var r=parseInt(n[i],10);var o=parseInt(n[i+1],10);this.position.x+=r;this.position.y+=o},t.onPointerDown=function(e,t){this.element.classList.add("is-pointer-down");this.dispatchJQueryEvent("pointerDown",e,[t])},t.dragStart=function(e,t){if(!this.isEnabled){return}this._getPosition();this.measureContainment();this.startPosition.x=this.position.x;this.startPosition.y=this.position.y;this.setLeftTop();this.dragPoint.x=0;this.dragPoint.y=0;this.element.classList.add("is-dragging");this.dispatchEvent("dragStart",e,[t]);this.animate()},t.measureContainment=function(){var e=this.getContainer();if(!e){return}var t=l(this.element);var n=l(e);var i=this.element.getBoundingClientRect();var r=e.getBoundingClientRect();var o=n.borderLeftWidth+n.borderRightWidth;var a=n.borderTopWidth+n.borderBottomWidth;var s=this.relativeStartPosition={x:i.left-(r.left+n.borderLeftWidth),y:i.top-(r.top+n.borderTopWidth)};this.containSize={width:n.width-o-s.x-t.width,height:n.height-a-s.y-t.height}},t.getContainer=function(){var e=this.options.containment;if(!e){return}var t=e instanceof HTMLElement;if(t){return e}if(typeof e=="string"){return document.querySelector(e)}return this.element.parentNode},t.onPointerMove=function(e,t,n){this.dispatchJQueryEvent("pointerMove",e,[t,n])},t.dragMove=function(e,t,n){if(!this.isEnabled){return}var i=n.x;var r=n.y;var o=this.options.grid;var a=o&&o[0];var s=o&&o[1];i=applyGrid(i,a);r=applyGrid(r,s);i=this.containDrag("x",i,a);r=this.containDrag("y",r,s);i=this.options.axis=="y"?0:i;r=this.options.axis=="x"?0:r;this.position.x=this.startPosition.x+i;this.position.y=this.startPosition.y+r;this.dragPoint.x=i;this.dragPoint.y=r;this.dispatchEvent("dragMove",e,[t,n])},t.containDrag=function(e,t,n){if(!this.options.containment){return t}var i=e=="x"?"width":"height";var r=this.relativeStartPosition[e];var o=applyGrid(-r,n,"ceil");var a=this.containSize[i];a=applyGrid(a,n,"floor");return Math.max(o,Math.min(a,t))},t.onPointerUp=function(e,t){this.element.classList.remove("is-pointer-down");this.dispatchJQueryEvent("pointerUp",e,[t])},t.dragEnd=function(e,t){if(!this.isEnabled){return}this.element.style.transform="";this.setLeftTop();this.element.classList.remove("is-dragging");this.dispatchEvent("dragEnd",e,[t])},t.animate=function(){if(!this.isDragging){return}this.positionDrag();var e=this;requestAnimationFrame(function animateFrame(){e.animate()})},t.setLeftTop=function(){this.element.style.left=this.position.x+"px";this.element.style.top=this.position.y+"px"},t.positionDrag=function(){this.element.style.transform="translate3d( "+this.dragPoint.x+"px, "+this.dragPoint.y+"px, 0)"},t.staticClick=function(e,t){this.dispatchEvent("staticClick",e,[t])},t.setPosition=function(e,t){this.position.x=e;this.position.y=t;this.setLeftTop()},t.enable=function(){this.isEnabled=true},t.disable=function(){this.isEnabled=false;if(this.isDragging){this.dragEnd()}},t.destroy=function(){this.disable();this.element.style.transform="";this.element.style.left="";this.element.style.top="";this.element.style.position="";this.unbindHandles();if(this.$element){this.$element.removeData("draggabilly")}},t._init=noop,n&&n.bridget){n.bridget("draggabilly",Draggabilly)}return Draggabilly}(n,e,t)}.apply(t,r))||(e.exports=o)}(window)},function(e,t,n){"use strict";var i,r,x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window,void 0===(r="function"==typeof(i=function factory(){"use strict";function getStyleSize(e){var t=parseFloat(e);var n=e.indexOf("%")==-1&&!isNaN(t);return n&&t}function noop(){}var n=typeof console=="undefined"?noop:function(e){console.error(e)},v=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],m=v.length;function getZeroSize(){var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};for(var t=0;t<m;t++){var n=v[t];e[n]=0}return e}function getStyle(e){var t=getComputedStyle(e);if(!t){n("Style returned "+t+". Are you running this code in a hidden iframe on Firefox? "+"See https://bit.ly/getsizebug1")}return t}var i=false,b;function setup(){if(i){return}i=true;var e=document.createElement("div");e.style.width="200px";e.style.padding="1px 2px 3px 4px";e.style.borderStyle="solid";e.style.borderWidth="1px 2px 3px 4px";e.style.boxSizing="border-box";var t=document.body||document.documentElement;t.appendChild(e);var n=getStyle(e);b=Math.round(getStyleSize(n.width))==200;getSize.isBoxSizeOuter=b;t.removeChild(e)}function getSize(e){setup();if(typeof e=="string"){e=document.querySelector(e)}if(!e||(typeof e==="undefined"?"undefined":x(e))!="object"||!e.nodeType){return}var t=getStyle(e);if(t.display=="none"){return getZeroSize()}var n={};n.width=e.offsetWidth;n.height=e.offsetHeight;var i=n.isBorderBox=t.boxSizing=="border-box";for(var r=0;r<m;r++){var o=v[r];var a=t[o];var s=parseFloat(a);n[o]=!isNaN(s)?s:0}var l=n.paddingLeft+n.paddingRight;var u=n.paddingTop+n.paddingBottom;var c=n.marginLeft+n.marginRight;var d=n.marginTop+n.marginBottom;var f=n.borderLeftWidth+n.borderRightWidth;var p=n.borderTopWidth+n.borderBottomWidth;var h=i&&b;var g=getStyleSize(t.width);if(g!==false){n.width=g+(h?0:l+f)}var y=getStyleSize(t.height);if(y!==false){n.height=y+(h?0:u+p)}n.innerWidth=n.width-(l+f);n.innerHeight=n.height-(u+p);n.outerWidth=n.width+c;n.outerHeight=n.height+d;return n}return getSize})?i.call(t,n,t,e):i)||(e.exports=r)},function(e,n,i){"use strict";var r,o;
/*!
 * Unidragger v2.3.0
 * Draggable base class
 * MIT license
 */
!function(t){r=[i(32)],void 0===(o=function(e){return function factory(o,e){"use strict";function Unidragger(){}var t=Unidragger.prototype=Object.create(e.prototype);t.bindHandles=function(){this._bindHandles(true)},t.unbindHandles=function(){this._bindHandles(false)},t._bindHandles=function(e){e=e===undefined?true:e;var t=e?"addEventListener":"removeEventListener";var n=e?this._touchActionValue:"";for(var i=0;i<this.handles.length;i++){var r=this.handles[i];this._bindStartEvent(r,e);r[t]("click",this);if(o.PointerEvent){r.style.touchAction=n}}},t._touchActionValue="none",t.pointerDown=function(e,t){var n=this.okayPointerDown(e);if(!n){return}this.pointerDownPointer=t;e.preventDefault();this.pointerDownBlur();this._bindPostStartEvents(e);this.emitEvent("pointerDown",[e,t])};var r={TEXTAREA:true,INPUT:true,SELECT:true,OPTION:true},a={radio:true,checkbox:true,button:true,submit:true,image:true,file:true};return t.okayPointerDown=function(e){var t=r[e.target.nodeName],n=a[e.target.type],i=!t||n;return i||this._pointerReset(),i},t.pointerDownBlur=function(){var e=document.activeElement;e&&e.blur&&e!=document.body&&e.blur()},t.pointerMove=function(e,t){var n=this._dragPointerMove(e,t);this.emitEvent("pointerMove",[e,t,n]),this._dragMove(e,t,n)},t._dragPointerMove=function(e,t){var n={x:t.pageX-this.pointerDownPointer.pageX,y:t.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(n)&&this._dragStart(e,t),n},t.hasDragStarted=function(e){return 3<Math.abs(e.x)||3<Math.abs(e.y)},t.pointerUp=function(e,t){this.emitEvent("pointerUp",[e,t]),this._dragPointerUp(e,t)},t._dragPointerUp=function(e,t){this.isDragging?this._dragEnd(e,t):this._staticClick(e,t)},t._dragStart=function(e,t){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(e,t)},t.dragStart=function(e,t){this.emitEvent("dragStart",[e,t])},t._dragMove=function(e,t,n){this.isDragging&&this.dragMove(e,t,n)},t.dragMove=function(e,t,n){e.preventDefault(),this.emitEvent("dragMove",[e,t,n])},t._dragEnd=function(e,t){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(e,t)},t.dragEnd=function(e,t){this.emitEvent("dragEnd",[e,t])},t.onclick=function(e){this.isPreventingClicks&&e.preventDefault()},t._staticClick=function(e,t){this.isIgnoringMouseUp&&"mouseup"==e.type||(this.staticClick(e,t),"mouseup"!=e.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},t.staticClick=function(e,t){this.emitEvent("staticClick",[e,t])},Unidragger.getPointerPoint=e.getPointerPoint,Unidragger}(t,e)}.apply(n,r))||(e.exports=o)}(window)},function(e,n,i){"use strict";var r,o;
/*!
 * Unipointer v2.3.0
 * base class for doing one thing with pointer event
 * MIT license
 */
!function(t){r=[i(33)],void 0===(o=function(e){return function factory(r,e){"use strict";function noop(){}function Unipointer(){}var t=Unipointer.prototype=Object.create(e.prototype);t.bindStartEvent=function(e){this._bindStartEvent(e,true)},t.unbindStartEvent=function(e){this._bindStartEvent(e,false)},t._bindStartEvent=function(e,t){t=t===undefined?true:t;var n=t?"addEventListener":"removeEventListener";var i="mousedown";if(r.PointerEvent){i="pointerdown"}else if("ontouchstart"in r){i="touchstart"}e[n](i,this)},t.handleEvent=function(e){var t="on"+e.type;if(this[t]){this[t](e)}},t.getTouch=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.identifier==this.pointerIdentifier){return n}}},t.onmousedown=function(e){var t=e.button;if(t&&t!==0&&t!==1){return}this._pointerDown(e,e)},t.ontouchstart=function(e){this._pointerDown(e,e.changedTouches[0])},t.onpointerdown=function(e){this._pointerDown(e,e)},t._pointerDown=function(e,t){if(e.button||this.isPointerDown){return}this.isPointerDown=true;this.pointerIdentifier=t.pointerId!==undefined?t.pointerId:t.identifier;this.pointerDown(e,t)},t.pointerDown=function(e,t){this._bindPostStartEvents(e);this.emitEvent("pointerDown",[e,t])};var n={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]};return t._bindPostStartEvents=function(e){if(e){var t=n[e.type];t.forEach(function(e){r.addEventListener(e,this)},this),this._boundPointerEvents=t}},t._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(e){r.removeEventListener(e,this)},this),delete this._boundPointerEvents)},t.onmousemove=function(e){this._pointerMove(e,e)},t.onpointermove=function(e){e.pointerId==this.pointerIdentifier&&this._pointerMove(e,e)},t.ontouchmove=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerMove(e,t)},t._pointerMove=function(e,t){this.pointerMove(e,t)},t.pointerMove=function(e,t){this.emitEvent("pointerMove",[e,t])},t.onmouseup=function(e){this._pointerUp(e,e)},t.onpointerup=function(e){e.pointerId==this.pointerIdentifier&&this._pointerUp(e,e)},t.ontouchend=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerUp(e,t)},t._pointerUp=function(e,t){this._pointerDone(),this.pointerUp(e,t)},t.pointerUp=function(e,t){this.emitEvent("pointerUp",[e,t])},t._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},t._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},t.pointerDone=function noop(){},t.onpointercancel=function(e){e.pointerId==this.pointerIdentifier&&this._pointerCancel(e,e)},t.ontouchcancel=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerCancel(e,t)},t._pointerCancel=function(e,t){this._pointerDone(),this.pointerCancel(e,t)},t.pointerCancel=function(e,t){this.emitEvent("pointerCancel",[e,t])},Unipointer.getPointerPoint=function(e){return{x:e.pageX,y:e.pageY}},Unipointer}(t,e)}.apply(n,r))||(e.exports=o)}(window)},function(e,t,n){"use strict";var i,r;void 0===(r="function"==typeof(i=function(){"use strict";function EvEmitter(){}var e=EvEmitter.prototype;return e.on=function(e,t){if(e&&t){var n=this._events=this._events||{},i=n[e]=n[e]||[];return-1==i.indexOf(t)&&i.push(t),this}},e.once=function(e,t){if(e&&t){this.on(e,t);var n=this._onceEvents=this._onceEvents||{};return(n[e]=n[e]||{})[t]=!0,this}},e.off=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){var i=n.indexOf(t);return-1!=i&&n.splice(i,1),this}},e.emitEvent=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){n=n.slice(0),t=t||[];for(var i=this._onceEvents&&this._onceEvents[e],r=0;r<n.length;r++){var o=n[r];i&&i[o]&&(this.off(e,o),delete i[o]),o.apply(this,t)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},EvEmitter})?i.call(t,n,t,e):i)||(e.exports=r)},function(t,n,i){"use strict";var r,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"object"===a(n)&&void 0!==t?t.exports=e():void 0===(o="function"==typeof(r=e)?r.call(n,i,n,t):r)||(t.exports=o)}(function(){function yp(e,t,n,i,r,o,a){var s=e.x,l=e.y;return{x:i*(s*=t)-r*(l*=n)+o,y:r*s+i*l+a}}function zp(e,t){var n=4/3*Math.tan(t/4),i=Math.cos(e),r=Math.sin(e),o=Math.cos(e+t),a=Math.sin(e+t);return[{x:i-r*n,y:r+i*n},{x:o+a*n,y:a-o*n},{x:o,y:a}]}function Ap(e,t,n,i){var r=e*i-t*n<0?-1:1,o=(e*n+t*i)/(Math.sqrt(e*e+t*t)*Math.sqrt(e*e+t*t));return 1<o&&(o=1),o<-1&&(o=-1),r*Math.acos(o)}function Cp(e){var t=e.px,n=e.py,i=e.cx,r=e.cy,l=e.rx,u=e.ry,o=e.xAxisRotation,a=void 0===o?0:o,s=e.largeArcFlag,c=void 0===s?0:s,d=e.sweepFlag,f=void 0===d?0:d,p=[];if(0===l||0===u)return[];var h=Math.sin(a*S/360),g=Math.cos(a*S/360),y=g*(t-i)/2+h*(n-r)/2,v=-h*(t-i)/2+g*(n-r)/2;if(0==y&&0==v)return[];l=Math.abs(l),u=Math.abs(u);var m=Math.pow(y,2)/Math.pow(l,2)+Math.pow(v,2)/Math.pow(u,2);1<m&&(l*=Math.sqrt(m),u*=Math.sqrt(m));var b=function getArcCenter(e,t,n,i,r,o,a,s,l,u,c,d){var f=Math.pow(r,2),p=Math.pow(o,2),h=Math.pow(c,2),g=Math.pow(d,2),y=f*p-f*g-p*h;y<0&&(y=0),y/=f*g+p*h;var v=(y=Math.sqrt(y)*(a===s?-1:1))*r/o*d,m=y*-o/r*c,b=u*v-l*m+(e+n)/2,x=l*v+u*m+(t+i)/2,w=(c-v)/r,k=(d-m)/o,_=(-c-v)/r,E=(-d-m)/o,C=Ap(1,0,w,k),P=Ap(w,k,_,E);return 0===s&&0<P&&(P-=S),1===s&&P<0&&(P+=S),[b,x,C,P]}(t,n,i,r,l,u,c,f,h,g,y,v),x=T(b,4),w=x[0],k=x[1],_=x[2],E=x[3],C=Math.max(Math.ceil(Math.abs(E)/(S/4)),1);E/=C;for(var P=0;P<C;P++)p.push(zp(_,E)),_+=E;return p.map(function(e){var t=yp(e[0],l,u,g,h,w,k),n=t.x,i=t.y,r=yp(e[1],l,u,g,h,w,k),o=r.x,a=r.y,s=yp(e[2],l,u,g,h,w,k);return{x1:n,y1:i,x2:o,y2:a,x:s.x,y:s.y}})}var T=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),S=2*Math.PI,o={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/gi;var a=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function shapeBox(e){var u=e[0][0],c=e[0][1],d=u,f=c;return e.forEach(function(e){var t=e[0],n=e[2],i=e[4],r=e[6],o=e[1],a=e[3],s=e[5],l=e[7];u=Math.min(u,t,n,i,r),c=Math.min(c,o,a,s,l),d=Math.max(d,t,n,i,r),f=Math.max(f,o,a,s,l)}),[u,c,d,f]}function sortCurves(i,r){var e=function permuteCurveNum(e){for(var t=[],n=0;n<e;n++){for(var i=[],r=0;r<e;r++){var o=r+n;e-1<o&&(o-=e),i[o]=r}t.push(i)}return t}(i.length),o=[];e.forEach(function(e){var t=0,n=0;e.forEach(function(e){t+=function curveDistance(e,t){var n=e[0],i=e[2],r=e[4],o=e[6],a=e[1],s=e[3],l=e[5],u=e[7],c=t[0],d=t[2],f=t[4],p=t[6],h=t[1],g=t[3],y=t[5],v=t[7];return Math.sqrt(Math.pow(c-n,2)+Math.pow(h-a,2))+Math.sqrt(Math.pow(d-i,2)+Math.pow(g-s,2))+Math.sqrt(Math.pow(f-r,2)+Math.pow(y-l,2))+Math.sqrt(Math.pow(p-o,2)+Math.pow(v-u,2))}(i[e],r[n++])}),o.push({index:e,distance:t})}),o.sort(function(e,t){return e.distance-t.distance});var t=[];return o[0].index.forEach(function(e){t.push(i[e])}),t}function sort(n,i){var e=function permuteNum(e){for(var t=[],n=0;n<e;n++)t.push(n);return function permute(e){var i=[],r=[];return function main(e){var t,n;for(t=0;t<e.length;t++)n=e.splice(t,1)[0],r.push(n),0==e.length&&i.push(r.slice()),main(e),e.splice(t,0,n),r.pop();return i}(e)}(t)}(n.length),r=[];e.forEach(function(e){var t=0;e.forEach(function(e){t+=function boxDistance(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))+Math.sqrt(Math.pow(e[2]-t[2],2)+Math.pow(e[3]-t[3],2))}(shapeBox(n[e]),shapeBox(i[e]))}),r.push({index:e,distance:t})}),r.sort(function(e,t){return e.distance-t.distance});var t=[];return r[0].index.forEach(function(e){t.push(n[e])}),t}var m={};function split(e,t,n,i,r,o,a,s,l){return{left:_split(e,t,n,i,r,o,a,s,l),right:_split(a,s,r,o,n,i,e,t,1-l,!0)}}function _split(e,t,n,i,r,o,a,s,l,u){var c=(n-e)*l+e,d=(i-t)*l+t,f=(r-n)*l+n,p=(o-i)*l+i,h=(f-c)*l+c,g=(p-d)*l+d,y=(((a-r)*l+r-f)*l+f-h)*l+h,v=(((s-o)*l+o-p)*l+p-g)*l+g;return u?[y,v,h,g,c,d,e,t]:[e,t,c,d,h,g,y,v]}function sync(n,e){for(var t=function _loop(){var e=n[n.length-1],t=[];e.forEach(function(e){t.push(e.slice(0))}),n.push(t)},i=0;i<e;i++)t()}return m.parser=function parse(e){var r=[];return e.replace(t,function(e,t,n){var i=t.toLowerCase();for(n=function parseValues(e){var t=e.match(a);return t?t.map(Number):[]}(n),"m"==i&&2<n.length&&(r.push([t].concat(n.splice(0,2))),i="l",t="m"==t?"l":"L");;){if(n.length==o[i])return n.unshift(t),r.push(n);if(n.length<o[i])throw new Error("malformed path data");r.push([t].concat(n.splice(0,o[i])))}}),r},m.lerpCurve=function(e,t,n){return m.lerpPoints(e[0],e[1],t[0],t[1],n).concat(m.lerpPoints(e[2],e[3],t[2],t[3],n)).concat(m.lerpPoints(e[4],e[5],t[4],t[5],n)).concat(m.lerpPoints(e[6],e[7],t[6],t[7],n))},m.lerpPoints=function(e,t,n,i,r){return[e+(n-e)*r,t+(i-t)*r]},m.q2b=function(e,t,n,i,r,o){return[e,t,(e+2*n)/3,(t+2*i)/3,(r+2*n)/3,(o+2*i)/3,r,o]},m.path2shapes=function(e){for(var t=m.parser(e),n=0,i=0,r=0,o=t.length,a=[],s=null,l=void 0,u=void 0,c=void 0,d=void 0,f=void 0,p=void 0,h=void 0;r<o;r++){var g=t[r],y=g[0],v=t[r-1];switch(y){case"m":a[f=a.length]=[],s=a[f],n+=g[1],i+=g[2];break;case"M":a[f=a.length]=[],s=a[f],n=g[1],i=g[2];break;case"l":s.push([n,i,n,i,n,i,n+g[1],i+g[2]]),n+=g[1],i+=g[2];break;case"L":s.push([n,i,g[1],g[2],g[1],g[2],g[1],g[2]]),n=g[1],i=g[2];break;case"h":s.push([n,i,n,i,n,i,n+g[1],i]),n+=g[1];break;case"H":s.push([n,i,g[1],i,g[1],i,g[1],i]),n=g[1];break;case"v":s.push([n,i,n,i,n,i,n,i+g[1]]),i+=g[1];break;case"V":s.push([n,i,n,g[1],n,g[1],n,g[1]]),i=g[1];break;case"C":s.push([n,i,g[1],g[2],g[3],g[4],g[5],g[6]]),n=g[5],i=g[6];break;case"S":"C"===v[0]||"c"===v[0]?s.push([n,i,n+v[5]-v[3],i+v[6]-v[4],g[1],g[2],g[3],g[4]]):"S"!==v[0]&&"s"!==v[0]||s.push([n,i,n+v[3]-v[1],i+v[4]-v[2],g[1],g[2],g[3],g[4]]),n=g[3],i=g[4];break;case"c":s.push([n,i,n+g[1],i+g[2],n+g[3],i+g[4],n+g[5],i+g[6]]),n+=g[5],i+=g[6];break;case"s":"C"===v[0]||"c"===v[0]?s.push([n,i,n+v[5]-v[3],i+v[6]-v[4],n+g[1],i+g[2],n+g[3],i+g[4]]):"S"!==v[0]&&"s"!==v[0]||s.push([n,i,n+v[3]-v[1],i+v[4]-v[2],n+g[1],i+g[2],n+g[3],i+g[4]]),n+=g[3],i+=g[4];break;case"a":h=(p=Cp({rx:g[1],ry:g[2],px:n,py:i,xAxisRotation:g[3],largeArcFlag:g[4],sweepFlag:g[5],cx:n+g[6],cy:i+g[7]}))[p.length-1],p.forEach(function(e,t){0===t?s.push([n,i,e.x1,e.y1,e.x2,e.y2,e.x,e.y]):s.push([p[t-1].x,p[t-1].y,e.x1,e.y1,e.x2,e.y2,e.x,e.y])}),n=h.x,i=h.y;break;case"A":h=(p=Cp({rx:g[1],ry:g[2],px:n,py:i,xAxisRotation:g[3],largeArcFlag:g[4],sweepFlag:g[5],cx:g[6],cy:g[7]}))[p.length-1],p.forEach(function(e,t){0===t?s.push([n,i,e.x1,e.y1,e.x2,e.y2,e.x,e.y]):s.push([p[t-1].x,p[t-1].y,e.x1,e.y1,e.x2,e.y2,e.x,e.y])}),n=h.x,i=h.y;break;case"Q":s.push(m.q2b(n,i,g[1],g[2],g[3],g[4])),n=g[3],i=g[4];break;case"q":s.push(m.q2b(n,i,n+g[1],i+g[2],g[3]+n,g[4]+i)),n+=g[3],i+=g[4];break;case"T":"Q"===v[0]||"q"===v[0]?(c=n+v[3]-v[1],d=i+v[4]-v[2],s.push(m.q2b(n,i,c,d,g[1],g[2]))):"T"!==v[0]&&"t"!==v[0]||(s.push(m.q2b(n,i,n+n-c,i+i-d,g[1],g[2])),c=n+n-c,d=i+i-d),n=g[1],i=g[2];break;case"t":"Q"===v[0]||"q"===v[0]?(c=n+v[3]-v[1],d=i+v[4]-v[2],s.push(m.q2b(n,i,c,d,n+g[1],i+g[2]))):"T"!==v[0]&&"t"!==v[0]||(s.push(m.q2b(n,i,n+n-c,i+i-d,n+g[1],i+g[2])),c=n+n-c,d=i+i-d),n+=g[1],i+=g[2];break;case"Z":case"z":l=s[0][0],u=s[0][1],s.push([n,i,l,u,l,u,l,u])}}return a},m._upCurves=function(e,t){for(var n=0,i=0,r=e.length;n<t;n++)e.push(e[i].slice(0)),r-1<++i&&(i-=r)},m._splitCurves=function(e,t){for(var n=0,i=0;n<t;n++){var r=e[i],o=split(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],.5);e.splice(i,1),e.splice(i,0,o.left,o.right),(i+=2)>=e.length-1&&(i=0)}},m.lerp=function(e,t,n){return m._lerp(m.path2shapes(e),m.path2shapes(t),n)},m.MIM_CURVES_COUNT=100,m._preprocessing=function(e,t){var n=e.length,i=t.length,r=JSON.parse(JSON.stringify(e)),o=JSON.parse(JSON.stringify(t));return i<n?sync(o,n-i):n<i&&sync(r,i-n),(r=sort(r,o)).forEach(function(e,t){var n=e.length,i=o[t].length;i<n?n<m.MIM_CURVES_COUNT?(m._splitCurves(e,m.MIM_CURVES_COUNT-n),m._splitCurves(o[t],m.MIM_CURVES_COUNT-i)):m._splitCurves(o[t],n-i):n<i&&(i<m.MIM_CURVES_COUNT?(m._splitCurves(e,m.MIM_CURVES_COUNT-n),m._splitCurves(o[t],m.MIM_CURVES_COUNT-i)):m._splitCurves(e,i-n))}),r.forEach(function(e,t){r[t]=sortCurves(e,o[t])}),[r,o]},m._lerp=function(e,r,o){var t=[];return e.forEach(function(e,n){var i=[];e.forEach(function(e,t){i.push(m.lerpCurve(e,r[n][t],o))}),t.push(i)}),t},m.animate=function(e){var t=m.path2shapes(e.from),n=m.path2shapes(e.to),i=m._preprocessing(t,n),r=new Date,o=e.end||function(){},a=e.progress||function(){},s=e.begin||function(){},l=e.easing||function(e){return e},u=null,c=null,d=e.time;s(t);!function tick(){var e=new Date-r;if(d<=e)return a(c=n,1),o(c),void cancelAnimationFrame(u);var t=l(e/d);c=m._lerp(i[0],i[1],t),a(c,t),u=requestAnimationFrame(tick)}()},m})},function(e,t,n){"use strict";!function(){for(var o=0,e=["webkit","moz"],t=0;t<e.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,t){var n=(new Date).getTime(),i=Math.max(0,16-(n-o)),r=window.setTimeout(function(){e(n+i)},i);return o=n+i,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}()},function(e,t,n){"use strict";var o=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(0));o.default.install("time",function time(){var e=this,t=o.default.util,n=t.format,i=t.createDom("xg-time","<span>"+(e.currentTime||n(0))+"</span><em>"+(e.duration||n(0))+"</em>",{},"xgplayer-time");e.controls.appendChild(i);var r=function handle(){"audio"===e.videoConfig.mediaType&&e.isProgressMoving&&e.dash||(i.innerHTML="<span>"+n(e.currentTime||0)+"</span><em>"+n(e.duration))};e.on("durationchange",r),e.on("timeupdate",r),e.once("destroy",function destroyFunc(){e.off("durationchange",r),e.off("timeupdate",r),e.off("destroy",destroyFunc)})})},function(e,t,n){"use strict";var i=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(0));i.default.install("poster",function poster(){var e=this,poster=i.default.util.createDom("xg-poster","",{},"xgplayer-poster"),t=e.root;function playFunc(){poster.style.display="none"}e.config.poster&&(poster.style.backgroundImage="url("+e.config.poster+")",t.appendChild(poster)),e.on("play",playFunc),e.once("destroy",function destroyFunc(){e.off("play",playFunc),e.off("destroy",destroyFunc)})})},function(e,t,n){"use strict";var u=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(0));u.default.install("playbackRate",function playbackRate(){var i=this,e=u.default.util,n=0,r=1,o=[];if(!i.config.playbackRate)return!1;i.config.playbackRate.sort(function(e,t){return e-t}),i.config.playbackRate.forEach(function(e,t){i.config.defaultPlaybackRate&&i.config.defaultPlaybackRate===e?(n=t,r=e,i.once("playing",function(){i.video.playbackRate=e})):1!==e&&"1"!==e||(n=t),o.push(e+"x")});var t=i.config.lang&&"zh-cn"===i.config.lang?"倍速":"Speed",a=e.createDom("xg-playback","<p class='name'><span>"+r+"x</span></p>",{},"xgplayer-playback"),s=i.controls,l=e.createDom("xg-tips",t,{},"xgplayer-tips");a.appendChild(l),s.appendChild(a),["touchstart","click"].forEach(function(e){a.addEventListener(e,function(e){e.preventDefault(),e.stopPropagation();var t=e.target||e.srcElement;!t||"p"!==t.tagName.toLocaleLowerCase()&&"span"!==t.tagName.toLocaleLowerCase()||(n=n+1===o.length?0:n+1,a.querySelector("p").innerHTML="<span>"+o[n]+"</span>",i.video.playbackRate=+o[n].replace(/x$/g,""))},!1)}),a.addEventListener("mouseenter",function(e){e.preventDefault(),e.stopPropagation(),l.style.left="50%";var t=l.getBoundingClientRect(),n=i.root.getBoundingClientRect();t.right>n.right&&(l.style.left=-t.right+n.right+16+"px")}),i.on("play",function(){var e=parseFloat(o[n].substring(0,o[n].length-1));i.video.playbackRate.toFixed(1)!==e.toFixed(1)&&(i.video.playbackRate=e)})})},function(e,t,n){"use strict";var f=_interopRequireDefault(n(0)),p=_interopRequireDefault(n(7));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}f.default.install("play",function play(){var t=this,e=t.controls,n=f.default.util,i=t.config.iconScale||.0320625,r={play:"M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z",pause:"M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"},o=t.config.playBtn?t.config.playBtn:{},a=void 0,s=void 0,l=void 0;"img"===o.type?a=f.default.util.createImgBtn("play",o.url.play,o.width,o.height):(a=n.createDom("xg-play",'<xg-icon class="xgplayer-icon"><svg xmlns="http://www.w3.org/2000/svg" width="1024" height="1024" viewBox="0 0 1024 1024">\n              <path transform="scale('+i+" "+i+')" d="'+r.play+'"></path>\n          </svg></xg-icon>',{},"xgplayer-play"),s=a.querySelector("path"),l=new p.default({progress:function progress(e){s.setAttribute("d",l.toSVGString(e))},from:r.pause,to:r.play,duration:50}));var u=t.config.lang&&"zh-cn"===t.config.lang?"播放":"Play",c=t.config.lang&&"zh-cn"===t.config.lang?"暂停":"Pause",d=n.createDom("xg-tips",u,{},"xgplayer-tips");a.appendChild(d);function playFunc(){"img"===o.type?a.style.backgroundImage='url("'+o.url.pause+'")':setTimeout(function(){d.textContent=c,l.to!==r.pause&&l.reset(r.pause,r.play)},80)}function pauseFunc(){"img"===o.type?a.style.backgroundImage='url("'+o.url.play+'")':setTimeout(function(){d.textContent=u,l.to!==r.play&&l.reset(r.play,r.pause)},80)}e.appendChild(a),["click","touchstart"].forEach(function(e){a.addEventListener(e,function(e){e.preventDefault(),e.stopPropagation(),t.ended?t.config.enableEndedPlay&&t.replay():(n.removeClass(t.root,"xgplayer-nostart"),t.paused?(t.play(),t.emit("playBtnClick","play")):(t.pause(),t.emit("playBtnClick","pause")))},!1)}),t.on("play",playFunc),t.on("pause",pauseFunc),t.once("destroy",function destroyFunc(){t.off("play",playFunc),t.off("pause",pauseFunc),t.off("destroy",destroyFunc)})})},function(e,t,n){"use strict";var h=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(0));h.default.install("pc",function pc(){var t=this,i=h.default.util,r=t.controls,n=t.root,o=0,a=void 0,s=t.config.centerBtn?t.config.centerBtn:{},l=void 0,u=void 0,c=void 0;"img"===s.type?u=h.default.util.createImgBtn("start",s.url.play,s.width,s.height):(l={pause:s.pausePath?s.pausePath:"M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z",play:s.playPath?s.playPath:"M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"},u=i.createDom("xg-start",'\n          <svg xmlns="http://www.w3.org/2000/svg" width="1024" height="1024" viewBox="0 0 1024 1024">\n              <path transform="scale(0.04,0.04)" d="'+l.pause+'"></path>\n          </svg>',{},"xgplayer-start"),c=u.querySelector("path"));var e=i.createDom("xg-enter",'<xg-enter-logo class="xgplayer-enter-logo"></xg-enter-logo><xg-enter-tips class="xgplayer-enter-tips"></xg-player-tips>',{},"xgplayer-enter"),d=e.querySelector(".xgplayer-enter-logo");n.appendChild(u),n.appendChild(e);var f=e.querySelector(".xgplayer-enter-tips"),p=new Image;function startClcCanplay(){i.removeClass(n,"xgplayer-is-enter")}function startClcPlaying(){i.removeClass(n,"xgplayer-is-enter")}function startAniEnd(e){e.preventDefault(),i.removeClass(u,"xgplayer-start-interact"),i.removeClass(n,"xgplayer-nostart"),i.removeClass(n,"xgplayer-start-appear")}function onPlayBtnClick(e){"pause"===e?("img"===s.type?u.style.backgroundImage='url("'+s.url.play+'")':c.setAttribute("d",l.play),i.addClass(n,"xgplayer-start-appear"),i.addClass(u,"xgplayer-start-interact")):"play"===e&&("img"===s.type?u.style.backgroundImage='url("'+s.url.pause+'")':c.setAttribute("d",l.pause),i.addClass(n,"xgplayer-start-appear"),i.addClass(u,"xgplayer-start-interact"))}function mouseenterFunc(){clearTimeout(t.leavePlayerTimer),t.emit("focus",t)}function mouseleaveFunc(){t.config.closePlayerBlur||(t.leavePlayerTimer=setTimeout(function(){t.emit("blur",t)},t.config.leavePlayerTime||0))}function readyFunc(e){t.config.autoplay&&t.start()}p.onload=function(){f.style.display="block"},t.config.enterLogo&&t.config.enterLogo.url&&t.config.enterLogo.width&&t.config.enterLogo.height?(p.src=t.config.enterLogo.url,d.style.backgroundImage='url("'+t.config.enterLogo.url+'")',d.style.width=t.config.enterLogo.width+"px",d.style.height=t.config.enterLogo.height+"px",d.style.backgroundSize=t.config.enterLogo.width+"px "+t.config.enterLogo.height+"px",d.style.margin="-"+t.config.enterLogo.height/2+"px auto auto -"+t.config.enterLogo.width/2+"px",f.style.margin=t.config.enterLogo.height-6+"px auto auto -62px"):p.src=i.getBgImage(d),t.config.enterTips&&t.config.enterTips.background&&(f.style.background=""+t.config.enterTips.background),t.config.enterBg&&(t.config.enterBg.url?e.style.backgroundImage='url("'+t.config.enterBg.url+'")':t.config.enterBg.color&&(e.style.background=t.config.enterBg.color)),["click","touchend"].forEach(function(e){u.addEventListener(e,function(e){!function startClc(e){e.preventDefault(),e.stopPropagation(),i.hasClass(n,"xgplayer-nostart")?(i.removeClass(n,"xgplayer-nostart"),i.addClass(n,"xgplayer-is-enter"),t.on("canplay",startClcCanplay),t.once("playing",startClcPlaying),n.querySelector("video")||"dash"===t.type||t.start(),t.play()):t.paused&&(i.removeClass(n,"xgplayer-nostart xgplayer-isloading"),setTimeout(function(){t.play()},10))}(e)},!1)}),u.addEventListener("animationend",function(e){startAniEnd(e)}),u.addEventListener("webkitAnimationEnd",function(e){startAniEnd(e)}),t.on("playBtnClick",onPlayBtnClick),t.once("autoplay was prevented",function(){setTimeout(function(){c.setAttribute("d",l.pause),h.default.util.addClass(t.root,"xgplayer-nostart")},500)}),t.onElementClick=function(e,t){e.preventDefault(),e.stopPropagation();var n=this;n.config.closeVideoClick||(o++,a&&clearTimeout(a),1===o?a=setTimeout(function(){if(i.hasClass(n.root,"xgplayer-nostart"))return!1;n.ended||(n.paused?n.play():n.pause()),o=0},200):o=0)},t.video.addEventListener("click",function(e){t.onElementClick(e,t.video)},!1),t.onElementDblclick=function(e,t){e.preventDefault(),e.stopPropagation();if(!this.config.closeVideoDblclick){var n=r.querySelector(".xgplayer-fullscreen");if(n){var i=void 0;document.createEvent?(i=document.createEvent("Event")).initEvent("click",!0,!0):i=new Event("click"),n.dispatchEvent(i)}}},t.video.addEventListener("dblclick",function(e){t.onElementDblclick(e,t.video)},!1),n.addEventListener("mouseenter",mouseenterFunc,!1),n.addEventListener("mouseleave",mouseleaveFunc),r.addEventListener("mouseenter",function cmouseenterFunc(e){t.userTimer&&clearTimeout(t.userTimer)}),r.addEventListener("mouseleave",function cmouseleaveFunc(e){t.config.closeControlsBlur||t.emit("focus",t)}),t.once("ready",readyFunc),t.once("destroy",function destroyFunc(){n.removeEventListener("mouseenter",mouseenterFunc),n.removeEventListener("mouseleave",mouseleaveFunc),t.off("canplay",startClcCanplay),t.off("playing",startClcPlaying),t.off("playBtnClick",onPlayBtnClick),t.off("ready",readyFunc),t.off("destroy",destroyFunc)})})},function(e,t,n){"use strict";var p=_interopRequireDefault(n(0)),h=_interopRequireDefault(n(7));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}p.default.install("mobile",function mobile(){var t=this,n=p.default.util,i=t.root,e=function whitelistPass(e){var t=p.default.util;return e.some(function(e){return"Function"===t.typeOf(e)?e.call(void 0,navigator.userAgent):"RegExp"===t.typeOf(e)?e.test(navigator.userAgent):"String"===t.typeOf(e)&&-1<navigator.userAgent.indexOf(e)})}(t.config.whitelist);t.mobilePass=e;var r=t.config.centerBtn?t.config.centerBtn:{},o=void 0,a=void 0,s=void 0,l=void 0;"img"===r.type?a=p.default.util.createImgBtn("start",r.url.play,r.width,r.height):(o={pause:r.pausePath?r.pausePath:"M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z",play:r.playPath?r.playPath:"M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"},a=n.createDom("xg-start",'\n          <svg xmlns="http://www.w3.org/2000/svg" width="1024" height="1024" viewBox="0 0 1024 1024">\n              <path transform="scale(0.04,0.04)" d="'+o.pause+'"></path>\n          </svg>',{},"xgplayer-start"),s=a.querySelector("path"),l=new h.default({from:o.play,to:o.pause,progress:function progress(e){s.setAttribute("d",l.toSVGString(e))}}));var u=n.createDom("xg-enter",'<xg-enter-logo class="xgplayer-enter-logo"></xg-enter-logo><xg-enter-tips class="xgplayer-enter-tips"></xg-player-tips>',{},"xgplayer-enter"),c=u.querySelector(".xgplayer-enter-logo");i.appendChild(a),i.appendChild(u);var d=u.querySelector(".xgplayer-enter-tips"),f=new Image;f.onload=function(){d.style.display="block"},t.config.enterLogo&&t.config.enterLogo.url&&t.config.enterLogo.width&&t.config.enterLogo.height?(f.src=t.config.enterLogo.url,c.style.backgroundImage='url("'+t.config.enterLogo.url+'")',c.style.width=t.config.enterLogo.width+"px",c.style.height=t.config.enterLogo.height+"px",c.style.backgroundSize=t.config.enterLogo.width+"px "+t.config.enterLogo.height+"px",c.style.margin="-"+t.config.enterLogo.height/2+"px auto auto -"+t.config.enterLogo.width/2+"px",d.style.margin=t.config.enterLogo.height-6+"px auto auto -62px"):f.src=n.getBgImage(c),t.config.enterTips&&t.config.enterTips.background&&(d.style.background=""+t.config.enterTips.background),t.config.enterBg&&(t.config.enterBg.url?u.style.backgroundImage='url("'+t.config.enterBg.url+'")':t.config.enterBg.color&&(u.style.background=t.config.enterBg.color)),t.start(),e?(t.video.addEventListener("touchend",function(e){e.preventDefault(),n.hasClass(i,"xgplayer-inactive")?t.emit("focus"):t.emit("blur"),t.config.closeVideoTouch||t.isTouchMove||t.ended||(t.paused?t.play():t.pause())}),t.video.addEventListener("touchstart",function(){t.isTouchMove=!1}),t.video.addEventListener("touchmove",function(){t.isTouchMove=!0}),a.addEventListener("touchend",function(e){e.preventDefault(),n.hasClass(i,"xgplayer-nostart")?(n.removeClass(i,"xgplayer-nostart"),n.addClass(i,"xgplayer-is-enter"),t.on("canplay",function(){n.removeClass(i,"xgplayer-is-enter")}),t.once("playing",function(){n.removeClass(i,"xgplayer-is-enter")}),t.play()):t.paused?t.play():t.pause()}),t.on("play",function(){"img"===r.type?a.style.backgroundImage='url("'+r.url.pause+'")':l.reset(o.play,o.pause)}),t.on("pause",function(){"img"===r.type?a.style.backgroundImage='url("'+r.url.play+'")':l.reset(o.pause,o.play)})):(n.addClass(i,"xgplayer-mobile-npassed"),t.once("ready",function(){t.video.controls=t.config.controls,t.video.controlsList=t.config.controlsList.join(" "),t.config.poster&&(t.video.poster=t.config.poster)})),t.config.debug&&function debug(e){var t={};Object.assign(t,{host:"127.0.0.1",port:9090},e);var n=document.createElement("script"),i=document.createElement("h4");i.style.cssText="position:fixed;bottom:0;padding:10px;width:100%;background-color:#fff;text-align:center",i.textContent="weinre --boundHost "+t.host+" --httpPort "+t.port+"\r\n 启动服务后，刷新页面",n.anonymous=!0,n.async=!0,n.src="http://"+t.host+":"+t.port+"/target/target-script-min.js#anonymous",n.onload=function(){i.parentNode.removeChild(i)},document.body.appendChild(n),document.body.appendChild(i)}(t.config.debug)})},function(e,t,n){"use strict";var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(0));r.default.install("localPreview",function localPreview(){var t=this,n=r.default.util,e=n.createDom("xg-preview",'<input type="file">',{},"xgplayer-preview"),i=e.querySelector("input");t.config.preview&&t.config.preview.uploadEl&&(t.config.preview.uploadEl.appendChild(e),i.onchange=function(){t.uploadFile=i.files[0];var e=URL.createObjectURL(t.uploadFile);n.hasClass(t.root,"xgplayer-nostart")?(t.config.url=e,t.start()):(t.src=e,t.play())})})},function(e,t,n){"use strict";var i=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(0));i.default.install("loading",function loading(){var e=i.default.util.createDom("xg-loading",'\n    <svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewbox="0 0 100 100">\n      <path d="M100,50A50,50,0,1,1,50,0"></path>\n    </svg>\n    ',{},"xgplayer-loading");this.root.appendChild(e)})},function(e,t,n){"use strict";(function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}})(n(0)).default.install("i18n",function i18n(){var e=this,n={},i=e.constructor.util;n.en={HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"network is offline"},n["zh-cn"]={HAVE_NOTHING:"没有关于音频/视频是否就绪的信息",HAVE_METADATA:"音频/视频的元数据已就绪",HAVE_CURRENT_DATA:"关于当前播放位置的数据是可用的，但没有足够的数据来播放下一帧/毫秒",HAVE_FUTURE_DATA:"当前及至少下一帧的数据是可用的",HAVE_ENOUGH_DATA:"可用数据足以开始播放",NETWORK_EMPTY:"音频/视频尚未初始化",NETWORK_IDLE:"音频/视频是活动的且已选取资源，但并未使用网络",NETWORK_LOADING:"浏览器正在下载数据",NETWORK_NO_SOURCE:"未找到音频/视频来源",MEDIA_ERR_ABORTED:"取回过程被用户中止",MEDIA_ERR_NETWORK:"当下载时发生错误",MEDIA_ERR_DECODE:"当解码时发生错误",MEDIA_ERR_SRC_NOT_SUPPORTED:"不支持的音频/视频格式",REPLAY:"重播",ERROR:"网络连接似乎出现了问题"},Object.defineProperty(e,"lang",{get:function get(){return n[e.config.lang]||n.en},set:function set(t){"Object"===i.typeOf(t)&&Object.keys(t).forEach(function(e){n[e]=t[e]})},configurable:!0})})},function(e,t,n){"use strict";var f=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(0));f.default.install("fullscreen",function fullscreen(){var o=this,a=f.default.util,n="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z",t="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z",i=a.createDom("xg-fullscreen",'<xg-icon class="xgplayer-icon"><svg xmlns="http://www.w3.org/2000/svg" width="1024" height="1024" viewBox="0 0 1024 1024">\n            <path transform="scale(0.03 0.03)" d="'+t+'"></path>\n        </svg></xg-icon>',{},"xgplayer-fullscreen"),s=o.config.lang&&"zh-cn"===o.config.lang?"全屏":"Full screen",r=o.config.lang&&"zh-cn"===o.config.lang?"退出全屏":"Exit full screen",e=o.controls,l=o.root,u=a.createDom("xg-tips",s,{},"xgplayer-tips"),c=i.querySelector("path");i.appendChild(u);e.appendChild(i),["click","touchend"].forEach(function(e){i.addEventListener(e,function(e){e.preventDefault(),e.stopPropagation(),(a.hasClass(l,"xgplayer-fullscreen-active")||a.hasClass(l,"xgplayer-is-fullscreen")?function exitFullscreen(e){var t=a.findDom(o.controls,"xg-cssfullscreen"),n="M843.617212 67.898413 175.411567 67.898413c-61.502749 0-111.367437 49.856501-111.367437 111.367437l0 668.205645c0 61.510936 49.864688 111.367437 111.367437 111.367437L843.617212 958.838931c61.510936 0 111.367437-49.856501 111.367437-111.367437L954.984648 179.26585C954.984648 117.754914 905.12917 67.898413 843.617212 67.898413zM398.146441 736.104057c15.380292 0 27.842115 12.461823 27.842115 27.842115 0 15.379269-12.461823 27.841092-27.842115 27.841092L259.725858 791.787264c-7.785314 0-14.781658-3.217275-19.838837-8.365528-5.383614-4.577249-8.791224-11.228739-8.791224-19.475564L231.095797 624.736621c0-15.371082 12.471033-27.842115 27.842115-27.842115 15.380292 0 27.842115 12.471033 27.842115 27.842115l-0.61603 71.426773 133.036969-133.037992 39.378869 39.378869L324.962651 736.113267 398.146441 736.104057zM419.199942 463.611943 286.162974 330.565764l0.61603 71.435982c0 15.380292-12.461823 27.842115-27.842115 27.842115-15.371082 0-27.842115-12.461823-27.842115-27.842115L231.094774 262.791172c0-8.256034 3.40761-14.908548 8.791224-19.476587 5.057179-5.148253 12.053524-8.374738 19.838837-8.374738l138.420583 0.00921c15.380292 0 27.842115 12.461823 27.842115 27.842115s-12.461823 27.842115-27.842115 27.842115l-73.175603-0.00921 133.607974 133.607974L419.199942 463.611943zM787.932981 763.946172c0 8.247848-3.40761 14.899338-8.791224 19.475564-5.057179 5.148253-12.053524 8.365528-19.839861 8.365528L620.881314 791.787264c-15.379269 0-27.841092-12.461823-27.841092-27.841092 0-15.380292 12.461823-27.842115 27.841092-27.842115l73.185836 0.00921L560.449967 602.50427l39.378869-39.378869L732.875015 696.163393l-0.62524-71.426773c0-15.371082 12.462846-27.842115 27.842115-27.842115 15.380292 0 27.842115 12.471033 27.842115 27.842115L787.934005 763.946172zM787.932981 402.000724c0 15.380292-12.461823 27.842115-27.842115 27.842115-15.379269 0-27.842115-12.461823-27.842115-27.842115l0.62524-71.435982L599.828836 463.611943l-39.378869-39.378869 133.617184-133.607974-73.185836 0.00921c-15.379269 0-27.841092-12.461823-27.841092-27.842115s12.461823-27.842115 27.841092-27.842115l138.421606-0.00921c7.785314 0 14.781658 3.226484 19.839861 8.374738 5.383614 4.568039 8.791224 11.219529 8.791224 19.476587L787.934005 402.000724z";if(t){var i=a.findDom(t,"xg-tips"),r=t.querySelector("path");t.style.display="block",i.textContent=o.config.lang&&"zh-cn"===o.config.lang?"样式全屏":"Full screen",r.setAttribute("d",n)}a.removeClass(e,"xgplayer-cssfullscreen-active"),c.setAttribute("d",n),u.textContent=s,document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():a.removeClass(e,"xgplayer-fullscreen-active")}:function getFullscreen(e){var t=a.findDom(o.controls,"xg-cssfullscreen");t&&(t.style.display="none"),c.setAttribute("d",n),u.textContent=r,e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):o.video.webkitSupportsFullscreen?o.video.webkitEnterFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():a.addClass(e,"xgplayer-fullscreen-active")})(l)})}),o.video.addEventListener("webkitendfullscreen",function(){o.emit("exitFullscreen"),c.setAttribute("d",t)});["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"].forEach(function(e){document.addEventListener(e,function(e){if(e.preventDefault(),e.stopPropagation(),!(document.fullscreenElement||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement)){var t=a.findDom(o.controls,"xg-cssfullscreen"),n="M843.617212 67.898413 175.411567 67.898413c-61.502749 0-111.367437 49.856501-111.367437 111.367437l0 668.205645c0 61.510936 49.864688 111.367437 111.367437 111.367437L843.617212 958.838931c61.510936 0 111.367437-49.856501 111.367437-111.367437L954.984648 179.26585C954.984648 117.754914 905.12917 67.898413 843.617212 67.898413zM398.146441 736.104057c15.380292 0 27.842115 12.461823 27.842115 27.842115 0 15.379269-12.461823 27.841092-27.842115 27.841092L259.725858 791.787264c-7.785314 0-14.781658-3.217275-19.838837-8.365528-5.383614-4.577249-8.791224-11.228739-8.791224-19.475564L231.095797 624.736621c0-15.371082 12.471033-27.842115 27.842115-27.842115 15.380292 0 27.842115 12.471033 27.842115 27.842115l-0.61603 71.426773 133.036969-133.037992 39.378869 39.378869L324.962651 736.113267 398.146441 736.104057zM419.199942 463.611943 286.162974 330.565764l0.61603 71.435982c0 15.380292-12.461823 27.842115-27.842115 27.842115-15.371082 0-27.842115-12.461823-27.842115-27.842115L231.094774 262.791172c0-8.256034 3.40761-14.908548 8.791224-19.476587 5.057179-5.148253 12.053524-8.374738 19.838837-8.374738l138.420583 0.00921c15.380292 0 27.842115 12.461823 27.842115 27.842115s-12.461823 27.842115-27.842115 27.842115l-73.175603-0.00921 133.607974 133.607974L419.199942 463.611943zM787.932981 763.946172c0 8.247848-3.40761 14.899338-8.791224 19.475564-5.057179 5.148253-12.053524 8.365528-19.839861 8.365528L620.881314 791.787264c-15.379269 0-27.841092-12.461823-27.841092-27.841092 0-15.380292 12.461823-27.842115 27.841092-27.842115l73.185836 0.00921L560.449967 602.50427l39.378869-39.378869L732.875015 696.163393l-0.62524-71.426773c0-15.371082 12.462846-27.842115 27.842115-27.842115 15.380292 0 27.842115 12.471033 27.842115 27.842115L787.934005 763.946172zM787.932981 402.000724c0 15.380292-12.461823 27.842115-27.842115 27.842115-15.379269 0-27.842115-12.461823-27.842115-27.842115l0.62524-71.435982L599.828836 463.611943l-39.378869-39.378869 133.617184-133.607974-73.185836 0.00921c-15.379269 0-27.841092-12.461823-27.841092-27.842115s12.461823-27.842115 27.841092-27.842115l138.421606-0.00921c7.785314 0 14.781658 3.226484 19.839861 8.374738 5.383614 4.568039 8.791224 11.219529 8.791224 19.476587L787.934005 402.000724z";if(t){var i=a.findDom(t,"xg-tips"),r=t.querySelector("path");t.style.display="block",i.textContent=o.config.lang&&"zh-cn"===o.config.lang?"样式全屏":"Full screen",r.setAttribute("d",n)}a.removeClass(l,"xgplayer-cssfullscreen-active"),c.setAttribute("d",n),u.textContent=s,a.removeClass(l,"xgplayer-fullscreen-active")}})});var d=function handle(){var e=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;e&&e===l?(a.addClass(l,"xgplayer-is-fullscreen"),c.setAttribute("d",n),u.textContent=r,o.emit("requestFullscreen")):(a.removeClass(l,"xgplayer-is-fullscreen"),c.setAttribute("d",t),u.textContent=s,o.emit("exitFullscreen"))};i.addEventListener("mouseenter",function(e){e.preventDefault(),e.stopPropagation(),u.style.left="50%";var t=u.getBoundingClientRect(),n=l.getBoundingClientRect();t.right>n.right&&(u.style.left=-t.right+n.right+16+"px")}),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"].forEach(function(e){document.addEventListener(e,d)}),o.once("destroy",function destroyFunc(){["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"].forEach(function(e){document.removeEventListener(e,d)}),o.off("destroy",destroyFunc)})})},function(e,t,n){"use strict";var i=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(0));i.default.install("__flex__",function flex(){var e=i.default.util.createDom("xg-placeholder","",{},"xgplayer-placeholder");this.controls.appendChild(e)})},function(e,t,n){"use strict";var r=_interopRequireDefault(n(0)),o=_interopRequireDefault(n(48));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}r.default.install("danmu",function danmu(){var n=this;if(n.config.danmu){var i=r.default.util.createDom("xg-bullet","",{},"xgplayer-bullet");n.root.appendChild(i),i.style.height="100%";var e=r.default.util.deepCopy({container:i,player:n.video,comments:[],area:{start:0,end:1}},n.config.danmu);n.once("complete",function(){var t=new o.default(e);r.default.util.addClass(i,"xgplayer-has-bullet"),n.config.danmu.closeDefaultBtn||(n.bulletBtn=r.default.util.copyDom(t.bulletBtn.createSwitch(!0)),n.controls.appendChild(n.bulletBtn),["click","touchend"].forEach(function(e){n.bulletBtn.addEventListener(e,function(e){e.preventDefault(),e.stopPropagation(),r.default.util.toggleClass(n.bulletBtn,"danmu-switch-active"),r.default.util.hasClass(n.bulletBtn,"danmu-switch-active")?(r.default.util.addClass(i,"xgplayer-has-bullet"),n.once("timeupdate",function(){t.start()})):(r.default.util.removeClass(i,"xgplayer-has-bullet"),t.stop())},!1)}),n.onElementClick&&i.addEventListener("click",function(e){n.onElementClick(e,i)},!1),n.onElementDblclick&&i.addEventListener("dblclick",function(e){n.onElementDblclick(e,i)},!1),n.on("pause",function(){r.default.util.hasClass(n.bulletBtn,"danmu-switch-active")&&t.pause()}),n.on("play",function(){r.default.util.hasClass(n.bulletBtn,"danmu-switch-active")&&t.play()}),n.on("seeked",function(){r.default.util.hasClass(n.bulletBtn,"danmu-switch-active")&&(t.stop(),t.start())})),n.danmu=t,n.emit("initDefaultDanmu",t)})}})},function(e,u,t){"use strict";(function(t){var o,s,l,C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"object"==C(u)&&"object"==C(t)?t.exports=e():(s=[],void 0===(l="function"==typeof(o=e)?o.apply(u,s):o)||(t.exports=l))}((window,function(){return function(i){var r={};function n(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}return n.m=i,n.c=r,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==(void 0===t?"undefined":C(t))&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(26),r=i&&i.__esModule?i:{default:i},o={};o.domObj=new r.default,o.createDom=function(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",o=document.createElement(i);return o.className=t,o.innerHTML=e,Object.keys(r).forEach(function(e){var t=e,n=r[e];("video"!==i&&"audio"!==i||n)&&o.setAttribute(t,n)}),o},o.hasClass=function(e,t){return e.classList?Array.prototype.some.call(e.classList,function(e){return e===t}):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},o.addClass=function(t,e){t.classList?e.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(e){e&&t.classList.add(e)}):o.hasClass(t,e)||(t.className+=" "+e)},o.removeClass=function(n,e){n.classList?e.split(/\s+/g).forEach(function(e){n.classList.remove(e)}):o.hasClass(n,e)&&e.split(/\s+/g).forEach(function(e){var t=new RegExp("(\\s|^)"+e+"(\\s|$)");n.className=n.className.replace(t," ")})},o.toggleClass=function(t,e){e.split(/\s+/g).forEach(function(e){o.hasClass(t,e)?o.removeClass(t,e):o.addClass(t,e)})},o.findDom=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document,n=arguments[1],i=void 0;try{i=t.querySelector(n)}catch(e){n.startsWith("#")&&(i=t.getElementById(n.slice(1)))}return i},o.deepCopy=function(t,n){if("Object"===o.typeOf(n)&&"Object"===o.typeOf(t))return Object.keys(n).forEach(function(e){"Object"!==o.typeOf(n[e])||n[e]instanceof Node?"Array"===o.typeOf(n[e])?t[e]="Array"===o.typeOf(t[e])?t[e].concat(n[e]):n[e]:t[e]=n[e]:t[e]?o.deepCopy(t[e],n[e]):t[e]=n[e]}),t},o.typeOf=function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]},o.copyDom=function(e){if(e&&1===e.nodeType){var t=document.createElement(e.tagName);return Array.prototype.forEach.call(e.attributes,function(e){t.setAttribute(e.name,e.value)}),e.innerHTML&&(t.innerHTML=e.innerHTML),t}return""},o.formatTime=function(e){var t=Math.floor(e);return 1e3*t+(e-t)},t.default=o,e.exports=t.default},function(e,t,n){var i=n(18)();e.exports=function(e){return e!==i&&null!==e}},function(e,t,n){e.exports=function(e){return null!=e}},function(e,t,n){e.exports=n(4)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),r=i&&i.__esModule?i:{default:i};n(30),t.default=r.default,e.exports=t.default},function(e,n,i){Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=s(i(6)),a=s(i(25)),l=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(){function t(e){!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var n=this;if(n.config=l.default.deepCopy({overlap:!1,area:{start:0,end:1},live:!1,comments:[],direction:"r2l"},e),n.hideArr=[],(0,o.default)(n),n.config.comments.forEach(function(e){e.duration=e.duration<5e3?5e3:e.duration,e.mode||(e.mode="scroll")}),!n.config.container||1!==n.config.container.nodeType)return n.emit("error","container id can't be empty"),!1;if(n.container=n.config.container,n.config.containerStyle){var i=n.config.containerStyle;Object.keys(i).forEach(function(e){n.container.style[e]=i[e]})}n.live=n.config.live,n.player=n.config.player,n.direction=n.config.direction,l.default.addClass(n.container,"danmu"),n.bulletBtn=new a.default(n),n.emit("ready")}return r(t,[{key:"start",value:function value(){this.bulletBtn.main.start()}},{key:"pause",value:function value(){this.bulletBtn.main.pause()}},{key:"play",value:function value(){this.bulletBtn.main.play()}},{key:"stop",value:function value(){this.bulletBtn.main.stop()}},{key:"sendComment",value:function value(e){e.duration||(e.duration=15e3),e&&e.id&&e.duration&&(e.el||e.txt)&&(e.duration=e.duration<5e3?5e3:e.duration,e.style&&(this.opacity&&this.opacity!==e.style.opacity&&(e.style.opacity=this.opacity),this.fontSize&&this.fontSize!==e.style.fontSize&&(e.style.fontSize=this.fontSize),this.like&&(e.like=e.like?e.like:this.like)),e.prior?this.bulletBtn.main.data.unshift(e):this.bulletBtn.main.data.push(e))}},{key:"setCommentID",value:function value(t,n){var i=this.container.getBoundingClientRect();t&&n&&(this.bulletBtn.main.data.some(function(e){return e.id===t&&(e.id=n,!0)}),this.bulletBtn.main.queue.some(function(e){return e.id===t&&(e.id=n,e.pauseMove(i),e.startMove(i),!0)}))}},{key:"setCommentDuration",value:function value(t,n){var i=this.container.getBoundingClientRect();t&&n&&(n=n<5e3?5e3:n,this.bulletBtn.main.data.some(function(e){return e.id===t&&(e.duration=n,!0)}),this.bulletBtn.main.queue.some(function(e){return e.id===t&&(e.duration=n,e.pauseMove(i),e.startMove(i),!0)}))}},{key:"setCommentLike",value:function value(t,n){var i=this.container.getBoundingClientRect();this.like=n,t&&n&&(this.bulletBtn.main.data.some(function(e){return e.id===t&&(e.like=n,!0)}),this.bulletBtn.main.queue.some(function(e){return e.id===t&&(e.pauseMove(i),e.setLikeDom(n.el,n.style),e.startMove(i),!0)}))}},{key:"startCommentMove",value:function value(t){var n=this.container.getBoundingClientRect();t&&this.bulletBtn.main.queue.some(function(e){return e.id===t&&(e.startMove(n),!0)})}},{key:"setAllDuration",value:function value(e,t){var n=0<arguments.length&&void 0!==e?e:"scroll",i=t,r=this.container.getBoundingClientRect();i&&(i=i<5e3?5e3:i,this.bulletBtn.main.data.forEach(function(e){n===e.mode&&(e.duration=i)}),this.bulletBtn.main.queue.forEach(function(e){n===e.mode&&(e.duration=i,e.pauseMove(r),"paused"!==e.danmu.bulletBtn.main.status&&e.startMove(r))}))}},{key:"setOpacity",value:function value(t){var n=this.container.getBoundingClientRect();(this.opacity=t)&&(this.bulletBtn.main.data.forEach(function(e){e.style&&(e.style.opacity=t)}),this.bulletBtn.main.queue.forEach(function(e){e.pauseMove(n),e.setOpacity(t),e.startMove(n)}))}},{key:"setFontSize",value:function value(e){var t=this;this.fontSize=e+"px",e&&this.bulletBtn.main.data.forEach(function(e){e.style&&(e.style.fontSize=t.fontSize)})}},{key:"hide",value:function value(e){var t=0<arguments.length&&void 0!==e?e:"scroll";this.hideArr.indexOf(t)<0&&this.hideArr.push(t),this.bulletBtn.main.queue.filter(function(e){return t===e.mode||"color"===t&&e.color}).forEach(function(e){return e.remove()})}},{key:"show",value:function value(e){var t=0<arguments.length&&void 0!==e?e:"scroll",n=this.hideArr.indexOf(t);-1<n&&this.hideArr.splice(n,1)}},{key:"setDirection",value:function value(e){var t=0<arguments.length&&void 0!==e?e:"r2l";this.emit("changeDirection",t)}}]),t}();n.default=u,e.exports=n.default},function(t,s,l){var u,c,d,f,p,h,g,y=l(7),v=l(24),m=Function.prototype.apply,b=Function.prototype.call,x=Object.create,w=Object.defineProperty,k=Object.defineProperties,_=Object.prototype.hasOwnProperty,E={configurable:!0,enumerable:!1,writable:!0};c=function o(e,t){var i,o;return v(t),o=this,u.call(this,e,i=function n(){d.call(o,e,i),m.call(t,this,arguments)}),i.__eeOnceListener__=t,this},p={on:u=function i(e,t){var n;return v(t),_.call(this,"__ee__")?n=this.__ee__:(n=E.value=x(null),w(this,"__ee__",E),E.value=null),n[e]?"object"==C(n[e])?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},once:c,off:d=function r(e,t){var n,i,o,r;if(v(t),!_.call(this,"__ee__"))return this;if(!(n=this.__ee__)[e])return this;if("object"==C(i=n[e]))for(r=0;o=i[r];++r)o!==t&&o.__eeOnceListener__!==t||(2===i.length?n[e]=i[r?0:1]:i.splice(r,1));else i!==t&&i.__eeOnceListener__!==t||delete n[e];return this},emit:f=function a(e,t,n){var i,r,o,s,l;if(_.call(this,"__ee__")&&(s=this.__ee__[e]))if("object"==(void 0===s?"undefined":C(s))){for(r=arguments.length,l=new Array(r-1),i=1;i<r;++i)l[i-1]=arguments[i];for(s=s.slice(),i=0;o=s[i];++i)m.call(o,this,l)}else switch(arguments.length){case 1:b.call(s,this);break;case 2:b.call(s,this,t);break;case 3:b.call(s,this,t,n);break;default:for(r=arguments.length,l=new Array(r-1),i=1;i<r;++i)l[i-1]=arguments[i];m.call(s,this,l)}}},h={on:y(u),once:y(c),off:y(d),emit:y(f)},g=k({},h),t.exports=s=function e(t){return null==t?x(g):k(Object(t),h)},s.methods=p},function(e,t,n){var s=n(2),l=n(8),u=n(12),c=n(20),d=n(21);(e.exports=function(e,t){var n,i,r,o,a;return arguments.length<2||"string"!=typeof e?(o=t,t=e,e=null):o=arguments[2],s(e)?(n=d.call(e,"c"),i=d.call(e,"e"),r=d.call(e,"w")):(n=r=!0,i=!1),a={value:t,configurable:n,enumerable:i,writable:r},o?u(c(o),a):a}).gs=function(e,t,n){var i,r,o,a;return"string"!=typeof e?(o=n,n=t,t=e,e=null):o=arguments[3],s(t)?l(t)?s(n)?l(n)||(o=n,n=void 0):n=void 0:(o=t,t=n=void 0):t=void 0,r=s(e)?(i=d.call(e,"c"),d.call(e,"e")):!(i=!0),a={get:t,set:n,configurable:i,enumerable:r},o?u(c(o),a):a}},function(e,t,n){var i=n(9),r=/^\s*class[\s{/}]/,o=Function.prototype.toString;e.exports=function(e){return!!i(e)&&!r.test(o.call(e))}},function(e,t,n){var i=n(10);e.exports=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!i(e)}},function(e,t,n){var i=n(11);e.exports=function(e){if(!i(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}}},function(e,t,n){var i=n(2),r={object:!0,function:!0,undefined:!0};e.exports=function(e){return!!i(e)&&hasOwnProperty.call(r,void 0===e?"undefined":C(e))}},function(e,t,n){e.exports=n(13)()?Object.assign:n(14)},function(e,t,n){e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,n){var a=n(15),l=n(19),u=Math.max;e.exports=function(t,n){var i,e,r,o=u(arguments.length,2);for(t=Object(l(t)),r=function s(e){try{t[e]=n[e]}catch(e){i=i||e}},e=1;e<o;++e)a(n=arguments[e]).forEach(r);if(void 0!==i)throw i;return t}},function(e,t,n){e.exports=n(16)()?Object.keys:n(17)},function(e,t,n){e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,n){var i=n(1),r=Object.keys;e.exports=function(e){return r(i(e)?Object(e):e)}},function(e,t,n){e.exports=function(){}},function(e,t,n){var i=n(1);e.exports=function(e){if(!i(e))throw new TypeError("Cannot use null or undefined");return e}},function(e,t,n){var i=n(1),r=Array.prototype.forEach,o=Object.create;e.exports=function(e){var t=o(null);return r.call(arguments,function(e){i(e)&&function a(e,t){var n;for(n in e)t[n]=e[n]}(Object(e),t)}),t}},function(e,t,n){e.exports=n(22)()?String.prototype.contains:n(23)},function(e,t,n){var i="razdwatrzy";e.exports=function(){return"function"==typeof i.contains&&!0===i.contains("dwa")&&!1===i.contains("foo")}},function(e,t,n){var i=String.prototype.indexOf;e.exports=function(e){return-1<i.call(this,e,arguments[1])}},function(e,t,n){e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,n,i){Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=a(i(0)),s=a(i(27));function a(e){return e&&e.__esModule?e:{default:e}}var l=function(){function t(e){!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.danmu=e,this.main=new s.default(e),e.config.defaultOff||this.main.start()}return r(t,[{key:"createSwitch",value:function value(e){var t=!(0<arguments.length&&void 0!==e)||e;return this.switchBtn=o.default.createDom("dk-switch",'<span class="txt">弹</span>',{},"danmu-switch "+(t?"danmu-switch-active":"")),this.switchBtn}}]),t}();n.default=l,e.exports=n.default},function(e,n,i){Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e){!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e={initDOM:function initDOM(){return document.createElement("div")},initSize:10},this.init(e)}return r(t,[{key:"init",value:function value(e){this.idleList=[],this.usingList=[],this._id=0,this.options=e,this._expand(e.initSize)}},{key:"use",value:function value(){this.idleList.length||this._expand(1);var e=this.idleList.shift();return this.usingList.push(e),e}},{key:"unuse",value:function value(e){var t=this.usingList.indexOf(e);t<0||(this.usingList.splice(t,1),e.innerHTML="",e.textcontent="",e.style="",this.idleList.push(e))}},{key:"_expand",value:function value(e){for(var t=0;t<e;t++)this.idleList.push(this.options.initDOM(this._id++))}}]),t}();n.default=o,e.exports=n.default},function(e,n,i){Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=s(i(28)),l=s(i(29)),u=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}var a=function(){function t(e){!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.danmu=e,this.container=e.container,this.channel=new o.default(e),this.data=[].concat(e.config.comments),this.playedData=[],this.queue=[],this.timer=null,this.retryTimer=null,this.interval=2e3,this.status="idle",e.on("bullet_remove",this.updateQueue.bind(this));var n=this;this.danmu.on("changeDirection",function(e){n.danmu.direction=e}),this.nums=0}return r(t,[{key:"updateQueue",value:function value(n){var i=this;i.queue.some(function(e,t){return e.id===n.bullet.id&&(i.queue.splice(t,1),!0)})}},{key:"init",value:function value(e,t){(t=t||this).data.sort(function(e,t){return e.start-t.start}),t.retryTimer||(t.retryTimer=setInterval(function(){t.readData(),t.dataHandle()},t.interval-1e3))}},{key:"start",value:function value(){this.status="playing",this.queue=[],this.container.innerHTML="",this.channel.resetWithCb(this.init,this)}},{key:"stop",value:function value(){this.status="closed",clearInterval(this.retryTimer),this.retryTimer=null,this.channel.reset(),this.queue=[],this.container.innerHTML=""}},{key:"play",value:function value(){this.status="playing";var i=this.channel.channels,r=this.danmu.container.getBoundingClientRect();i&&0<i.length&&["scroll","top","bottom"].forEach(function(e){for(var t=0;t<i.length;t++)i[t].queue[e].forEach(function(e){e.resized||(e.startMove(r),e.resized=!0)});for(var n=0;n<i.length;n++)i[n].queue[e].forEach(function(e){e.resized=!1})})}},{key:"pause",value:function value(){this.status="paused";var n=this.channel.channels,i=this.danmu.container.getBoundingClientRect();n&&0<n.length&&["scroll","top","bottom"].forEach(function(e){for(var t=0;t<n.length;t++)n[t].queue[e].forEach(function(e){e.pauseMove(i)})})}},{key:"dataHandle",value:function value(){var t=this;"paused"!==this.status&&"closed"!==this.status&&t.queue.length&&t.queue.forEach(function(e){"waiting"!==e.status&&"paused"!==e.status||e.startMove(t.channel.containerPos)})}},{key:"readData",value:function value(){var t=this,n=this.danmu,i=0;n.player&&n.player.currentTime&&(i=u.default.formatTime(n.player.currentTime));var r=void 0,o=t.interval,a=t.channel,e=void 0;n.player?(e=t.data.filter(function(e){return!e.start&&t.danmu.hideArr.indexOf(e.mode)<0&&(!e.color||t.danmu.hideArr.indexOf("color")<0)&&(e.start=i),t.danmu.hideArr.indexOf(e.mode)<0&&(!e.color||t.danmu.hideArr.indexOf("color")<0)&&e.start-o<=i&&i<=e.start+o}),n.live&&(t.data=t.data.filter(function(e){return e.start||(e.start=i),e.start>i-3*o}))):0===(e=t.data.splice(0,1)).length&&(e=t.playedData.splice(0,1)),0<e.length&&e.forEach(function(e){r=new l.default(n,e),t.danmu.emit("bullet_start",e),r.attach(),a.addBullet(r).result?(t.queue.push(r),t.nums++,r.topInit()):(r.detach(),e.noDiscard&&(e.prior?t.data.unshift(e):t.data.push(e)))})}}]),t}();n.default=a,e.exports=n.default},function(e,n,i){Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e){!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.danmu=e,this.reset();var n=this;this.danmu.on("bullet_remove",function(e){n.removeBullet(e.bullet)}),this.direction=e.direction,this.danmu.on("changeDirection",function(e){n.direction=e}),this.containerPos=this.danmu.container.getBoundingClientRect(),this.containerWidth=this.containerPos.width,this.containerHeight=this.containerPos.height,this.containerLeft=this.containerPos.left,this.containerRight=this.containerPos.right,this.danmu.bulletResizeTimer=setInterval(function(){n.containerPos=n.danmu.container.getBoundingClientRect(),n.resizeing||(2<=Math.abs(n.containerPos.width-n.containerWidth)||2<=Math.abs(n.containerPos.height-n.containerHeight)||2<=Math.abs(n.containerPos.left-n.containerLeft)||2<=Math.abs(n.containerPos.right-n.containerRight))&&(n.containerWidth=n.containerPos.width,n.containerHeight=n.containerPos.height,n.containerLeft=n.containerPos.left,n.containerRight=n.containerPos.right,n.resize(!0))},50)}return r(t,[{key:"resize",value:function value(e){var b=0<arguments.length&&void 0!==e&&e,x=this.danmu.container,w=this;w.resizeing||(w.resizeing=!0,setTimeout(function(){w.danmu.bulletBtn.main.data&&w.danmu.bulletBtn.main.data.forEach(function(e){e.bookChannelId&&delete e.bookChannelId});var e=x.getBoundingClientRect();w.width=e.width,w.height=e.height,w.danmu.config.area&&0<=w.danmu.config.area.start&&w.danmu.config.area.end>=w.danmu.config.area.start&&("b2t"===w.direction?w.width=w.width*(w.danmu.config.area.end-w.danmu.config.area.start):w.height=w.height*(w.danmu.config.area.end-w.danmu.config.area.start)),w.container=x;var t,a=w.danmu.config.fontSize||(/mobile/gi.test(navigator.userAgent)?10:12);t="b2t"===w.direction?Math.floor(w.width/a):Math.floor(w.height/a);for(var s=[],n=0;n<t;n++)s[n]={id:n,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}};if(w.channels&&w.channels.length<=s.length){for(var i=function u(n){s[n]={id:n,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}},["scroll","top"].forEach(function(t){w.channels[n].queue[t].forEach(function(e){e.el&&(s[n].queue[t].push(e),e.resized||(e.pauseMove(w.containerPos,b),"paused"!==e.danmu.bulletBtn.main.status&&e.startMove(w.containerPos),e.resized=!0))})}),w.channels[n].queue.bottom.forEach(function(e){if(e.el){if(s[n+s.length-w.channels.length].queue.bottom.push(e),e.channel_id[0]+e.channel_id[1]-1===n){var t=[].concat(e.channel_id);e.channel_id=[t[0]-w.channels.length+s.length,t[1]],e.top=e.channel_id[0]*a,w.danmu.config.area&&w.danmu.config.area.start&&(e.top+=w.containerHeight*w.danmu.config.area.start),e.topInit()}e.resized||(e.pauseMove(w.containerPos,b),"paused"!==e.danmu.bulletBtn.main.status&&e.startMove(w.containerPos),e.resized=!0)}})},r=0;r<w.channels.length;r++)i(r);for(var o=function c(t){["scroll","top","bottom"].forEach(function(e){s[t].queue[e].forEach(function(e){e.resized=!1})})},l=0;l<s.length;l++)o(l);w.channels=s,"b2t"===w.direction?w.channelWidth=a:w.channelHeight=a}else if(w.channels&&w.channels.length>s.length){for(var d=function f(o){s[o]={id:o,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}},["scroll","top","bottom"].forEach(function(i){if(!("top"===i&&o>Math.floor(s.length/2)||"bottom"===i&&o<=Math.floor(s.length/2))){var r="bottom"===i?o-s.length+w.channels.length:o;w.channels[r].queue[i].forEach(function(e,t){if(e.el){if(s[o].queue[i].push(e),"bottom"===i&&e.channel_id[0]+e.channel_id[1]-1===r){var n=[].concat(e.channel_id);e.channel_id=[n[0]-w.channels.length+s.length,n[1]],e.top=e.channel_id[0]*a,w.danmu.config.area&&w.danmu.config.area.start&&(e.top+=w.containerHeight*w.danmu.config.area.start),e.topInit()}e.resized||(e.pauseMove(w.containerPos,b),"paused"!==e.danmu.bulletBtn.main.status&&e.startMove(w.containerPos),e.resized=!0)}w.channels[r].queue[i].splice(t,1)})}})},p=0;p<s.length;p++)d(p);for(var h=function p(t){["scroll","top","bottom"].forEach(function(e){w.channels[t].queue[e].forEach(function(e){e.pauseMove(w.containerPos),e.remove()})})},y=s.length;y<w.channels.length;y++)h(y);for(var v=function g(t){["scroll","top","bottom"].forEach(function(e){s[t].queue[e].forEach(function(e){e.resized=!1})})},m=0;m<s.length;m++)v(m);w.channels=s,"b2t"===w.direction?w.channelWidth=a:w.channelHeight=a}w.resizeing=!1},10))}},{key:"addBullet",value:function value(t){var e=this.danmu,n=this.channels,i=void 0,r=void 0,o=void 0;if((o="b2t"===this.direction?(r=this.channelWidth,Math.ceil(t.width/r)):(i=this.channelHeight,Math.ceil(t.height/i)))>n.length)return{result:!1,message:"exceed channels.length, occupy="+o+",channelsSize="+n.length};for(var a=!0,s=void 0,l=-1,u=0,c=n.length;u<c;u++)if(n[u].queue[t.mode].some(function(e){return e.id===t.id}))return{result:!1,message:"exsited, channelOrder="+u+",danmu_id="+t.id};if("scroll"===t.mode)for(var d=0,f=n.length-o;d<=f;d++){a=!0;for(var p=d;p<d+o;p++){if((s=n[p]).operating.scroll){a=!1;break}if((s.bookId.scroll||t.prior)&&s.bookId.scroll!==t.id){a=!1;break}s.operating.scroll=!0;var h=s.queue.scroll[0];if(h){var g=h.el.getBoundingClientRect();if("b2t"===this.direction){if(g.bottom>this.containerPos.bottom){a=!1,s.operating.scroll=!1;break}}else if(g.right>this.containerPos.right){a=!1,s.operating.scroll=!1;break}var y,v=void 0,m=void 0,b=void 0,x=void 0;if(x="b2t"===this.direction?(m=(g.top-this.containerPos.top+g.height)/(v=(this.containerPos.height+g.height)/h.duration),b=this.containerPos.height,(this.containerPos.height+t.height)/t.duration):(m=(g.left-this.containerPos.left+g.width)/(v=(this.containerPos.width+g.width)/h.duration),b=this.containerPos.width,(this.containerPos.width+t.width)/t.duration),y=b/x,e.config.bOffset||(e.config.bOffset=0),v<x&&m+e.config.bOffset>y){a=!1,s.operating.scroll=!1;break}}s.operating.scroll=!1}if(a){l=d;break}}else if("top"===t.mode)for(var w=0,k=n.length-o;w<=k;w++){a=!0;for(var _=w;_<w+o;_++){if(_>Math.floor(n.length/2)){a=!1;break}if((s=n[_]).operating[t.mode]){a=!1;break}if((s.bookId[t.mode]||t.prior)&&s.bookId[t.mode]!==t.id){a=!1;break}if(s.operating[t.mode]=!0,0<s.queue[t.mode].length){a=!1,s.operating[t.mode]=!1;break}s.operating[t.mode]=!1}if(a){l=w;break}}else if("bottom"===t.mode)for(var E=n.length-o;0<=E;E--){a=!0;for(var C=E;C<E+o;C++){if(C<=Math.floor(n.length/2)){a=!1;break}if((s=n[C]).operating[t.mode]){a=!1;break}if((s.bookId[t.mode]||t.prior)&&s.bookId[t.mode]!==t.id){a=!1;break}if(s.operating[t.mode]=!0,0<s.queue[t.mode].length){a=!1,s.operating[t.mode]=!1;break}s.operating[t.mode]=!1}if(a){l=E;break}}if(-1!==l){for(var P=l,T=l+o;P<T;P++)(s=n[P]).operating[t.mode]=!0,s.queue[t.mode].unshift(t),t.prior&&delete s.bookId[t.mode],s.operating[t.mode]=!1;return t.prior&&(delete t.bookChannelId,e.player&&e.bulletBtn.main.data.some(function(e){return e.id===t.id&&(delete e.bookChannelId,!0)})),t.channel_id=[l,o],"b2t"===this.direction?(t.top=l*r,this.danmu.config.area&&this.danmu.config.area.start&&(t.top+=this.containerWidth*this.danmu.config.area.start)):(t.top=l*i,this.danmu.config.area&&this.danmu.config.area.start&&(t.top+=this.containerHeight*this.danmu.config.area.start)),{result:t,message:"success"}}if(t.prior)if(t.bookChannelId)e.player&&e.bulletBtn.main.data.some(function(e){return e.id===t.id&&(e.start+=2e3,!0)});else{l=-1;for(var S=0,M=n.length-o;S<=M;S++){a=!0;for(var D=S;D<S+o;D++)if(n[D].bookId[t.mode]){a=!1;break}if(a){l=S;break}}if(-1!==l){for(var O=l;O<l+o;O++)n[O].bookId[t.mode]=t.id;e.player&&e.bulletBtn.main.data.some(function(e){return e.id===t.id&&(e.start+=2e3,e.bookChannelId=[l,o],!0)})}}return{result:!1,message:"no surplus will right"}}},{key:"removeBullet",value:function value(n){for(var e=this.channels,t=n.channel_id,i=void 0,r=t[0],o=t[0]+t[1];r<o;r++)if(i=e[r]){i.operating[n.mode]=!0;var a=-1;i.queue[n.mode].some(function(e,t){return e.id===n.id&&(a=t,!0)}),-1<a&&i.queue[n.mode].splice(a,1),i.operating[n.mode]=!1}n.options.loop&&this.danmu.bulletBtn.main.playedData.push(n.options)}},{key:"resetArea",value:function value(){var e=this.danmu.container,a=this,t=e.getBoundingClientRect();a.width=t.width,a.height=t.height,a.danmu.config.area&&0<=a.danmu.config.area.start&&a.danmu.config.area.end>=a.danmu.config.area.start&&("b2t"===a.direction?a.width=a.width*(a.danmu.config.area.end-a.danmu.config.area.start):a.height=a.height*(a.danmu.config.area.end-a.danmu.config.area.start)),a.container=e;var n,u=a.danmu.config.fontSize||(/mobile/gi.test(navigator.userAgent)?10:12);n="b2t"===a.direction?Math.floor(a.width/u):Math.floor(a.height/u);for(var c=[],i=0;i<n;i++)c[i]={id:i,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}};if(a.channels&&a.channels.length<=c.length){for(var r=function s(n){c[n]={id:n,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}},["scroll","top"].forEach(function(t){a.channels[n].queue[t].forEach(function(e){e.el&&(c[n].queue[t].push(e),e.resized||(e.pauseMove(a.containerPos,!1),e.startMove(a.containerPos),e.resized=!0))})}),a.channels[n].queue.bottom.forEach(function(e){if(e.el){if(c[n+c.length-a.channels.length].queue.bottom.push(e),e.channel_id[0]+e.channel_id[1]-1===n){var t=[].concat(e.channel_id);e.channel_id=[t[0]-a.channels.length+c.length,t[1]],e.top=e.channel_id[0]*u,a.danmu.config.area&&a.danmu.config.area.start&&(e.top+=a.containerHeight*a.danmu.config.area.start),e.topInit()}e.resized||(e.pauseMove(a.containerPos,!1),e.startMove(a.containerPos),e.resized=!0)}})},o=0;o<a.channels.length;o++)r(o);for(var f=function l(t){["scroll","top","bottom"].forEach(function(e){c[t].queue[e].forEach(function(e){e.resized=!1})})},p=0;p<c.length;p++)f(p);a.channels=c,"b2t"===a.direction?a.channelWidth=u:a.channelHeight=u}else if(a.channels&&a.channels.length>c.length){for(var g=function h(o){c[o]={id:o,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}},["scroll","top","bottom"].forEach(function(i){if(!("top"===i&&o>Math.floor(c.length/2)||"bottom"===i&&o<=Math.floor(c.length/2))){var r="bottom"===i?o-c.length+a.channels.length:o;a.channels[r].queue[i].forEach(function(e,t){if(e.el){if(c[o].queue[i].push(e),"bottom"===i&&e.channel_id[0]+e.channel_id[1]-1===r){var n=[].concat(e.channel_id);e.channel_id=[n[0]-a.channels.length+c.length,n[1]],e.top=e.channel_id[0]*u,a.danmu.config.area&&a.danmu.config.area.start&&(e.top+=a.containerHeight*a.danmu.config.area.start),e.topInit()}e.resized||(e.pauseMove(a.containerPos,!1),e.startMove(a.containerPos),e.resized=!0)}a.channels[r].queue[i].splice(t,1)})}})},y=0;y<c.length;y++)g(y);for(var v=function d(t){["scroll","top","bottom"].forEach(function(e){c[t].queue[e].forEach(function(e){e.resized=!1})})},m=0;m<c.length;m++)v(m);a.channels=c,"b2t"===a.direction?a.channelWidth=u:a.channelHeight=u}}},{key:"reset",value:function value(){var o=this.danmu.container,a=this;a.channels&&0<a.channels.length&&["scroll","top","bottom"].forEach(function(e){for(var t=0;t<a.channels.length;t++)a.channels[t].queue[e].forEach(function(e){e.pauseMove(a.containerPos),e.remove()})}),setTimeout(function(){var e=o.getBoundingClientRect();a.width=e.width,a.height=e.height,a.danmu.config.area&&0<=a.danmu.config.area.start&&a.danmu.config.area.end>=a.danmu.config.area.start&&("b2t"===a.direction?a.width=a.width*(a.danmu.config.area.end-a.danmu.config.area.start):a.height=a.height*(a.danmu.config.area.end-a.danmu.config.area.start)),a.container=o;var t,n=a.danmu.config.fontSize||(/mobile/gi.test(navigator.userAgent)?10:12);t="b2t"===a.direction?Math.floor(a.width/n):Math.floor(a.height/n);for(var i=[],r=0;r<t;r++)i[r]={id:r,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}};a.channels=i,"b2t"===a.direction?a.channelWidth=n:a.channelHeight=n},200)}},{key:"resetWithCb",value:function value(e,t){var n=this.danmu.container,i=this;i.channels&&0<i.channels.length&&["scroll","top","bottom"].forEach(function(e){for(var t=0;t<i.channels.length;t++)i.channels[t].queue[e].forEach(function(e){e.pauseMove(i.containerPos),e.remove()})});var r=n.getBoundingClientRect();i.width=r.width,i.height=r.height,i.danmu.config.area&&0<=i.danmu.config.area.start&&i.danmu.config.area.end>=i.danmu.config.area.start&&("b2t"===i.direction?i.width=i.width*(i.danmu.config.area.end-i.danmu.config.area.start):i.height=i.height*(i.danmu.config.area.end-i.danmu.config.area.start)),i.container=n;var o,a=i.danmu.config.fontSize||(/mobile/gi.test(navigator.userAgent)?10:12);o="b2t"===i.direction?Math.floor(i.width/a):Math.floor(i.height/a);for(var s=[],l=0;l<o;l++)s[l]={id:l,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}};i.channels=s,i.channelHeight=a,e&&e(!0,t)}}]),t}();n.default=o,e.exports=n.default},function(e,n,i){Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=i(0),s=o&&o.__esModule?o:{default:o},a=function(){function t(e,n){!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.danmu=e,this.options=n,this.duration=n.duration,this.moveV=n.moveV,this.id=n.id,this.container=e.container,this.start=n.start,this.prior=n.prior,this.color=n.color,this.bookChannelId=n.bookChannelId,this.direction=e.direction;var i=this;this.danmu.on("changeDirection",function(e){i.direction=e});var r=void 0;if(this.domObj=s.default.domObj,n.el&&1===n.el.nodeType)(r=this.domObj.use()).appendChild(s.default.copyDom(n.el));else if((r=this.domObj.use()).textContent=n.txt,n.style){var o=n.style;Object.keys(o).forEach(function(e){r.style[e]=o[e]})}"top"===n.mode||"bottom"===n.mode?this.mode=n.mode:this.mode="scroll",this.el=r,n.like&&n.like.el&&this.setLikeDom(n.like.el,n.like.style),this.status="waiting";var a=this.container.getBoundingClientRect();this.el.style.left=a.width+"px"}return r(t,[{key:"attach",value:function value(){if(this.container.appendChild(this.el),this.elPos=this.el.getBoundingClientRect(),"b2t"===this.direction?(this.width=this.elPos.height,this.height=this.elPos.width):(this.width=this.elPos.width,this.height=this.elPos.height),this.moveV){var e=this.container.getBoundingClientRect();this.duration=(e.width+this.width)/this.moveV*1e3}}},{key:"mouseoverFun",value:function value(){var e=this.danmu.container.getBoundingClientRect();this.pauseMove(e),this.status="farcePaused",this.danmu.emit("bullet_pause",{bullet:this})}},{key:"detach",value:function value(){var t=this;t.container&&t.el&&(t.domObj.unuse(t.el),t.container.removeChild(t.el)),t.danmu.off("changeDirection",function(e){t.direction=e}),t.el=null}},{key:"topInit",value:function value(){if("b2t"===this.direction){var e=this.container.getBoundingClientRect();this.el.style.transformOrigin="left top",this.el.style.transform="translateX(-"+this.top+"px) translateY("+e.height+"px) translateZ(0px) rotate(90deg)",this.el.style.transition="transform 0s linear 0s"}else this.el.style.top=this.top+"px"}},{key:"pauseMove",value:function value(e,t){var n=1<arguments.length&&void 0!==t&&t,i=this;if("paused"!==this.status&&(this.status="paused",clearTimeout(i.removeTimer),this.el))if(this.el.style.willChange="auto","scroll"===this.mode){if(n){var r,o=((new Date).getTime()-i.moveTime)/1e3*this.moveV;r=0<=i.moveMoreS-o?"b2t"===this.direction?(i.moveMoreS-o)/i.moveContainerHeight*e.height:(i.moveMoreS-o)/i.moveContainerWidth*e.width:i.moveMoreS-o,"b2t"===this.direction?this.el.style.transform="translateX(-"+this.top+"px) translateY("+r+"px) translateZ(0px) rotate(90deg)":this.el.style.left=r+"px"}else"b2t"===this.direction?this.el.style.transform="translateX(-"+this.top+"px) translateY("+(this.el.getBoundingClientRect().top-e.top)+"px) translateZ(0px) rotate(90deg)":this.el.style.left=this.el.getBoundingClientRect().left-e.left+"px";"b2t"===this.direction||(this.el.style.transform="translateX(0px) translateY(0px) translateZ(0px)"),this.el.style.transition="transform 0s linear 0s"}else this.pastDuration&&this.startTime?this.pastDuration=this.pastDuration+(new Date).getTime()-this.startTime:this.pastDuration=1}},{key:"startMove",value:function value(e){console.log("startMove");var n=this;if(this.el&&"start"!==this.status)if(this.status="start",this.el.style.willChange="transform","scroll"===this.mode)if("b2t"===this.direction){this.moveV=(e.height+this.height)/this.duration*1e3;var t=(n.el.getBoundingClientRect().bottom-e.top)/this.moveV;this.el.style.transition="transform "+t+"s linear 0s",setTimeout(function(){n.el&&(n.el.style.transform="translateX(-"+n.top+"px) translateY(-"+n.height+"px) translateZ(0px) rotate(90deg)",n.moveTime=(new Date).getTime(),n.moveMoreS=n.el.getBoundingClientRect().top-e.top,n.moveContainerHeight=e.height,n.removeTimer=setTimeout(r,1e3*t))},20)}else{this.moveV=(e.width+this.width)/this.duration*1e3;var i=(n.el.getBoundingClientRect().right-e.left)/this.moveV;this.el.style.transition="transform "+i+"s linear 0s",setTimeout(function(){n.el&&(n.el.style.transform="translateX(-"+(n.el.getBoundingClientRect().right-e.left)+"px) translateY(0px) translateZ(0px)",n.moveTime=(new Date).getTime(),n.moveMoreS=n.el.getBoundingClientRect().left-e.left,n.moveContainerWidth=e.width,n.removeTimer=setTimeout(r,1e3*i))},20)}else{this.el.style.left="50%",this.el.style.margin="0 0 0 -"+this.width/2+"px",this.pastDuration||(this.pastDuration=1);var o=this.duration>=this.pastDuration?this.duration-this.pastDuration:0;this.removeTimer=setTimeout(r,o),this.startTime=(new Date).getTime()}function r(){if(n.el)if("scroll"===n.mode){var e=n.danmu.container.getBoundingClientRect(),t=n.el.getBoundingClientRect();"b2t"===n.direction?t&&t.bottom<=e.top+100?(n.status="end",n.remove()):(n.pauseMove(e),"paused"!==n.danmu.bulletBtn.main.status&&n.startMove(e)):t&&t.right<=e.left+100?(n.status="end",n.remove()):(n.pauseMove(e),"paused"!==n.danmu.bulletBtn.main.status&&n.startMove(e))}else n.status="end",n.remove()}}},{key:"remove",value:function value(){var t=this;this.removeTimer&&clearTimeout(this.removeTimer),t.el&&t.el.parentNode&&(t.el.style.willChange="auto",this.danmu.off("changeDirection",function(e){t.direction=e}),this.domObj.unuse(t.el),t.el.parentNode.removeChild(t.el),t.el=null,t.danmu.emit("bullet_remove",{bullet:t}))}},{key:"setOpacity",value:function value(e){this.el&&(this.el.style.opacity=e)}},{key:"setFontSize",value:function value(e){this.el&&(this.el.style.fontSize=e+"px")}},{key:"setLikeDom",value:function value(t,n){if(t&&(Object.keys(n).forEach(function(e){t.style[e]=n[e]}),t.className="danmu-like",this.el)){var e=this.el.querySelector(".danmu-like");e&&this.el.removeChild(e),this.el.innerHTML=""+this.el.innerHTML+t.outerHTML}return t}}]),t}();n.default=a,e.exports=n.default},function(e,t,n){var i=n(31);"string"==typeof i&&(i=[[e.i,i,""]]);n(33)(i,{hmr:!0,transform:void 0,insertInto:void 0}),i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(32)(!1)).push([e.i,".danmu{overflow:hidden;-webkit-user-select:none;-moz-user-select:none;user-select:none;-ms-user-select:none}.danmu>*{position:absolute;white-space:nowrap}.danmu-switch{width:32px;height:20px;border-radius:100px;background-color:#ccc;-webkit-box-sizing:border-box;box-sizing:border-box;outline:none;cursor:pointer;position:relative;text-align:center;margin:10px auto}.danmu-switch.danmu-switch-active{padding-left:12px;background-color:#f85959}.danmu-switch span.txt{width:20px;height:20px;line-height:20px;text-align:center;display:block;border-radius:100px;background-color:#ffffff;-webkit-box-shadow:-2px 0 0 0 rgba(0, 0, 0, .04);box-shadow:-2px 0 0 0 rgba(0, 0, 0, .04);font-family:PingFangSC;font-size:10px;font-weight:500;color:#f44336}\n",""])},function(e,t){e.exports=function(t){var a=[];return a.toString=function(){return this.map(function(o){var e=function(e){var t=o[1]||"",n=o[3];if(!n)return t;if(e&&"function"==typeof btoa){var i="/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */",r=n.sources.map(function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"});return[t].concat(r).concat([i]).join("\n")}return[t].join("\n")}(t);return o[2]?"@media "+o[2]+"{"+e+"}":e}).join("")},a.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(n[r]=!0)}for(i=0;i<e.length;i++){var o=e[i];"number"==typeof o[0]&&n[o[0]]||(t&&!o[2]?o[2]=t:t&&(o[2]="("+o[2]+") and ("+t+")"),a.push(o))}},a}},function(e,t,n){var i,r,l={},u=(i=function i(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=i.apply(this,arguments)),r}),a=function(){var n={};return function(e){if("function"==typeof e)return e();if(void 0===n[e]){var t=function s(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}}(),c=null,f=0,s=[],h=n(34);function d(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=l[i.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](i.parts[o]);for(;o<i.parts.length;o++)r.parts.push(y(i.parts[o],t))}else{var a=[];for(o=0;o<i.parts.length;o++)a.push(y(i.parts[o],t));l[i.id]={id:i.id,refs:1,parts:a}}}}function p(e,t){for(var n=[],i={},r=0;r<e.length;r++){var o=e[r],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};i[a]?i[a].parts.push(s):n.push(i[a]={id:a,parts:[s]})}return n}function m(e,t){var n=a(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=s[s.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),s.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=C(e.insertAt)||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=a(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,r)}}function g(e){if(null!==e.parentNode){e.parentNode.removeChild(e);var t=s.indexOf(e);0<=t&&s.splice(t,1)}}function v(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),b(t,e.attrs),m(e,t),t}function b(t,n){Object.keys(n).forEach(function(e){t.setAttribute(e,n[e])})}function y(t,e){var n,i,r,a;if(e.transform&&t.css){if(!(a=e.transform(t.css)))return function(){};t.css=a}if(e.singleton){var s=f++;n=c=c||v(e),i=x.bind(null,n,s,!1),r=x.bind(null,n,s,!0)}else r=t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",b(t,e.attrs),m(e,t),t}(e),i=function M(e,t,n){var i=n.css,r=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||o)&&(i=h(i)),r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([i],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,e),function o(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(e),i=function _(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),function o(){g(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else r()}}e.exports=function(e,a){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=("undefined"==typeof document?"undefined":C(document)))throw new Error("The style-loader cannot be used in a non-browser environment");(a=a||{}).attrs="object"==C(a.attrs)?a.attrs:{},a.singleton||"boolean"==typeof a.singleton||(a.singleton=u()),a.insertInto||(a.insertInto="head"),a.insertAt||(a.insertAt="bottom");var s=p(e,a);return d(s,a),function(e){for(var t=[],n=0;n<s.length;n++){var i=s[n];(r=l[i.id]).refs--,t.push(r)}for(e&&d(p(e,a),a),n=0;n<t.length;n++){var r;if(0===(r=t[n]).refs){for(var o=0;o<r.parts.length;o++)r.parts[o]();delete l[r.id]}}}};var w,k=(w=[],function(e,t){return w[e]=t,w.filter(Boolean).join("\n")});function x(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=k(t,r);else{var o=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,o=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var n,i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(n=0===i.indexOf("//")?i:0===i.indexOf("/")?r+i:o+i.replace(/^\.\//,""),"url("+JSON.stringify(n)+")")})}}])}))}).call(this,t(49)(e))},function(e,t,n){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function get(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function get(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";e.exports=function(n){var a=[];return a.toString=function toString(){return this.map(function(e){var t=function cssWithMappingToString(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var r=function toComment(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(i),o=i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"});return[n].concat(o).concat([r]).join("\n")}return[n].join("\n")}(e,n);return e[2]?"@media "+e[2]+"{"+t+"}":t}).join("")},a.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(n[r]=!0)}for(i=0;i<e.length;i++){var o=e[i];"number"==typeof o[0]&&n[o[0]]||(t&&!o[2]?o[2]=t:t&&(o[2]="("+o[2]+") and ("+t+")"),a.push(o))}},a}},function(e,t,n){var l={},i=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),o=function(){var n={};return function(e){if("function"==typeof e)return e();if(void 0===n[e]){var t=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}}(),s=null,u=0,a=[],c=n(52);function addStylesToDom(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=l[i.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](i.parts[o]);for(;o<i.parts.length;o++)r.parts.push(addStyle(i.parts[o],t))}else{var a=[];for(o=0;o<i.parts.length;o++)a.push(addStyle(i.parts[o],t));l[i.id]={id:i.id,refs:1,parts:a}}}}function listToStyles(e,t){for(var n=[],i={},r=0;r<e.length;r++){var o=e[r],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};i[a]?i[a].parts.push(s):n.push(i[a]={id:a,parts:[s]})}return n}function insertStyleElement(e,t){var n=o(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=a[a.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),a.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=o(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,r)}}function removeStyleElement(e){if(null!==e.parentNode){e.parentNode.removeChild(e);var t=a.indexOf(e);0<=t&&a.splice(t,1)}}function createStyleElement(e){var t=document.createElement("style");return e.attrs.type="text/css",addAttrs(t,e.attrs),insertStyleElement(e,t),t}function addAttrs(t,n){Object.keys(n).forEach(function(e){t.setAttribute(e,n[e])})}function addStyle(t,e){var n,i,r,o;if(e.transform&&t.css){if(!(o=e.transform(t.css)))return function(){};t.css=o}if(e.singleton){var a=u++;n=s=s||createStyleElement(e),i=applyToSingletonTag.bind(null,n,a,!1),r=applyToSingletonTag.bind(null,n,a,!0)}else r=t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function createLinkElement(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",addAttrs(t,e.attrs),insertStyleElement(e,t),t}(e),i=function updateLink(e,t,n){var i=n.css,r=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||o)&&(i=c(i));r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([i],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,e),function(){removeStyleElement(n),n.href&&URL.revokeObjectURL(n.href)}):(n=createStyleElement(e),i=function applyToTag(e,t){var n=t.css,i=t.media;i&&e.setAttribute("media",i);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),function(){removeStyleElement(n)});return i(t),function updateStyle(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else r()}}e.exports=function(e,a){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(a=a||{}).attrs="object"==typeof a.attrs?a.attrs:{},a.singleton||"boolean"==typeof a.singleton||(a.singleton=i()),a.insertInto||(a.insertInto="head"),a.insertAt||(a.insertAt="bottom");var s=listToStyles(e,a);return addStylesToDom(s,a),function update(e){for(var t=[],n=0;n<s.length;n++){var i=s[n];(r=l[i.id]).refs--,t.push(r)}e&&addStylesToDom(listToStyles(e,a),a);for(n=0;n<t.length;n++){var r;if(0===(r=t[n]).refs){for(var o=0;o<r.parts.length;o++)r.parts[o]();delete l[r.id]}}}};var d=function(){var n=[];return function(e,t){return n[e]=t,n.filter(Boolean).join("\n")}}();function applyToSingletonTag(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=d(t,r);else{var o=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}},function(e,t,n){"use strict";e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,o=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var n,i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(n=0===i.indexOf("//")?i:0===i.indexOf("/")?r+i:o+i.replace(/^\.\//,""),"url("+JSON.stringify(n)+")")})}},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(75)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(0));n(47),n(46),n(45),n(44),n(43),n(42),n(41),n(40),n(39),n(38),n(37),n(36),n(76),t.default=i.default,e.exports=t.default},function(e,t,n){var i=n(77);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(51)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(50)(!1)).push([e.i,'@-webkit-keyframes playPause{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}99%{-webkit-transform:scale(1.3);transform:scale(1.3);opacity:0}to{-webkit-transform:scale(0);transform:scale(0);opacity:0}}@-webkit-keyframes loadingRotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes loadingDashOffset{0%{stroke-dashoffset:236}to{stroke-dashoffset:0}}@-webkit-keyframes enterTips{0%{opacity:0;left:0;width:3px}50%{opacity:1;left:50%;width:5px}to{opacity:0;left:100%;width:3px}}.xgplayer{background:rgba(0,0,0,.26);width:100%;height:100%;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;-ms-user-select:none}.xgplayer *{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}.xgplayer.xgplayer-is-fullscreen{width:100%!important;height:100%!important;padding-top:0!important;z-index:9999}.xgplayer.xgplayer-is-fullscreen.xgplayer-inactive{cursor:none}.xgplayer video{width:100%;height:100%;outline:none}.xgplayer-icon{display:block;width:40px;height:40px;overflow:hidden;fill:#fff}.xgplayer-controls{display:-webkit-flex;display:-moz-box;display:flex;position:absolute;bottom:0;left:0;right:0;height:40px;background-image:linear-gradient(-1deg,rgba(0,0,0,.3),transparent);z-index:10}.xgplayer-nostart .xgplayer-controls{display:none}.no-controls .xgplayer-controls{display:none!important}.xgplayer-inactive .xgplayer-controls,.xgplayer-is-live .xgplayer-controls>*{display:none}.xgplayer-is-live .xgplayer-controls .xgplayer-fullscreen,.xgplayer-is-live .xgplayer-controls .xgplayer-live,.xgplayer-is-live .xgplayer-controls .xgplayer-placeholder,.xgplayer-is-live .xgplayer-controls .xgplayer-play,.xgplayer-is-live .xgplayer-controls .xgplayer-play-img,.xgplayer-is-live .xgplayer-controls .xgplayer-volume{display:block}.xgplayer-play,.xgplayer-play-img{position:relative;-webkit-order:0;-moz-box-ordinal-group:1;order:0;display:block;cursor:pointer}.xgplayer-play-img .xgplayer-icon,.xgplayer-play .xgplayer-icon{margin-top:3px}.xgplayer-play-img:hover,.xgplayer-play:hover{opacity:.85}.xgplayer-play-img:hover .xgplayer-tips,.xgplayer-play:hover .xgplayer-tips{display:block}.xgplayer-time{-webkit-order:2;-moz-box-ordinal-group:3;order:2;font-family:ArialMT;font-size:13px;color:#fff;line-height:40px;display:inline-block}.xgplayer-time span:after{content:"/";display:inline-block;padding:0 3px}.xgplayer-time em{color:hsla(0,0%,100%,.5)}.xgplayer-tips{background:rgba(0,0,0,.54);border-radius:1px;display:none;position:absolute;font-family:PingFangSC-Regular;font-size:11px;color:#fff;padding:2px 4px;text-align:center;top:-30px;left:50%;margin-left:-16px;width:auto;white-space:nowrap}.xgplayer-placeholder{-webkit-flex:1;-moz-box-flex:1;flex:1;-webkit-order:3;-moz-box-ordinal-group:4;order:3;display:block}.xgplayer-start{display:none;border-radius:50%;width:70px;height:70px;background:hsla(0,0%,100%,.3);overflow:hidden;text-align:center;line-height:70px;vertical-align:middle;position:absolute;left:50%;top:50%;z-index:1000;margin:-55px auto auto -35px;cursor:pointer}.xgplayer-nostart .xgplayer-start,.xgplayer-start-appear .xgplayer-start{margin:-35px auto auto -35px;display:inline-block}.xgplayer-inactive .xgplayer-start{margin:-35px auto auto -35px}.xgplayer-start svg{fill:hsla(0,0%,100%,.7);margin:14px}.xgplayer-start.xgplayer-start-interact{-webkit-animation:playPause .4s ease-out forwards;animation:playPause .4s ease-out forwards}.xgplayer-start:hover{background:hsla(0,0%,100%,.5)}.xgplayer-start:hover svg{fill:hsla(0,0%,100%,.6)}.xgplayer-start-img{display:none;position:absolute;left:50%;top:50%;z-index:1000;cursor:pointer}.xgplayer-nostart .xgplayer-start-img{display:block}.xgplayer-start-img.xgplayer-start-interact{-webkit-animation:playPause .4s ease-out forwards;animation:playPause .4s ease-out forwards}.xgplayer-start-img:hover{opacity:.85}.xgplayer-playback{-webkit-order:8;-moz-box-ordinal-group:9;order:8;position:relative;outline:none;display:block;cursor:pointer;margin:10px;height:20px}.xgplayer-playback .name{text-align:center;font-family:PingFangSC-Regular;font-size:13px;line-height:20px;height:20px;color:hsla(0,0%,100%,.8)}.xgplayer-playback .name span{width:40px;height:20px;line-height:20px;background:rgba(0,0,0,.38);border-radius:10px;display:inline-block;vertical-align:middle}.xgplayer-playback:hover .xgplayer-tips{display:block;top:-40px}.xgplayer-pip{-webkit-order:9;-moz-box-ordinal-group:10;order:9;position:relative;outline:none;display:block;cursor:pointer;margin-left:10px;margin-top:9px;margin-bottom:11px;height:20px}.xgplayer-pip .name{text-align:center;font-family:PingFangSC-Regular;font-size:13px;line-height:20px;height:20px;color:hsla(0,0%,100%,.8)}.xgplayer-pip .name span{width:60px;height:20px;line-height:20px;background:rgba(0,0,0,.38);border-radius:10px;display:inline-block;vertical-align:middle}.xgplayer.xgplayer-pip-active{position:fixed!important;right:0;bottom:200px;z-index:999!important}.xgplayer.xgplayer-pip-active .xgplayer-controls,.xgplayer.xgplayer-pip-active xg-bullet{display:none}.xgplayer.xgplayer-pip-active .xgplayer-pip-lay{display:block}.xgplayer-pip-lay{position:absolute;top:26px;left:0;z-index:1450;cursor:pointer;background-color:transparent;display:none}.xgplayer-pip-lay,.xgplayer-pip-lay div{width:100%;height:100%}.xgplayer-pip-drag{cursor:move;position:absolute;top:0;left:0;width:100%;height:26px;line-height:26px;background-image:linear-gradient(rgba(0,0,0,.3),transparent);z-index:1500;display:none}.xgplayer.xgplayer-pip-active .xgplayer-pip-drag{display:-webkit-flex;display:-moz-box;display:flex}.xgplayer.xgplayer-inactive .xgplayer-pip-drag{display:none}.xgplayer-fullscreen{-webkit-order:12;-moz-box-ordinal-group:13;order:12;position:relative;display:inline-block;cursor:pointer}.xgplayer-fullscreen .xgplayer-icon{margin:4px -4px 0 0}.xgplayer-fullscreen:hover .xgplayer-tips{display:block}.xgplayer.xgplayer-fullscreen-active{position:fixed!important;left:0!important;top:0!important;width:100%!important;height:100%!important;z-index:99999!important}.xgplayer-cssfullscreen{-webkit-order:11;-moz-box-ordinal-group:12;order:11;position:relative;display:inline-block;cursor:pointer;left:6px}.xgplayer-cssfullscreen .xgplayer-icon{margin:4px -4px 0 0}.xgplayer-cssfullscreen:hover .xgplayer-tips{display:block}.xgplayer.xgplayer-cssfullscreen-active{position:fixed!important;left:0!important;top:0!important;width:100%!important;height:100%!important;z-index:99999!important}.danmu-switch{-webkit-order:6;-moz-box-ordinal-group:7;order:6;z-index:26;margin:10px auto}.xgplayer-bullet{display:none;position:absolute;top:0;left:0;right:0;height:100%;overflow:hidden;z-index:9;outline:none}.xgplayer-bullet>*{position:absolute;white-space:nowrap;z-index:9}.xgplayer-has-bullet{display:block}.xgplayer-loading{display:none;width:100px;height:100px;overflow:hidden;-webkit-transform:scale(.7);-ms-transform:scale(.7);transform:scale(.7);position:absolute;left:50%;top:50%;margin:-70px auto auto -50px}.xgplayer-loading svg{border-radius:50%;-webkit-transform-origin:center;-ms-transform-origin:center;transform-origin:center;-webkit-animation:loadingRotate 1s linear infinite;animation:loadingRotate 1s linear infinite}.xgplayer-loading svg path{stroke:#ddd;stroke-dasharray:236;-webkit-animation:loadingDashOffset 2s linear infinite;animation:loadingDashOffset 2s linear infinite;animation-direction:alternate-reverse;fill:none;stroke-width:12px}.xgplayer-nostart .xgplayer-loading{display:none}.xgplayer-isloading .xgplayer-loading{display:block}@keyframes playPause{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}99%{-webkit-transform:scale(1.3);transform:scale(1.3);opacity:0}to{-webkit-transform:scale(0);transform:scale(0);opacity:0}}@keyframes loadingRotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes loadingDashOffset{0%{stroke-dashoffset:236}to{stroke-dashoffset:0}}@keyframes enterTips{0%{opacity:0;left:0;width:3px}50%{opacity:1;left:50%;width:5px}to{opacity:0;left:100%;width:3px}}.xgplayer-enter{display:none;position:absolute;left:0;top:0;width:100%;height:100%;background:url("//s2.pstatp.com/cdn/expire-1-M/byted-player-images/1.0.2/bg.svg") no-repeat 50%/102%;z-index:1100}.xgplayer-enter .xgplayer-enter-logo{display:block;position:absolute;left:50%;top:50%;width:130px;height:44px;margin:-22px auto auto -65px;background-size:130px 44px;background-image:url("//s3.pstatp.com/cdn/expire-1-M/byted-player-images/1.0.1/xg-logo-new.png")}.xgplayer-enter .xgplayer-enter-tips{display:none;position:absolute;left:50%;top:50%;width:120px;height:1px;background:linear-gradient(90deg,#000,red,red,red,#000);margin:32px auto auto -62px}.xgplayer-enter .xgplayer-enter-tips:before{content:" ";display:block;width:5px;height:1px;border-radius:50%;position:absolute;left:0;top:0;-webkit-animation:enterTips 1.6s linear infinite;animation:enterTips 1.6s linear infinite;background:#fff}.xgplayer-is-enter .xgplayer-enter,.xgplayer-is-enter .xgplayer-enter .xgplayer-enter-tips{display:block}.xgplayer-poster{position:absolute;left:0;top:0;width:100%;height:100%;z-index:100;background-size:cover;background-position:50%}.xgplayer-live{display:block;font-size:12px;color:#fff;line-height:40px;-webkit-order:1;-moz-box-ordinal-group:2;order:1}.xgplayer .xgplayer-none{display:none}.xgplayer-error{background:#000;display:none;position:absolute;left:0;top:0;width:100%;height:100%;z-index:1200;font-family:PingFangSC-Regular;font-size:14px;color:#fff;text-align:center;line-height:100%;-webkit-justify-content:center;-moz-box-pack:center;justify-content:center;-webkit-align-items:center;-moz-box-align:center;align-items:center}.xgplayer-error .xgplayer-error-refresh{color:#fa1f41;padding:0 3px;cursor:pointer}.xgplayer-is-error .xgplayer-error{display:-webkit-flex;display:-moz-box;display:flex}.xgplayer-error .xgplayer-error-text{line-height:18px;margin:auto 6px}.xgplayer-mobile .xgplayer-progress-btn{display:block}.xgplayer-mobile .xgplayer-progress:focus .xgplayer-progress-outer,.xgplayer-mobile .xgplayer-progress:hover .xgplayer-progress-outer{height:3px;margin-top:8.5px}.xgplayer-mobile .xgplayer-progress:focus .xgplayer-progress-dot,.xgplayer-mobile .xgplayer-progress:hover .xgplayer-progress-dot{height:3px}.xgplayer-mobile.xgplayer-ended .xgplayer-start,.xgplayer-mobile.xgplayer-ended .xgplayer-start-img,.xgplayer-mobile.xgplayer-inactive .xgplayer-start,.xgplayer-mobile.xgplayer-inactive .xgplayer-start-img{display:none}.xgplayer-mobile .xgplayer-start{width:60px;height:60px;line-height:60px;display:none;margin:-50px auto auto -30px}.xgplayer-mobile .xgplayer-start svg{margin:10px}.xgplayer-mobile .xgplayer-start-img{display:none}.xgplayer-mobile .xgplayer-tips{display:none!important}.xgplayer-mobile.xgplayer-nostart .xgplayer-start{margin:-30px auto auto -30px;display:block}.xgplayer-mobile.xgplayer-nostart .xgplayer-start-img{display:block}.xgplayer-mobile .xgplayer-loading{-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5)}.xgplayer-mobile.xgplayer-mobile-npassed .xgplayer-controls,.xgplayer-mobile.xgplayer-mobile-npassed .xgplayer-poster,.xgplayer-mobile.xgplayer-mobile-npassed .xgplayer-start,.xgplayer-mobile.xgplayer-mobile-npassed .xgplayer-start-img{display:none}',""])}]);
//# sourceMappingURL=simple_player.js.map